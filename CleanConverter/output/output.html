<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>MariaDB Server Documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="https://mariadb.com/kb/static/css/main.9a0d7dcebefd.css" type="text/css">
    </head>
    <body class = "mpkb nodes products nodes_view jqui">

<style>   
    .front_page_small {
        font-size: 20px;
        text-align: center;
    }
    .front_page_header {
        font-size: 80px;
        text-align: center;
    }
</style>
<h1 class="front_page_header">MariaDB Server Documentation</h1>
<br>
<p class="front_page_small"><a href="https://mariadb.com/kb/en/documentation/">MariaDB Knowledge Base</a></p>
<p class="front_page_small">For any errors please see <a href="https://mariadb.com/kb/en/mariadb-community-bug-reporting/">Bug Reporting</a></p>

<p class="front_page_small">Document generated on: 2022-03-16</p>

<br/><br/><br/>

<!--"https://mariadb.com/kb/en/mariadb-community-bug-reporting/"
"#mariadb-community-bug-reporting"--><div style = "page-break-after:always;"></div>

<h1 class="col-md-8" style="font-size: 60px; text-align: center; margin-bottom: 60px; float: none; clear: right;">Chapter Contents</h1>
<ol style="margin-left: 0.0em;"><li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#sql-statements-structure" style="color: #333333; text-decoration: none; font-size: 24px; font-weight: 700;">Chapter 1 SQL Statements and Structure 700</a></li>
<ol style="margin-left: 0.0em;"><li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#sql-statements" style="color: #333333; text-decoration: none; font-size: 24px; font-weight: 525;">1.1 SQL Statements 525</a></li>
</ol></ol></ol></ol></ol><div style = "page-break-after:always;"></div>

<h1 class="col-md-8" style="font-size: 60px; text-align: center; margin-bottom: 60px; float: none; clear: right;">Table of Contents</h1>
<ol style="margin-left: -2.2em;"><li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#sql-statements-structure" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 700;">Chapter 1 SQL Statements and Structure 700</a></li>
<ol style="margin-left: -2.2em;"><li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#sql-statements" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 525;">1.1 SQL Statements 525</a></li>
<ol style="margin-left: -2.2em;"><li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#account-management-sql-commands" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 350;">1.1.1 
        Account Management SQL Commands
    
 350</a></li>
<ol style="margin-left: -2.2em;"><li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#create-user" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.1 CREATE USER 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter-user" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.2 ALTER USER 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#drop-user" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.3 DROP USER 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#grant" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.4 GRANT 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#rename-user" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.5 RENAME USER 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#revoke" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.6 REVOKE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#set-password" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.7 SET PASSWORD 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#create-role" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.8 CREATE ROLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#drop-role" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.9 DROP ROLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#set-role" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.10 SET ROLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#set-default-role" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.11 SET DEFAULT ROLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#show-grants" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.12 SHOW GRANTS 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#show-create-user" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.1.13 SHOW CREATE USER 175</a></li>
</ol><li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#administrative-sql-statements" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 700;">1.1.2 Administrative SQL Statements 700</a></li>
<ol style="margin-left: -2.2em;"><li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#table-statements" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 525;">1.1.2.1 
        Table Statements
    
 525</a></li>
<ol style="margin-left: -2.2em;"><li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 350;">1.1.2.1.1 ALTER 350</a></li>
<ol style="margin-left: -2.2em;"><li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter-table" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.1.1 ALTER TABLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter-database" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.1.2 ALTER DATABASE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter-event" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.1.3 ALTER EVENT 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter-function" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.1.4 ALTER FUNCTION 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter-logfile-group" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.1.5 ALTER LOGFILE GROUP 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter-procedure" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.1.6 ALTER PROCEDURE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter-sequence" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.1.7 ALTER SEQUENCE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter-server" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.1.8 ALTER SERVER 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter-tablespace" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.1.9 ALTER TABLESPACE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter-user" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.1.10 ALTER USER 175</a></li>
</ol><li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#alter-view" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.2 ALTER VIEW 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#analyze-table" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.3 ANALYZE TABLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#check-table" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.4 CHECK TABLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#check-view" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.5 CHECK VIEW 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#checksum-table" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.6 CHECKSUM TABLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#create-table" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.7 CREATE TABLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#delete" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.8 DELETE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#drop-table" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.9 DROP TABLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#installing-system-tables-mysql_install_db" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.10 Installing System Tables (mysql_install_db) 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#mysqlcheck" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.11 mysqlcheck 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#optimize-table" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.12 OPTIMIZE TABLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#rename-table" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.13 RENAME TABLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#repair-table" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.14 REPAIR TABLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#repair-view" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.15 REPAIR VIEW 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#replace" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.16 REPLACE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#show-columns" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.17 SHOW COLUMNS 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#show-create-table" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.18 SHOW CREATE TABLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#show-index" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.19 SHOW INDEX 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#truncate-table" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.20 TRUNCATE TABLE 175</a></li>
<li style="margin-top: 1px; margin-bottom: 1px; list-style-type: none; clear: right;"><a href="#update" style="color: #333333; text-decoration: none; font-size: 14px; font-weight: 175;">1.1.2.1.21 UPDATE 175</a></li>
</ol></ol></ol></ol></ol><div style = "page-break-after:always;"></div>

<h1 class="col-md-8" style="margin-top:0px;font-weight: bold;" id="sql-statements-structure">Chapter 1 SQL Statements and Structure</h1>

<h1 class="col-md-8" style="margin-top:0px;" id="sql-statements">1.1 SQL Statements</h1>
<section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="account-management-sql-commands">1.1.1 
        Account Management SQL Commands
    
</h1>
                

                



                <div>
                    
    
    

    

    

    

    

    
        <div class="creole">
            <p>CREATE/DROP USER, GRANT, REVOKE, SET PASSWORD etc.</p>

        </div>
    

    

        
            
    
    <ul class="media-list listing" data-order-url="/kb/en/account-management-sql-commands/+change_order">
                
                
    
        
    
    <li class="media node article product mariadb_from_10_4_0 mariadb from_10_4_0 mariadb_from_10_4_3 mariadb from_10_4_3 mariadb_from_10_2_0 mariadb from_10_2_0 mariadb_from_10_4_3 mariadb from_10_4_3 mariadb_from_10_4_2 mariadb from_10_4_2 mariadb_from_10_4_0 mariadb from_10_4_0 mariadb_from_10_4_3 mariadb from_10_4_3 mariadb_from_10_2_0 mariadb from_10_2_0 mariadb_from_10_4_3 mariadb from_10_4_3 mariadb_from_10_4_2 mariadb from_10_4_2" data-node-id="549" id="node_549">
        <div class="media-left left-box">
        <a class="" href="#create-user">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="8comments">8</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#create-user">
            <h4 class="media-heading">
                CREATE USER</h4>
            
            <span class="blurb">
                Create new MariaDB accounts.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_2_0 mariadb from_10_2_0 mariadb_from_10_2_0 mariadb from_10_2_0 mariadb_from_10_4 mariadb from_10_4 mariadb_from_10_2_0 mariadb from_10_2_0 mariadb_from_10_4_3 mariadb from_10_4_3 mariadb_from_10_4_2 mariadb from_10_4_2 mariadb_from_10_4 mariadb from_10_4 mariadb_from_10_2_0 mariadb from_10_2_0 mariadb_from_10_4_3 mariadb from_10_4_3 mariadb_from_10_4_2 mariadb from_10_4_2" data-node-id="5456" id="node_5456">
        <div class="media-left left-box">
        <a class="" href="#alter-user">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="1comment">1</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#alter-user">
            <h4 class="media-heading">
                ALTER USER</h4>
            
            <span class="blurb">
                Modify an existing MariaDB account.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="550" id="node_550">
        <div class="media-left left-box">
        <a class="" href="#drop-user">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="1comment">1</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#drop-user">
            <h4 class="media-heading">
                DROP USER</h4>
            
            <span class="blurb">
                Remove one or more MariaDB accounts.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_4_0 mariadb from_10_4_0 mariadb_from_10_4_3 mariadb from_10_4_3 mariadb_from_10_2_0 mariadb from_10_2_0 mariadb_from_10_4_0 mariadb from_10_4_0 mariadb_from_10_4_3 mariadb from_10_4_3 mariadb_from_10_2_0 mariadb from_10_2_0" data-node-id="551" id="node_551">
        <div class="media-left left-box">
        <a class="" href="#grant">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="2comments">2</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#grant">
            <h4 class="media-heading">
                GRANT</h4>
            
            <span class="blurb">
                Create accounts and set privileges or roles.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="552" id="node_552">
        <div class="media-left left-box">
        <a class="" href="#rename-user">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#rename-user">
            <h4 class="media-heading">
                RENAME USER</h4>
            
            <span class="blurb">
                Rename user account.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="553" id="node_553">
        <div class="media-left left-box">
        <a class="" href="#revoke">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="4comments">4</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#revoke">
            <h4 class="media-heading">
                REVOKE</h4>
            
            <span class="blurb">
                Remove privileges or roles.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_4 mariadb from_10_4 mariadb_from_10_4 mariadb from_10_4 mariadb_to_10_3 mariadb to_10_3 mariadb_from_10_4 mariadb from_10_4 mariadb_to_10_3 mariadb to_10_3 mariadb_from_10_4 mariadb from_10_4" data-node-id="554" id="node_554">
        <div class="media-left left-box">
        <a class="" href="#set-password">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#set-password">
            <h4 class="media-heading">
                SET PASSWORD</h4>
            
            <span class="blurb">
                Assign password to an existing MariaDB user.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="4017" id="node_4017">
        <div class="media-left left-box">
        <a class="" href="#create-role">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#create-role">
            <h4 class="media-heading">
                CREATE ROLE</h4>
            
            <span class="blurb">
                Add new roles.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="4016" id="node_4016">
        <div class="media-left left-box">
        <a class="" href="#drop-role">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#drop-role">
            <h4 class="media-heading">
                DROP ROLE</h4>
            
            <span class="blurb">
                Drop a role.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="4019" id="node_4019">
        <div class="media-left left-box">
        <a class="" href="#set-role">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="1comment">1</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#set-role">
            <h4 class="media-heading">
                SET ROLE</h4>
            
            <span class="blurb">
                Enable a role.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="4655" id="node_4655">
        <div class="media-left left-box">
        <a class="" href="#set-default-role">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="5comments">5</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#set-default-role">
            <h4 class="media-heading">
                SET DEFAULT ROLE</h4>
            
            <span class="blurb">
                Sets a default role for a specified (or current) user.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class not_primary" data-node-id="671" id="node_671">
        <div class="media-left left-box">
        <a class="" href="#show-grants">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="9comments">9</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#show-grants">
            <h4 class="media-heading">
                SHOW GRANTS</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Administrative SQL Statements</span>
    

    
    » <span class="crumb">SHOW</span>
    



            </div>
            
            <span class="blurb">
                View GRANT statements.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_2_0 mariadb from_10_2_0 not_primary" data-node-id="5439" id="node_5439">
        <div class="media-left left-box">
        <a class="" href="#show-create-user">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#show-create-user">
            <h4 class="media-heading">
                SHOW CREATE USER</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Administrative SQL Statements</span>
    

    
    » <span class="crumb">SHOW</span>
    



            </div>
            
            <span class="blurb">
                Show the CREATE USER statement for a specified user.

            </span>
        </a>
    </li>

            
            </ul>
        

        

        

        
            <div class="related_questions alert">
                There are <a style="color: #150281;" href="https://mariadb.com/kb/en/account-management-sql-commands/+questions/">2 related questions</a>.
            </div>
        
    

    
    
        
    



                    
                </div>
            </section>
<div style = "display:block; clear:both; page-break-after:always;"></div>
<section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="create-user">1.1.1.1 CREATE USER</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="create-usersyntax">Syntax</h2>
<pre class="fixed">CREATE [OR REPLACE] USER [IF NOT EXISTS] 
 <em>user_specification</em> [,<em>user_specification</em> ...] 
  [REQUIRE {NONE | <em>tls_option</em> [[AND] <em>tls_option</em> ...] }]
  [WITH <em>resource_option</em> [<em>resource_option</em> ...] ]
  [<em>lock_option</em>] [<em>password_option</em>] 

<em>user_specification</em>:
  username [<em>authentication_option</em>]

<em>authentication_option</em>:
  IDENTIFIED BY 'password' 
  | IDENTIFIED BY PASSWORD 'password_hash'
  | IDENTIFIED {VIA|WITH} <em>authentication_rule</em> [OR <em>authentication_rule</em>  ...]

<em>authentication_rule</em>:
    authentication_plugin
  | authentication_plugin {USING|AS} 'authentication_string'
  | authentication_plugin {USING|AS} PASSWORD('password')

<em>tls_option</em>:
  SSL 
  | X509
  | CIPHER 'cipher'
  | ISSUER 'issuer'
  | SUBJECT 'subject'

<em>resource_option</em>:
  MAX_QUERIES_PER_HOUR count
  | MAX_UPDATES_PER_HOUR count
  | MAX_CONNECTIONS_PER_HOUR count
  | MAX_USER_CONNECTIONS count
  | MAX_STATEMENT_TIME time

<em>password_option</em>:
  PASSWORD EXPIRE
  | PASSWORD EXPIRE DEFAULT
  | PASSWORD EXPIRE NEVER
  | PASSWORD EXPIRE INTERVAL N DAY

<em>lock_option</em>:
    ACCOUNT LOCK
  | ACCOUNT UNLOCK
}
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#create-usersyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#create-userdescription" title="Description">Description</a></li>

    <li class=""><a href="#create-useror-replace" title="OR REPLACE">OR REPLACE</a></li>

    <li class=""><a href="#create-userif-not-exists" title="IF NOT EXISTS">IF NOT EXISTS</a></li>

    <li class=""><a href="#create-userauthentication-options" title="Authentication Options">Authentication Options</a>    <ol class="toc">

        <li class=""><a href="#create-useridentified-by-password" title="IDENTIFIED BY 'password'">IDENTIFIED BY 'password'</a></li>

        <li class=""><a href="#create-useridentified-by-password-password_hash" title="IDENTIFIED BY PASSWORD 'password_hash'">IDENTIFIED BY PASSWORD 'password_hash'</a></li>

        <li class=""><a href="#create-useridentified-viawith-authentication_plugin" title="IDENTIFIED {VIA|WITH} authentication_plugin">IDENTIFIED {VIA|WITH} authentication_plugin</a>    </li></ol>
</li>

    <li class=""><a href="#create-usertls-options" title="TLS Options">TLS Options</a></li>

    <li class=""><a href="#create-userresource-limit-options" title="Resource Limit Options">Resource Limit Options</a></li>

    <li class=""><a href="#create-useraccount-names" title="Account Names">Account Names</a>    <ol class="toc">

        <li class=""><a href="#create-userhost-name-component" title="Host Name Component">Host Name Component</a></li>

        <li class=""><a href="#create-useruser-name-component" title="User Name Component">User Name Component</a></li>

        <li class=""><a href="#create-useranonymous-accounts" title="Anonymous Accounts">Anonymous Accounts</a>        <ol class="toc">

            <li class=""><a href="#create-userfixing-a-legacy-default-anonymous-account" title="Fixing a Legacy Default Anonymous Account">Fixing a Legacy Default Anonymous Account</a>        </li></ol>
    </li></ol>
</li>

    <li class=""><a href="#create-userpassword-expiry" title="Password Expiry">Password Expiry</a></li>

    <li class=""><a href="#create-useraccount-locking" title="Account Locking">Account Locking</a></li>

    <li class=""><a href="#create-usersee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-userdescription">Description</h2>
<p>The <code>CREATE USER</code> statement creates new MariaDB accounts. To use it, you must have the global <a href="#grantcreate-user">CREATE USER</a> privilege or the <a href="#granttable-privileges">INSERT</a> privilege for the <a style="color: #150281;" href="https://mariadb.com/kb/en/the-mysql-database-tables/">mysql</a> database. For each account, <code>CREATE USER</code> creates a new row in <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a> (until <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-103/">MariaDB 10.3</a> this is a table, from <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-104/">MariaDB 10.4</a> it's a view) or <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlglobal_priv-table/">mysql.global_priv_table</a> (from <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-104/">MariaDB 10.4</a>) that has no privileges.</p>
<p>If any of the specified accounts, or any permissions for the specified accounts, already exist, then the server returns <code>ERROR 1396 (HY000)</code>. If an error occurs, <code>CREATE USER</code> will still create the accounts that do not result in an error. Only one error is produced for all users which have not been created:</p>
<pre class="fixed">ERROR 1396 (HY000): 
  Operation CREATE USER failed for 'u1'@'%','u2'@'%'
</pre><p><code>CREATE USER</code>, <a href="#drop-user">DROP USER</a>, <a href="#create-role">CREATE ROLE</a>, and <a href="#drop-role">DROP ROLE</a>  all produce the same error code when they fail.</p>
<p>See <a href="#create-useraccount-names">Account Names</a> below for details on how account names are specified. </p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-useror-replace">OR REPLACE</h2>
<p>If the optional <code>OR REPLACE</code> clause is used, it is basically a shortcut for:</p>
<pre class="fixed"><span class="k">DROP</span> <span class="n">USER</span> <span class="k">IF</span> <span class="k">EXISTS</span> <span class="n">name</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="n">USER</span> <span class="n">name</span> <span class="p">...;</span>
</pre><p>For example:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="n">USER</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'password'</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">1396</span> <span class="p">(</span><span class="n">HY000</span><span class="p">):</span> <span class="n">Operation</span> <span class="k">CREATE</span> <span class="n">USER</span> <span class="n">failed</span> <span class="k">for</span> <span class="s1">'foo2'</span><span class="o">@</span><span class="s1">'test'</span>

<span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="n">USER</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'password'</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="nf">affected</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="create-userif-not-exists">IF NOT EXISTS</h2>
<p>When the <code>IF NOT EXISTS</code> clause is used, MariaDB will return a warning instead of an error if the specified user already exists.</p>
<p>For example:</p>
<pre class="fixed">CREATE USER foo2@test IDENTIFIED BY 'password';
ERROR 1396 (HY000): Operation CREATE USER failed for 'foo2'@'test'

CREATE USER IF NOT EXISTS foo2@test IDENTIFIED BY 'password';
Query OK, 0 rows affected, 1 warning (0.00 sec)

SHOW WARNINGS;
+-------+------+----------------------------------------------------+
| Level | Code | Message                                            |
+-------+------+----------------------------------------------------+
| Note  | 1973 | Can't create user 'foo2'@'test'; it already exists |
+-------+------+----------------------------------------------------+
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="create-userauthentication-options">Authentication Options</h2>
<h3 class="anchored_heading" id="create-useridentified-by-password">IDENTIFIED BY 'password'</h3>
<p>The optional <code>IDENTIFIED BY</code> clause can be used to provide an account with a password. The password should be specified in plain text. It will be hashed by the <a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD</a> function prior to being stored in the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a>/<a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlglobal_priv-table/">mysql.global_priv_table</a> table.</p>
<p>For example, if our password is <code>mariadb</code>, then we can create the user with:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'mariadb'</span><span class="p">;</span>
</pre><p>If you do not specify a password with the <code>IDENTIFIED BY</code> clause, the user
will be able to connect without a password. A blank password is not a wildcard
to match any password. The user must connect without providing a password if no
password is set.</p>
<p>The only <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugins</a> that this clause supports are <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_native_password/">mysql_native_password</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_old_password/">mysql_old_password</a>.</p>
<h3 class="anchored_heading" id="create-useridentified-by-password-password_hash">IDENTIFIED BY PASSWORD 'password_hash'</h3>
<p>The optional <code>IDENTIFIED BY PASSWORD</code> clause can be used to provide an account with a password that has already been hashed. The password should be specified as a hash that was provided by the <a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD</a> function. It will be stored in the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a>/<a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlglobal_priv-table/">mysql.global_priv_table</a> table as-is.</p>
<p>For example, if our password is <code>mariadb</code>, then we can find the hash with:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">'mariadb'</span><span class="p">);</span>
<span class="o">+</span><span class="c1">-------------------------------------------+</span>
<span class="o">|</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">'mariadb'</span><span class="p">)</span>                       <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------------------------------------+</span>
<span class="o">|</span> <span class="o">*</span><span class="mi">54958</span><span class="n">E764CE10E50764C2EECBB71D01F08549980</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------------------------------------+</span>
<span class="mi">1</span> <span class="k">row</span> <span class="k">in</span> <span class="k">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>
</pre><p>And then we can create a user with the hash:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="n">PASSWORD</span> <span class="s1">'*54958E764CE10E50764C2EECBB71D01F08549980'</span><span class="p">;</span>
</pre><p>If you do not specify a password with the <code>IDENTIFIED BY</code> clause, the user
will be able to connect without a password. A blank password is not a wildcard
to match any password. The user must connect without providing a password if no
password is set.</p>
<p>The only <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugins</a> that this clause supports are <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_native_password/">mysql_native_password</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_old_password/">mysql_old_password</a>.</p>
<h3 class="anchored_heading" id="create-useridentified-viawith-authentication_plugin">IDENTIFIED {VIA|WITH} authentication_plugin</h3>
<p>The optional <code>IDENTIFIED VIA authentication_plugin</code> allows you to specify that the account should be authenticated by a specific <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugin</a>. The plugin name must be an active authentication plugin as per <a style="color: #150281;" href="https://mariadb.com/kb/en/show-plugins/">SHOW PLUGINS</a>. If it doesn't show up in that output, then you will need to install it with <a style="color: #150281;" href="https://mariadb.com/kb/en/install-plugin/">INSTALL PLUGIN</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/install-soname/">INSTALL SONAME</a>.</p>
<p>For example, this could be used with the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/">PAM authentication plugin</a>:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">pam</span><span class="p">;</span>
</pre><p>Some authentication plugins allow additional arguments to be specified after a <code>USING</code> or <code>AS</code> keyword. For example, the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/">PAM authentication plugin</a> accepts a <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/#configuring-the-pam-service">service name</a>:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">pam</span> <span class="k">USING</span> <span class="s1">'mariadb'</span><span class="p">;</span>
</pre><p>The exact meaning of the additional argument would depend on the specific authentication plugin.</p>
<div class="mariadb_from_10_4_0 mariadb from_10_4_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1040-release-notes/">10.4.0</a></h5><p>The <code>USING</code> or <code>AS</code> keyword can also be used to provide a plain-text password to a plugin if it's provided as an argument to the <a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD()</a> function. This is only valid for <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugins</a> that have implemented a hook for the <a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD()</a> function. For example, the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-ed25519/">ed25519</a> authentication plugin supports this:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="n">safe</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">ed25519</span> <span class="k">USING</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">'secret'</span><span class="p">);</span>
</pre></div><div class="mariadb_from_10_4_3 mariadb from_10_4_3 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1043-release-notes/">10.4.3</a></h5><p>One can specify many authentication plugins, they all work as alternatives ways of authenticating a user:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="n">safe</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">ed25519</span> <span class="k">USING</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">'secret'</span><span class="p">)</span> <span class="k">OR</span> <span class="n">unix_socket</span><span class="p">;</span>
</pre></div><p>By default, when you create a user without specifying an authentication plugin, MariaDB uses the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_native_password/">mysql_native_password</a> plugin.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-usertls-options">TLS Options</h2>
<p>By default, MariaDB transmits data between the server and clients without encrypting it. This is generally acceptable when the server and client run on the same host or in networks where security is guaranteed through other means. However, in cases where the server and client exist on separate networks or they are in a high-risk network, the lack of encryption does introduce security concerns as a malicious actor could potentially eavesdrop on the traffic as it is sent over the network between them.</p>
<p>To mitigate this concern, MariaDB allows you to encrypt data in transit between the server and clients using the Transport Layer Security (TLS) protocol. TLS was formerly known as Secure Socket Layer (SSL), but strictly speaking the SSL protocol is a predecessor to TLS and, that version of the protocol is now considered insecure. The documentation still uses the term SSL often and for compatibility reasons TLS-related server system and status variables still use the prefix ssl_, but internally, MariaDB only supports its secure successors.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/secure-connections-overview/">Secure Connections Overview</a> for more information about how to determine whether your MariaDB server has TLS support.</p>
<p>You can set certain TLS-related restrictions for specific user accounts. For instance, you might use this with user accounts that require access to sensitive data while sending it across networks that you do not control. These restrictions can be enabled for a user account with the <a href="#create-user">CREATE USER</a>, <a href="#alter-user">ALTER USER</a>, or <a href="#grant">GRANT</a> statements. The following options are available:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Option</th><th>Description</th></tr>
<tr><td><code>REQUIRE NONE</code></td><td>TLS is not required for this account, but can still be used.</td></tr>
<tr><td><code>REQUIRE SSL</code></td><td>The account must use TLS, but no valid X509 certificate is required. This option cannot be combined with other TLS options.</td></tr>
<tr><td><code>REQUIRE X509</code></td><td>The account must use TLS and must have a valid X509 certificate. This option implies <code>REQUIRE SSL</code>. This option cannot be combined with other TLS options.</td></tr>
<tr><td><code>REQUIRE ISSUER 'issuer'</code></td><td>The account must use TLS and must have a valid X509 certificate. Also, the Certificate Authority must be the one specified via the string <code>issuer</code>. This option implies <code>REQUIRE X509</code>. This option can be combined with the <code>SUBJECT</code>, and <code>CIPHER</code> options in any order.</td></tr>
<tr><td><code>REQUIRE SUBJECT 'subject'</code></td><td>The account must use TLS and must have a valid X509 certificate. Also, the certificate's Subject must be the one specified via the string <code>subject</code>. This option implies <code>REQUIRE X509</code>. This option can be combined with the <code>ISSUER</code>, and <code>CIPHER</code> options in any order.</td></tr>
<tr><td><code>REQUIRE CIPHER 'cipher'</code></td><td>The account must use TLS, but no valid X509 certificate is required. Also, the encryption used for the connection must use a specific cipher method specified in the string <code>cipher</code>. This option implies <code>REQUIRE SSL</code>. This option can be combined with the <code>ISSUER</code>, and <code>SUBJECT</code> options in any order.</td></tr>
</tbody></table>
</div><p>The <code>REQUIRE</code> keyword must be used only once for all specified options, and the <code>AND</code> keyword can be used to separate individual options, but it is not required.</p>
<p>For example, you can create a user account that requires these TLS options with the following:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'alice'</span><span class="o">@</span><span class="s1">'%'</span>
    <span class="n">REQUIRE</span> <span class="n">SUBJECT</span> <span class="s1">'/CN=alice/O=My Dom, Inc./C=US/ST=Oregon/L=Portland'</span>
    <span class="k">AND</span> <span class="n">ISSUER</span> <span class="s1">'/C=FI/ST=Somewhere/L=City/ O=Some Company/CN=Peter Parker/emailAddress=p.parker@marvel.com'</span>
    <span class="k">AND</span> <span class="n">CIPHER</span> <span class="s1">'SHA-DES-CBC3-EDH-RSA'</span><span class="p">;</span>
</pre><p>If any of these options are set for a specific user account, then any client who tries to connect with that user account will have to be configured to connect with TLS.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/securing-connections-for-client-and-server/">Securing Connections for Client and Server</a> for information on how to enable TLS on the client and server.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-userresource-limit-options">Resource Limit Options</h2>
<div class="mariadb_from_10_2_0 mariadb from_10_2_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1020-release-notes/">10.2.0</a></h5><p><a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1020-release-notes/">MariaDB 10.2.0</a> introduced a number of resource limit options.</p>
</div><p>It is possible to set per-account limits for certain server resources. The following table shows the values that can be set per account:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Limit Type</th><th>Decription</th></tr>
<tr><td><code>MAX_QUERIES_PER_HOUR</code></td><td>Number of statements that the account can issue per hour (including updates)</td></tr>
<tr><td><code>MAX_UPDATES_PER_HOUR</code></td><td>Number of updates (not queries) that the account can issue per hour</td></tr>
<tr><td><code>MAX_CONNECTIONS_PER_HOUR</code></td><td>Number of connections that the account can start per hour</td></tr>
<tr><td><code>MAX_USER_CONNECTIONS</code></td><td>Number of simultaneous connections that can be accepted from the same account; if it is 0, <code>max_connections</code> will be used instead; if <code>max_connections</code> is 0, there is no limit for this account's simultaneous connections.</td></tr>
<tr><td><code>MAX_STATEMENT_TIME</code></td><td>Timeout, in seconds, for statements executed by the user. See also <a style="color: #150281;" href="https://mariadb.com/kb/en/aborting-statements/">Aborting Statements that Exceed a Certain Time to Execute</a>.</td></tr>
</tbody></table>
</div><p>If any of these limits are set to <code>0</code>, then there is no limit for that resource for that user.</p>
<p>Here is an example showing how to create a user with resource limits:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'someone'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">WITH</span>
    <span class="n">MAX_USER_CONNECTIONS</span> <span class="mi">10</span>
    <span class="n">MAX_QUERIES_PER_HOUR</span> <span class="mi">200</span><span class="p">;</span>
</pre><p>The resources are tracked per account, which means <code>'user'@'server'</code>; not per user name or per connection.</p>
<p>The count can be reset for all users using <a style="color: #150281;" href="https://mariadb.com/kb/en/flush/">FLUSH USER_RESOURCES</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/flush/">FLUSH PRIVILEGES</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqladmin/">mysqladmin reload</a>.</p>
<p>Per account resource limits are stored in the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">user</a> table, in the <a style="color: #150281;" href="https://mariadb.com/kb/en/the-mysql-database-tables/">mysql</a> database. Columns used for resources limits are named <code>max_questions</code>, <code>max_updates</code>, <code>max_connections</code> (for <code>MAX_CONNECTIONS_PER_HOUR</code>), and <code>max_user_connections</code> (for <code>MAX_USER_CONNECTIONS</code>).</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-useraccount-names">Account Names</h2>
<p>Account names have both a user name component and a host name component, and are specified as <code>'user_name'@'host_name'</code>.</p>
<p>The user name and host name may be unquoted, quoted as strings using double quotes (<code>"</code>) or
single quotes (<code>'</code>), or quoted as identifiers using backticks (<code>`</code>). You must use quotes
when using special characters (such as a hyphen) or wildcard characters. If you quote, you 
must quote the user name and host name separately (for example <code>'user_name'@'host_name'</code>).</p>
<h3 class="anchored_heading" id="create-userhost-name-component">Host Name Component</h3>
<p>If the host name is not provided, it is assumed to be <code>'%'</code>.</p>
<p>Host names may contain the wildcard characters <code>%</code> and <code>_</code>. They are matched as if by
the <a style="color: #150281;" href="https://mariadb.com/kb/en/like/">LIKE</a> clause. If you need to use a wildcard character literally (for example, to
match a domain name with an underscore), prefix the character with a backslash. See <code>LIKE</code>
for more information on escaping wildcard characters.</p>
<p>Host name matches are case-insensitive. Host names can match either domain names or IP
addresses. Use <code>'localhost'</code> as the host name to allow only local client connections.</p>
<p>You can use a netmask to match a range of IP addresses using <code>'base_ip/netmask'</code> as the
host name. A user with an IP address <em>ip_addr</em> will be allowed to connect if the following
condition is true:</p>
<pre class="fixed">ip_addr &amp; netmask = base_ip
</pre><p>For example, given a user:</p>
<pre class="fixed">CREATE USER 'maria'@'247.150.130.0/255.255.255.0';
</pre><p>the IP addresses satisfying this condition range from 247.150.130.0 to 247.150.130.255. </p>
<p>Using <code>255.255.255.255</code> is equivalent to not using a netmask at all. Netmasks cannot be used for IPv6 addresses. </p>
<p>Note that the credentials added when creating a user with the <code>'%'</code> wildcard host will not grant access in all cases. For example, some systems come with an anonymous localhost user, and when connecting from localhost this will take precedence.</p>
<p>Before <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-106/">MariaDB 10.6</a>, the host name component could be up to 60 characters in length. Starting from <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-106/">MariaDB 10.6</a>, it can be up to 255 characters.</p>
<h3 class="anchored_heading" id="create-useruser-name-component">User Name Component</h3>
<p>User names must match exactly, including case. A user name that is empty is known as an anonymous account and is allowed to match a login attempt with any user name component. These are described more in the next section.</p>
<p>For valid identifiers to use as user names, see <a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-names/">Identifier Names</a>.</p>
<p>It is possible for more than one account to match when a user connects. MariaDB selects
the first matching account after sorting according to the following criteria:</p>
<ul start="1"><li>Accounts with an exact host name are sorted before accounts using a wildcard in the
host name. Host names using a netmask are considered to be exact for sorting.
</li><li>Accounts with a wildcard in the host name are sorted according to the position of
the first wildcard character. Those with a wildcard character later in the host name
sort before those with a wildcard character earlier in the host name.
</li><li>Accounts with a non-empty user name sort before accounts with an empty user name.
</li><li>Accounts with an empty user name are sorted last. As mentioned previously, these are known as anonymous accounts. These are described more in the next section.
</li></ul>
<p>The following table shows a list of example account as sorted by these criteria:</p>
<pre class="fixed">+---------+-------------+
| User    | Host        |
+---------+-------------+
| joffrey | 192.168.0.3 |
|         | 192.168.0.% |
| joffrey | 192.168.%   |
|         | 192.168.%   |
+---------+-------------+
</pre><p>Once connected, you only have the privileges granted to the account that matched,
not all accounts that could have matched. For example, consider the following
commands:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'joffrey'</span><span class="o">@</span><span class="s1">'192.168.0.3'</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'joffrey'</span><span class="o">@</span><span class="s1">'%'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">SELECT</span> <span class="k">ON</span> <span class="n">test</span><span class="p">.</span><span class="n">t1</span> <span class="k">to</span> <span class="s1">'joffrey'</span><span class="o">@</span><span class="s1">'192.168.0.3'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">SELECT</span> <span class="k">ON</span> <span class="n">test</span><span class="p">.</span><span class="n">t2</span> <span class="k">to</span> <span class="s1">'joffrey'</span><span class="o">@</span><span class="s1">'%'</span><span class="p">;</span>
</pre><p>If you connect as joffrey from <code class="fixed" style="white-space:pre-wrap">192.168.0.3</code>, you will have the <code>SELECT</code>
privilege on the table <code>test.t1</code>, but not on the table <code>test.t2</code>. If you connect as joffrey from any other IP address, you will have the <code>SELECT</code> privilege on the table <code>test.t2</code>, but not
on the table <code>test.t1</code>.</p>
<p>Usernames can be up to 80 characters long before 10.6 and starting from 10.6 it can be 128 characters long.</p>
<h3 class="anchored_heading" id="create-useranonymous-accounts">Anonymous Accounts</h3>
<p>Anonymous accounts are accounts where the user name portion of the account name is empty. These accounts act as special catch-all accounts. If a user attempts to log into the system from a host, and an anonymous account exists with a host name portion that matches the user's host, then the user will log in as the anonymous account if there is no more specific account match for the user name that the user entered.</p>
<p>For example, here are some anonymous accounts:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">''</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">''</span><span class="o">@</span><span class="s1">'192.168.0.3'</span><span class="p">;</span>
</pre><h4 class="anchored_heading" id="create-userfixing-a-legacy-default-anonymous-account">Fixing a Legacy Default Anonymous Account</h4>
<p>On some systems, the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqldb-table/">mysql.db</a> table has some entries for the <code>''@'%'</code> anonymous account by default. Unfortunately, there is no matching entry in the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a>/<a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlglobal_priv-table/">mysql.global_priv_table</a> table, which means that this anonymous account doesn't exactly exist, but it does have privileges--usually on the default <code>test</code> database created by <a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_install_db/">mysql_install_db</a>. These account-less privileges are a legacy that is leftover from a time when MySQL's privilege system was less advanced.</p>
<p>This situation means that you will run into errors if you try to create a <code>''@'%'</code> account. For example:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">''</span><span class="o">@</span><span class="s1">'%'</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">1396</span> <span class="p">(</span><span class="n">HY000</span><span class="p">):</span> <span class="k">Operation</span> <span class="k">CREATE</span> <span class="k">USER</span> <span class="n">failed</span> <span class="k">for</span> <span class="s1">''</span><span class="o">@</span><span class="s1">'%'</span>
</pre><p>The fix is to <a href="#delete">DELETE</a> the row in the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqldb-table/">mysql.db</a> table and then execute <a style="color: #150281;" href="https://mariadb.com/kb/en/flush/">FLUSH PRIVILEGES</a>:</p>
<pre class="fixed"><span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">mysql</span><span class="p">.</span><span class="n">db</span> <span class="k">WHERE</span> <span class="k">User</span><span class="o">=</span><span class="s1">''</span> <span class="k">AND</span> <span class="k">Host</span><span class="o">=</span><span class="s1">'%'</span><span class="p">;</span>
<span class="n">FLUSH</span> <span class="k">PRIVILEGES</span><span class="p">;</span>
</pre><p>And then the account can be created:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">''</span><span class="o">@</span><span class="s1">'%'</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="k">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span> <span class="n">sec</span><span class="p">)</span>
</pre><p>See <a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-13486">MDEV-13486</a> for more information.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-userpassword-expiry">Password Expiry</h2>
<div class="mariadb_from_10_4_3 mariadb from_10_4_3 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1043-release-notes/">10.4.3</a></h5><p>Besides automatic password expiry, as determined by <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#default_password_lifetime">default_password_lifetime</a>, password expiry times can be set on an individual user basis, overriding the global setting, for example:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'monty'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">PASSWORD</span> <span class="n">EXPIRE</span> <span class="nb">INTERVAL</span> <span class="mi">120</span> <span class="k">DAY</span><span class="p">;</span>
</pre><p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/user-password-expiry/">User Password Expiry</a> for more details.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="create-useraccount-locking">Account Locking</h2>
<div class="mariadb_from_10_4_2 mariadb from_10_4_2 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1042-release-notes/">10.4.2</a></h5><p>Account locking permits privileged administrators to lock/unlock user accounts. No new client connections will be permitted if an account is locked (existing connections are not affected). For example:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'marijn'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">ACCOUNT</span> <span class="k">LOCK</span><span class="p">;</span>
</pre><p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/account-locking/">Account Locking</a> for more details.</p>
</div><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1047-release-notes/">MariaDB 10.4.7</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1058-release-notes/">MariaDB 10.5.8</a>, the <em>lock_option</em> and <em>password_option</em> clauses can occur in either order.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-usersee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/troubleshooting-connection-issues/">Troubleshooting Connection Issues</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-from-mariadb-104/">Authentication from MariaDB 10.4</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-names/">Identifier Names</a>
</li><li><a href="#grant">GRANT</a>
</li><li><a href="#alter-user">ALTER USER</a>
</li><li><a href="#drop-user">DROP USER</a>
</li><li><a href="#set-password">SET PASSWORD</a>
</li><li><a href="#show-create-user">SHOW CREATE USER</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user table</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlglobal_priv-table/">mysql.global_priv_table</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/password-validation-plugins/">Password Validation Plugins</a> - permits the setting of basic criteria for passwords
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">Authentication Plugins</a> - allow various authentication methods to be used, and new ones to be developed.</li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section>
<div style = "display:block; clear:both; page-break-after:always;"></div>
<section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="alter-user">1.1.1.2 ALTER USER</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="mariadb_from_10_2_0 mariadb from_10_2_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1020-release-notes/">10.2.0</a></h5><p>The ALTER USER statement was introduced in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1020-release-notes/">MariaDB 10.2.0</a>.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-usersyntax">Syntax</h2>
<pre class="fixed">ALTER USER [IF EXISTS] 
 <em>user_specification</em> [,<em>user_specification</em>] ...
  [REQUIRE {NONE | <em>tls_option</em> [[AND] <em>tls_option</em>] ...}]
  [WITH <em>resource_option</em> [<em>resource_option</em>] ...]
  [<em>lock_option</em>] [<em>password_option</em>] 

<em>user_specification</em>:
  username [<em>authentication_option</em>]

<em>authentication_option</em>:
  IDENTIFIED BY 'password' 
  | IDENTIFIED BY PASSWORD 'password_hash'
  | IDENTIFIED {VIA|WITH} <em>authentication_rule</em> [OR <em>authentication_rule</em>] ... 
 
<em>authentication_rule</em>:
  authentication_plugin
  | authentication_plugin {USING|AS} 'authentication_string'
  | authentication_plugin {USING|AS} PASSWORD('password')

<em>tls_option</em>
  SSL 
  | X509
  | CIPHER 'cipher'
  | ISSUER 'issuer'
  | SUBJECT 'subject'

<em>resource_option</em>
  MAX_QUERIES_PER_HOUR count
  | MAX_UPDATES_PER_HOUR count
  | MAX_CONNECTIONS_PER_HOUR count
  | MAX_USER_CONNECTIONS count
  | MAX_STATEMENT_TIME time

<em>password_option</em>:
  PASSWORD EXPIRE
  | PASSWORD EXPIRE DEFAULT
  | PASSWORD EXPIRE NEVER
  | PASSWORD EXPIRE INTERVAL N DAY

<em>lock_option</em>:
    ACCOUNT LOCK
  | ACCOUNT UNLOCK
}
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class="mariadb_from_10_2_0"><a href="#alter-usersyntax" title="Syntax">Syntax</a></li>

    <li class="mariadb_from_10_2_0"><a href="#alter-userdescription" title="Description">Description</a></li>

    <li class="mariadb_from_10_2_0"><a href="#alter-userif-exists" title="IF EXISTS">IF EXISTS</a></li>

    <li class="mariadb_from_10_2_0"><a href="#alter-useraccount-names" title="Account Names">Account Names</a></li>

    <li class="mariadb_from_10_2_0"><a href="#alter-userauthentication-options" title="Authentication Options">Authentication Options</a>    <ol class="toc">

        <li class="mariadb_from_10_2_0"><a href="#alter-useridentified-by-password" title="IDENTIFIED BY 'password'">IDENTIFIED BY 'password'</a></li>

        <li class="mariadb_from_10_2_0"><a href="#alter-useridentified-by-password-password_hash" title="IDENTIFIED BY PASSWORD 'password_hash'">IDENTIFIED BY PASSWORD 'password_hash'</a></li>

        <li class="mariadb_from_10_2_0"><a href="#alter-useridentified-viawith-authentication_plugin" title="IDENTIFIED {VIA|WITH} authentication_plugin">IDENTIFIED {VIA|WITH} authentication_plugin</a>    </li></ol>
</li>

    <li class="mariadb_from_10_2_0"><a href="#alter-usertls-options" title="TLS Options">TLS Options</a></li>

    <li class="mariadb_from_10_2_0"><a href="#alter-userresource-limit-options" title="Resource Limit Options">Resource Limit Options</a></li>

    <li class="mariadb_from_10_2_0"><a href="#alter-userpassword-expiry" title="Password Expiry">Password Expiry</a></li>

    <li class="mariadb_from_10_2_0"><a href="#alter-useraccount-locking" title="Account Locking">Account Locking</a></li>

    <li class="mariadb_from_10_2_0"><a href="#alter-usersee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-userdescription">Description</h2>
<p>The <code>ALTER USER</code> statement modifies existing MariaDB accounts. To use it, you must have the global <a href="#grantglobal-privileges">CREATE USER</a> privilege or the <a href="#granttable-privileges">UPDATE</a> privilege for the <a style="color: #150281;" href="https://mariadb.com/kb/en/the-mysql-database-tables/">mysql</a> database. The global <a href="#grantglobal-privileges">SUPER</a> privilege is also required if the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#read_only">read_only</a> system variable is enabled.</p>
<p>If any of the specified user accounts do not yet exist, an error results. If an error occurs, <code>ALTER USER</code> will still modify the accounts that do not result in an error. Only one error is produced for all users which have not been modified.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-userif-exists">IF EXISTS</h2>
<p>When the <code>IF EXISTS</code> clause is used, MariaDB will return a warning instead of an error for each specified user that does not exist.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-useraccount-names">Account Names</h2>
<p>For <code>ALTER USER</code> statements, account names are specified as the <code>username</code> argument in the same way as they are for <a href="#create-user">CREATE USER</a> statements. See <a href="#create-useraccount-names">account names</a> from the <code>CREATE USER</code> page for details on how account names are specified.</p>
<p><a style="color: #150281;" href="https://mariadb.com/kb/en/current_user/">CURRENT_USER</a> or <code>CURRENT_USER()</code> can also be used to alter the account logged into the current session. For example, to change the current user's password to <code>mariadb</code>:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">USER</span> <span class="k">CURRENT_USER</span><span class="p">()</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'mariadb'</span><span class="p">;</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-userauthentication-options">Authentication Options</h2>
<div class="mariadb_from_10_4 mariadb from_10_4 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-104/">10.4</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-104/">MariaDB 10.4</a>, it is possible to use more than one authentication plugin for each user account. For example, this can be useful to slowly migrate users to the more secure ed25519 authentication plugin over time, while allowing the old mysql_native_password authentication plugin as an alternative for the transitional period. See <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-from-mariadb-104/">Authentication from MariaDB 10.4</a> for more.</p>
<p>When running <code>ALTER USER</code>, not specifying an authentication option in the IDENTIFIED VIA clause will remove that authentication method. (However this was not the case before <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10413-release-notes/">MariaDB 10.4.13</a>, see <a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-21928">MDEV-21928</a>)</p>
<p>For example, a user is created with the ability to authenticate via both a password and unix_socket:</p>
<pre class="fixed">CREATE USER 'bob'@'localhost' 
  IDENTIFIED VIA mysql_native_password USING PASSWORD('pwd') 
  OR unix_socket;

SHOW CREATE USER 'bob'@'localhost'\G
*************************** 1. row ***************************
CREATE USER for bob@localhost: CREATE USER `bob`@`localhost` 
  IDENTIFIED VIA mysql_native_password 
  USING '*975B2CD4FF9AE554FE8AD33168FBFC326D2021DD' 
  OR unix_socket
</pre><p>If the user's password is updated, but unix_socket authentication is not specified in the <code>IDENTIFIED VIA</code> clause, unix_socket authentication will no longer be permitted.</p>
<pre class="fixed">ALTER USER 'bob'@'localhost' IDENTIFIED VIA mysql_native_password 
  USING PASSWORD('pwd2');

SHOW CREATE USER 'bob'@'localhost'\G
*************************** 1. row ***************************
CREATE USER for bob@localhost: CREATE USER `bob`@`localhost` 
  IDENTIFIED BY PASSWORD '*38366FDA01695B6A5A9DD4E428D9FB8F7EB75512'
</pre></div><h3 class="anchored_heading" id="alter-useridentified-by-password">IDENTIFIED BY 'password'</h3>
<p>The optional <code>IDENTIFIED BY</code> clause can be used to provide an account with a password. The password should be specified in plain text. It will be hashed by the <a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD</a> function prior to being stored to the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a> table.</p>
<p>For example, if our password is <code>mariadb</code>, then we can set the account's password with:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">USER</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'mariadb'</span><span class="p">;</span>
</pre><p>If you do not specify a password with the <code>IDENTIFIED BY</code> clause, the user
will be able to connect without a password. A blank password is not a wildcard
to match any password. The user must connect without providing a password if no
password is set.</p>
<p>The only <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugins</a> that this clause supports are <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_native_password/">mysql_native_password</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_old_password/">mysql_old_password</a>.</p>
<h3 class="anchored_heading" id="alter-useridentified-by-password-password_hash">IDENTIFIED BY PASSWORD 'password_hash'</h3>
<p>The optional <code>IDENTIFIED BY PASSWORD</code> clause can be used to provide an account with a password that has already been hashed. The password should be specified as a hash that was provided by the <a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD</a>#function. It will be stored to the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a> table as-is.</p>
<p>For example, if our password is <code>mariadb</code>, then we can find the hash with:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">'mariadb'</span><span class="p">);</span>
<span class="o">+</span><span class="c1">-------------------------------------------+</span>
<span class="o">|</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">'mariadb'</span><span class="p">)</span>                       <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------------------------------------+</span>
<span class="o">|</span> <span class="o">*</span><span class="mi">54958</span><span class="n">E764CE10E50764C2EECBB71D01F08549980</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------------------------------------+</span>
</pre><p>And then we can set an account's password with the hash:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">USER</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> 
  <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="n">PASSWORD</span> <span class="s1">'*54958E764CE10E50764C2EECBB71D01F08549980'</span><span class="p">;</span>
</pre><p>If you do not specify a password with the <code>IDENTIFIED BY</code> clause, the user
will be able to connect without a password. A blank password is not a wildcard
to match any password. The user must connect without providing a password if no
password is set.</p>
<p>The only <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugins</a> that this clause supports are <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_native_password/">mysql_native_password</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_old_password/">mysql_old_password</a>.</p>
<h3 class="anchored_heading" id="alter-useridentified-viawith-authentication_plugin">IDENTIFIED {VIA|WITH} authentication_plugin</h3>
<p>The optional <code>IDENTIFIED VIA authentication_plugin</code> allows you to specify that the account should be authenticated by a specific <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugin</a>. The plugin name must be an active authentication plugin as per <a style="color: #150281;" href="https://mariadb.com/kb/en/show-plugins/">SHOW PLUGINS</a>. If it doesn't show up in that output, then you will need to install it with <a style="color: #150281;" href="https://mariadb.com/kb/en/install-plugin/">INSTALL PLUGIN</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/install-soname/">INSTALL SONAME</a>.</p>
<p>For example, this could be used with the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/">PAM authentication plugin</a>:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">USER</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">pam</span><span class="p">;</span>
</pre><p>Some authentication plugins allow additional arguments to be specified after a <code>USING</code> or <code>AS</code> keyword. For example, the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/">PAM authentication plugin</a> accepts a <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/#configuring-the-pam-service">service name</a>:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">USER</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">pam</span> <span class="k">USING</span> <span class="s1">'mariadb'</span><span class="p">;</span>
</pre><p>The exact meaning of the additional argument would depend on the specific authentication plugin.</p>
<p>In <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-104/">MariaDB 10.4</a> and later, the <code>USING</code> or <code>AS</code> keyword can also be used to provide a plain-text password to a plugin if it's provided as an argument to the <a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD()</a> function. This is only valid for <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugins</a> that have implemented a hook for the <a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD()</a> function. For example, the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-ed25519/">ed25519</a> authentication plugin supports this:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">USER</span> <span class="n">safe</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">ed25519</span> <span class="k">USING</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">'secret'</span><span class="p">);</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-usertls-options">TLS Options</h2>
<p>By default, MariaDB transmits data between the server and clients without encrypting it. This is generally acceptable when the server and client run on the same host or in networks where security is guaranteed through other means. However, in cases where the server and client exist on separate networks or they are in a high-risk network, the lack of encryption does introduce security concerns as a malicious actor could potentially eavesdrop on the traffic as it is sent over the network between them.</p>
<p>To mitigate this concern, MariaDB allows you to encrypt data in transit between the server and clients using the Transport Layer Security (TLS) protocol. TLS was formerly known as Secure Socket Layer (SSL), but strictly speaking the SSL protocol is a predecessor to TLS and, that version of the protocol is now considered insecure. The documentation still uses the term SSL often and for compatibility reasons TLS-related server system and status variables still use the prefix ssl_, but internally, MariaDB only supports its secure successors.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/secure-connections-overview/">Secure Connections Overview</a> for more information about how to determine whether your MariaDB server has TLS support.</p>
<p>You can set certain TLS-related restrictions for specific user accounts. For instance, you might use this with user accounts that require access to sensitive data while sending it across networks that you do not control. These restrictions can be enabled for a user account with the <a href="#create-user">CREATE USER</a>, <a href="#alter-user">ALTER USER</a>, or <a href="#grant">GRANT</a> statements. The following options are available:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Option</th><th>Description</th></tr>
<tr><td><code>REQUIRE NONE</code></td><td>TLS is not required for this account, but can still be used.</td></tr>
<tr><td><code>REQUIRE SSL</code></td><td>The account must use TLS, but no valid X509 certificate is required. This option cannot be combined with other TLS options.</td></tr>
<tr><td><code>REQUIRE X509</code></td><td>The account must use TLS and must have a valid X509 certificate. This option implies <code>REQUIRE SSL</code>. This option cannot be combined with other TLS options.</td></tr>
<tr><td><code>REQUIRE ISSUER 'issuer'</code></td><td>The account must use TLS and must have a valid X509 certificate. Also, the Certificate Authority must be the one specified via the string <code>issuer</code>. This option implies <code>REQUIRE X509</code>. This option can be combined with the <code>SUBJECT</code>, and <code>CIPHER</code> options in any order.</td></tr>
<tr><td><code>REQUIRE SUBJECT 'subject'</code></td><td>The account must use TLS and must have a valid X509 certificate. Also, the certificate's Subject must be the one specified via the string <code>subject</code>. This option implies <code>REQUIRE X509</code>. This option can be combined with the <code>ISSUER</code>, and <code>CIPHER</code> options in any order.</td></tr>
<tr><td><code>REQUIRE CIPHER 'cipher'</code></td><td>The account must use TLS, but no valid X509 certificate is required. Also, the encryption used for the connection must use a specific cipher method specified in the string <code>cipher</code>. This option implies <code>REQUIRE SSL</code>. This option can be combined with the <code>ISSUER</code>, and <code>SUBJECT</code> options in any order.</td></tr>
</tbody></table>
</div><p>The <code>REQUIRE</code> keyword must be used only once for all specified options, and the <code>AND</code> keyword can be used to separate individual options, but it is not required.</p>
<p>For example, you can alter a user account to require these TLS options with the following:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">'alice'</span><span class="o">@</span><span class="s1">'%'</span>
    <span class="n">REQUIRE</span> <span class="n">SUBJECT</span> <span class="s1">'/CN=alice/O=My Dom, Inc./C=US/ST=Oregon/L=Portland'</span>
    <span class="k">AND</span> <span class="n">ISSUER</span> <span class="s1">'/C=FI/ST=Somewhere/L=City/ O=Some Company/CN=Peter Parker/emailAddress=p.parker@marvel.com'</span>
    <span class="k">AND</span> <span class="n">CIPHER</span> <span class="s1">'SHA-DES-CBC3-EDH-RSA'</span><span class="p">;</span>
</pre><p>If any of these options are set for a specific user account, then any client who tries to connect with that user account will have to be configured to connect with TLS.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/securing-connections-for-client-and-server/">Securing Connections for Client and Server</a> for information on how to enable TLS on the client and server.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-userresource-limit-options">Resource Limit Options</h2>
<div class="mariadb_from_10_2_0 mariadb from_10_2_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1020-release-notes/">10.2.0</a></h5><p><a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1020-release-notes/">MariaDB 10.2.0</a> introduced a number of resource limit options.</p>
</div><p>It is possible to set per-account limits for certain server resources. The following table shows the values that can be set per account:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Limit Type</th><th>Decription</th></tr>
<tr><td><code>MAX_QUERIES_PER_HOUR</code></td><td>Number of statements that the account can issue per hour (including updates)</td></tr>
<tr><td><code>MAX_UPDATES_PER_HOUR</code></td><td>Number of updates (not queries) that the account can issue per hour</td></tr>
<tr><td><code>MAX_CONNECTIONS_PER_HOUR</code></td><td>Number of connections that the account can start per hour</td></tr>
<tr><td><code>MAX_USER_CONNECTIONS</code></td><td>Number of simultaneous connections that can be accepted from the same account; if it is 0, <code>max_connections</code> will be used instead; if <code>max_connections</code> is 0, there is no limit for this account's simultaneous connections.</td></tr>
<tr><td><code>MAX_STATEMENT_TIME</code></td><td>Timeout, in seconds, for statements executed by the user. See also <a style="color: #150281;" href="https://mariadb.com/kb/en/aborting-statements/">Aborting Statements that Exceed a Certain Time to Execute</a>.</td></tr>
</tbody></table>
</div><p>If any of these limits are set to <code>0</code>, then there is no limit for that resource for that user.</p>
<p>Here is an example showing how to set an account's resource limits:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">'someone'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">WITH</span>
    <span class="n">MAX_USER_CONNECTIONS</span> <span class="mi">10</span>
    <span class="n">MAX_QUERIES_PER_HOUR</span> <span class="mi">200</span><span class="p">;</span>
</pre><p>The resources are tracked per account, which means <code>'user'@'server'</code>; not per user name or per connection.</p>
<p>The count can be reset for all users using <a style="color: #150281;" href="https://mariadb.com/kb/en/flush/">FLUSH USER_RESOURCES</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/flush/">FLUSH PRIVILEGES</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqladmin/">mysqladmin reload</a>.</p>
<p>Per account resource limits are stored in the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">user</a> table, in the <a style="color: #150281;" href="https://mariadb.com/kb/en/the-mysql-database-tables/">mysql</a> database. Columns used for resources limits are named <code>max_questions</code>, <code>max_updates</code>, <code>max_connections</code> (for <code>MAX_CONNECTIONS_PER_HOUR</code>), and <code>max_user_connections</code> (for <code>MAX_USER_CONNECTIONS</code>).</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-userpassword-expiry">Password Expiry</h2>
<div class="mariadb_from_10_4_3 mariadb from_10_4_3 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1043-release-notes/">10.4.3</a></h5><p>Besides automatic password expiry, as determined by <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#default_password_lifetime">default_password_lifetime</a>, password expiry times can be set on an individual user basis, overriding the global setting, for example:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">'monty'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">PASSWORD</span> <span class="n">EXPIRE</span> <span class="nb">INTERVAL</span> <span class="mi">120</span> <span class="k">DAY</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">'monty'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">PASSWORD</span> <span class="n">EXPIRE</span> <span class="n">NEVER</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">'monty'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">PASSWORD</span> <span class="n">EXPIRE</span> <span class="k">DEFAULT</span><span class="p">;</span>
</pre><p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/user-password-expiry/">User Password Expiry</a> for more details.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-useraccount-locking">Account Locking</h2>
<div class="mariadb_from_10_4_2 mariadb from_10_4_2 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1042-release-notes/">10.4.2</a></h5><p>Account locking permits privileged administrators to lock/unlock user accounts. No new client connections will be permitted if an account is locked (existing connections are not affected). For example:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">'marijn'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">ACCOUNT</span> <span class="k">LOCK</span><span class="p">;</span>
</pre><p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/account-locking/">Account Locking</a> for more details.</p>
</div><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1047-release-notes/">MariaDB 10.4.7</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1058-release-notes/">MariaDB 10.5.8</a>, the <em>lock_option</em> and <em>password_option</em> clauses can occur in either order.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-usersee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-from-mariadb-104/">Authentication from MariaDB 10.4</a>
</li><li><a href="#grant">GRANT</a>
</li><li><a href="#create-user">CREATE USER</a>
</li><li><a href="#drop-user">DROP USER</a>
</li><li><a href="#set-password">SET PASSWORD</a>
</li><li><a href="#show-create-user">SHOW CREATE USER</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user table</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/password-validation-plugins/">Password Validation Plugins</a> - permits the setting of basic criteria for passwords
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">Authentication Plugins</a> - allow various authentication methods to be used, and new ones to be developed.</li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="drop-user">1.1.1.3 DROP USER</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="drop-usersyntax">Syntax</h2>
<pre class="fixed">DROP USER [IF EXISTS] user_name [, user_name] ...
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#drop-usersyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#drop-userdescription" title="Description">Description</a>    <ol class="toc">

        <li class=""><a href="#drop-userif-exists" title="IF EXISTS">IF EXISTS</a>    </li></ol>
</li>

    <li class=""><a href="#drop-userexamples" title="Examples">Examples</a></li>

    <li class=""><a href="#drop-usersee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="drop-userdescription">Description</h2>
<p>The <code>DROP USER</code> statement removes one or more MariaDB accounts. It removes
privilege rows for the account from all grant tables. To use this statement,
you must have the global <a href="#grantcreate-user">CREATE USER</a> privilege
or the <a href="#granttable-privileges">DELETE</a> privilege for the mysql database.
Each account is named using the same format as for the <code>CREATE USER</code>
statement; for example, <code class="fixed" style="white-space:pre-wrap">'jeffrey'@'localhost'</code>.  If you specify
only the user name part of the account name, a host name part of <code>'%'</code> is
used. For additional information about specifying account names, see
<a href="#create-user">CREATE USER</a>.</p>
<p>Note that, if you specify an account that is currently connected, it will not
be deleted until the connection is closed. The connection will not be
automatically closed.</p>
<p>If any of the specified user accounts do not exist, <code>ERROR 1396 (HY000)</code>
results. If an error occurs, <code>DROP USER</code> will still drop the accounts that do
not result in an error. Only one error is produced for all users which have not
been dropped:</p>
<pre class="fixed">ERROR 1396 (HY000): Operation DROP USER failed for 'u1'@'%','u2'@'%'
</pre><p>Failed <code>CREATE</code> or <code>DROP</code> operations, for both users and roles, produce the
same error code.</p>
<h4 class="anchored_heading" id="drop-userif-exists">IF EXISTS</h4>
<p>If the <code>IF EXISTS</code> clause is used, MariaDB will return a note instead of an error if the user does not exist.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="drop-userexamples">Examples</h2>
<pre class="fixed"><span class="k">DROP</span> <span class="k">USER</span> <span class="n">bob</span><span class="p">;</span>
</pre><p><code>IF EXISTS</code>:</p>
<pre class="fixed"><span class="k">DROP</span> <span class="k">USER</span> <span class="n">bob</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">1396</span> <span class="p">(</span><span class="n">HY000</span><span class="p">):</span> <span class="k">Operation</span> <span class="k">DROP</span> <span class="k">USER</span> <span class="n">failed</span> <span class="k">for</span> <span class="s1">'bob'</span><span class="o">@</span><span class="s1">'%'</span>

<span class="k">DROP</span> <span class="k">USER</span> <span class="k">IF</span> <span class="k">EXISTS</span> <span class="n">bob</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="k">rows</span> <span class="n">affected</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>

<span class="k">SHOW</span> <span class="n">WARNINGS</span><span class="p">;</span>
<span class="o">+</span><span class="c1">-------+------+---------------------------------------------+</span>
<span class="o">|</span> <span class="k">Level</span> <span class="o">|</span> <span class="n">Code</span> <span class="o">|</span> <span class="n">Message</span>                                     <span class="o">|</span>
<span class="o">+</span><span class="c1">-------+------+---------------------------------------------+</span>
<span class="o">|</span> <span class="n">Note</span>  <span class="o">|</span> <span class="mi">1974</span> <span class="o">|</span> <span class="n">Can</span><span class="s1">'t drop user '</span><span class="n">bob</span><span class="s1">'@'</span><span class="o">%</span><span class="s1">'; it doesn'</span><span class="n">t</span> <span class="n">exist</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-------+------+---------------------------------------------+</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="drop-usersee-also">See Also</h2>
<ul start="1"><li><a href="#create-user">CREATE USER</a>
</li><li><a href="#alter-user">ALTER USER</a>
</li><li><a href="#grant">GRANT</a>
</li><li><a href="#show-create-user">SHOW CREATE USER</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user table</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section>
<div style = "display:block; clear:both; page-break-after:always;"></div>
<section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="grant">1.1.1.4 GRANT</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div style="float: none;" class="table_of_contents standalone">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#grantsyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#grantdescription" title="Description">Description</a></li>

    <li class=""><a href="#grantaccount-names" title="Account Names">Account Names</a></li>

    <li class=""><a href="#grantimplicit-account-creation" title="Implicit Account Creation">Implicit Account Creation</a></li>

    <li class=""><a href="#grantprivilege-levels" title="Privilege Levels">Privilege Levels</a>    <ol class="toc">

        <li class=""><a href="#grantthe-usage-privilege" title="The USAGE Privilege">The USAGE Privilege</a></li>

        <li class=""><a href="#grantthe-all-privileges-privilege" title="The ALL PRIVILEGES Privilege">The ALL PRIVILEGES Privilege</a></li>

        <li class=""><a href="#grantthe-grant-option-privilege" title="The GRANT OPTION Privilege">The GRANT OPTION Privilege</a></li>

        <li class=""><a href="#grantglobal-privileges" title="Global Privileges">Global Privileges</a>        <ol class="toc">

            <li class=""><a href="#grantbinlog-admin" title="BINLOG ADMIN">BINLOG ADMIN</a></li>

            <li class=""><a href="#grantbinlog-monitor" title="BINLOG MONITOR">BINLOG MONITOR</a></li>

            <li class=""><a href="#grantbinlog-replay" title="BINLOG REPLAY">BINLOG REPLAY</a></li>

            <li class=""><a href="#grantconnection-admin" title="CONNECTION ADMIN">CONNECTION ADMIN</a></li>

            <li class=""><a href="#grantcreate-user" title="CREATE USER">CREATE USER</a></li>

            <li class=""><a href="#grantfederated-admin" title="FEDERATED ADMIN">FEDERATED ADMIN</a></li>

            <li class=""><a href="#grantfile" title="FILE">FILE</a></li>

            <li class=""><a href="#grantgrant-option" title="GRANT OPTION">GRANT OPTION</a></li>

            <li class=""><a href="#grantprocess" title="PROCESS">PROCESS</a></li>

            <li class=""><a href="#grantread_only-admin" title="READ_ONLY ADMIN">READ_ONLY ADMIN</a></li>

            <li class=""><a href="#grantreload" title="RELOAD">RELOAD</a></li>

            <li class=""><a href="#grantreplication-client" title="REPLICATION CLIENT">REPLICATION CLIENT</a></li>

            <li class=""><a href="#grantreplication-master-admin" title="REPLICATION MASTER ADMIN">REPLICATION MASTER ADMIN</a></li>

            <li class=""><a href="#grantreplica-monitor" title="REPLICA MONITOR">REPLICA MONITOR</a></li>

            <li class=""><a href="#grantreplication-replica" title="REPLICATION REPLICA">REPLICATION REPLICA</a></li>

            <li class=""><a href="#grantreplication-slave" title="REPLICATION SLAVE">REPLICATION SLAVE</a></li>

            <li class=""><a href="#grantreplication-slave-admin" title="REPLICATION SLAVE ADMIN">REPLICATION SLAVE ADMIN</a></li>

            <li class=""><a href="#grantset-user" title="SET USER">SET USER</a></li>

            <li class=""><a href="#grantshow-databases" title="SHOW DATABASES">SHOW DATABASES</a></li>

            <li class=""><a href="#grantshutdown" title="SHUTDOWN">SHUTDOWN</a></li>

            <li class=""><a href="#grantsuper" title="SUPER">SUPER</a>        </li></ol>
</li>

        <li class=""><a href="#grantdatabase-privileges" title="Database Privileges">Database Privileges</a></li>

        <li class=""><a href="#granttable-privileges" title="Table Privileges">Table Privileges</a></li>

        <li class=""><a href="#grantcolumn-privileges" title="Column Privileges">Column Privileges</a></li>

        <li class=""><a href="#grantfunction-privileges" title="Function Privileges">Function Privileges</a></li>

        <li class=""><a href="#grantprocedure-privileges" title="Procedure Privileges">Procedure Privileges</a></li>

        <li class=""><a href="#grantproxy-privileges" title="Proxy Privileges">Proxy Privileges</a>    </li></ol>
</li>

    <li class=""><a href="#grantauthentication-options" title="Authentication Options">Authentication Options</a>    <ol class="toc">

        <li class=""><a href="#grantidentified-by-password" title="IDENTIFIED BY 'password'">IDENTIFIED BY 'password'</a></li>

        <li class=""><a href="#grantidentified-by-password-password_hash" title="IDENTIFIED BY PASSWORD 'password_hash'">IDENTIFIED BY PASSWORD 'password_hash'</a></li>

        <li class=""><a href="#grantidentified-viawith-authentication_plugin" title="IDENTIFIED {VIA|WITH} authentication_plugin">IDENTIFIED {VIA|WITH} authentication_plugin</a>    </li></ol>
</li>

    <li class=""><a href="#grantresource-limit-options" title="Resource Limit Options">Resource Limit Options</a></li>

    <li class=""><a href="#granttls-options" title="TLS Options">TLS Options</a></li>

    <li class=""><a href="#grantroles" title="Roles">Roles</a>    <ol class="toc">

        <li class=""><a href="#grantsyntax" title="Syntax">Syntax</a>    </li></ol>
</li>

    <li class=""><a href="#grantgrant-examples" title="Grant Examples">Grant Examples</a>    <ol class="toc">

        <li class=""><a href="#grantgranting-root-like-privileges" title="Granting Root-like Privileges">Granting Root-like Privileges</a>    </li></ol>
</li>

    <li class=""><a href="#grantsee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="grantsyntax">Syntax</h2>
<pre class="fixed">GRANT
    <em>priv_type</em> [(<em>column_list</em>)]
      [, <em>priv_type</em> [(<em>column_list</em>)]] ...
    ON [<em>object_type</em>] <em>priv_level</em>
    TO <em>user_specification</em> [ <em>user_options</em> ...]

<em>user_specification</em>:
  username [<em>authentication_option</em>]

<em>authentication_option</em>:
  IDENTIFIED BY 'password' 
  | IDENTIFIED BY PASSWORD 'password_hash'
  | IDENTIFIED {VIA|WITH} <em>authentication_rule</em> [OR <em>authentication_rule</em>  ...]

<em>authentication_rule</em>:
    authentication_plugin
  | authentication_plugin {USING|AS} 'authentication_string'
  | authentication_plugin {USING|AS} PASSWORD('password')

GRANT PROXY ON username
    TO user_specification [, user_specification ...]
    [WITH GRANT OPTION]

GRANT rolename TO grantee [, grantee ...]
    [WITH ADMIN OPTION]

<em>grantee</em>:
    rolename
    username [<em>authentication_option</em>]

<em>user_options</em>:
    [REQUIRE {NONE | <em>tls_option</em> [[AND] <em>tls_option</em>] ...}]
    [WITH <em>with_option</em> [<em>with_option</em>] ...]

<em>object_type</em>:
    TABLE
  | FUNCTION
  | PROCEDURE
  | PACKAGE

<em>priv_level</em>:
    *
  | *.*
  | db_name.*
  | db_name.tbl_name
  | tbl_name
  | db_name.routine_name

<em>with_option</em>:
    GRANT OPTION
  | <em>resource_option</em>

<em>resource_option</em>:
  MAX_QUERIES_PER_HOUR count
  | MAX_UPDATES_PER_HOUR count
  | MAX_CONNECTIONS_PER_HOUR count
  | MAX_USER_CONNECTIONS count
  | MAX_STATEMENT_TIME time

<em>tls_option</em>:
  SSL 
  | X509
  | CIPHER 'cipher'
  | ISSUER 'issuer'
  | SUBJECT 'subject'
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="grantdescription">Description</h2>
<p>The <code>GRANT</code> statement allows you to grant privileges or <a href="#grantroles">roles</a> to accounts. To use <code>GRANT</code>, you must have the <code>GRANT OPTION</code> privilege, and you must have the privileges that you are granting.</p>
<p>Use the <a href="#revoke">REVOKE</a> statement to revoke privileges granted with the <code>GRANT</code> statement.</p>
<p>Use the <a href="#show-grants">SHOW GRANTS</a> statement to determine what privileges an account has.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="grantaccount-names">Account Names</h2>
<p>For <code>GRANT</code> statements, account names are specified as the <code>username</code> argument in the same way as they are for <a href="#create-user">CREATE USER</a> statements. See <a href="#create-useraccount-names">account names</a> from the <code>CREATE USER</code> page for details on how account names are specified.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="grantimplicit-account-creation">Implicit Account Creation</h2>
<p>The <code>GRANT</code> statement also allows you to implicitly create accounts in some cases.</p>
<p>If the account does not yet exist, then <code>GRANT</code> can implicitly create it. To implicitly create an account with <code>GRANT</code>, a user is required to have the same privileges that would be required to explicitly create the account with the <code>CREATE USER</code> statement.</p>
<p>If the <code>NO_AUTO_CREATE_USER</code> <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/">SQL_MODE</a> is set, then accounts can only be created if authentication information is specified, or with a <a href="#create-user">CREATE USER</a> statement. If no authentication information is provided, <code>GRANT</code> will produce an error when the specified account does not exist, for example:</p>
<pre class="fixed">show variables like '%sql_mode%' ;
+---------------+--------------------------------------------+
| Variable_name | Value                                      |
+---------------+--------------------------------------------+
| sql_mode      | NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION |
+---------------+--------------------------------------------+

GRANT USAGE ON *.* TO 'user123'@'%' IDENTIFIED BY '';
ERROR 1133 (28000): Can't find any matching row in the user table

GRANT USAGE ON *.* TO 'user123'@'%' IDENTIFIED VIA PAM using 'mariadb' require ssl ;
Query OK, 0 rows affected (0.00 sec)
 
select host, user from mysql.user where user='user123' ;

+------+----------+
| host | user     |
+------+----------+
| %    | user123 |
+------+----------+
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="grantprivilege-levels">Privilege Levels</h2>
<p>Privileges can be set globally, for an entire database, for a table or routine,
or for individual columns in a table. Certain privileges can only be set at
certain levels.</p>
<ul start="1"><li><a href="#grantglobal-privileges">Global privileges <em>priv_type</em></a> are granted using <code>*.*</code> for
<em>priv_level</em>. Global privileges include privileges to administer the database
and manage user accounts, as well as privileges for all tables, functions, and
procedures. Global privileges are stored in the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user table</a>.
</li><li><a href="#grantdatabase-privileges">Database privileges <em>priv_type</em></a> are granted using <code>db_name.*</code>
for <em>priv_level</em>, or using just <code>*</code> to use default database. Database
privileges include privileges to create tables and functions, as well as
privileges for all tables, functions, and procedures in the database. Database privileges are stored in the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqldb-table/">mysql.db table</a>.
</li><li><a href="#granttable-privileges">Table privileges <em>priv_type</em></a> are granted using <code>db_name.tbl_name</code>
for <em>priv_level</em>, or using just <code>tbl_name</code> to specify a table in the default
database. The <code>TABLE</code> keyword is optional. Table privileges include the
ability to select and change data in the table. Certain table privileges can
be granted for individual columns.
</li><li><a href="#grantcolumn-privileges">Column privileges <em>priv_type</em></a> are granted by specifying a table for
<em>priv_level</em> and providing a column list after the privilege type. They allow
you to control exactly which columns in a table users can select and change.
</li><li><a href="#grantfunction-privileges">Function privileges <em>priv_type</em></a> are granted using <code>FUNCTION db_name.routine_name</code>
for <em>priv_level</em>, or using just  <code>FUNCTION routine_name</code> to specify a function
in the default database.
</li><li><a href="#grantprocedure-privileges">Procedure privileges <em>priv_type</em></a> are granted using <code>PROCEDURE db_name.routine_name</code>
for <em>priv_level</em>, or using just <code>PROCEDURE routine_name</code> to specify a procedure
in the default database.
</li></ul>
<h3 class="anchored_heading" id="grantthe-usage-privilege">The <code>USAGE</code> Privilege</h3>
<p>The <code>USAGE</code> privilege grants no real privileges. The <a href="#show-grants">SHOW GRANTS</a>
statement will show a global <code>USAGE</code> privilege for a newly-created user. You
can use <code>USAGE</code> with the <code>GRANT</code> statement to change options like <code>GRANT OPTION</code>
and <code>MAX_USER_CONNECTIONS</code> without changing any account privileges.</p>
<h3 class="anchored_heading" id="grantthe-all-privileges-privilege">The <code>ALL PRIVILEGES</code> Privilege</h3>
<p>The <code>ALL PRIVILEGES</code> privilege grants all available privileges. Granting all
privileges only affects the given privilege level. For example, granting all
privileges on a table does not grant any privileges on the database or globally.</p>
<p>Using <code>ALL PRIVILEGES</code> does not grant the special <code>GRANT OPTION</code> privilege.</p>
<p>You can use <code>ALL</code> instead of <code>ALL PRIVILEGES</code>.</p>
<h3 class="anchored_heading" id="grantthe-grant-option-privilege">The <code>GRANT OPTION</code> Privilege</h3>
<p>Use the <code>WITH GRANT OPTION</code> clause to give users the ability to grant privileges
to other users at the given privilege level. Users with the <code>GRANT OPTION</code> privilege can
only grant privileges they have. They cannot grant privileges at a higher privilege level than
they have the <code>GRANT OPTION</code> privilege.</p>
<p>The <code>GRANT OPTION</code> privilege cannot be set for individual columns.
If you use <code>WITH GRANT OPTION</code> when specifying <a href="#grantcolumn-privileges">column privileges</a>,
the <code>GRANT OPTION</code> privilege will be granted for the entire table.</p>
<p>Using the <code>WITH GRANT OPTION</code> clause is equivalent to listing <code>GRANT OPTION</code>
as a privilege.</p>
<h3 class="anchored_heading" id="grantglobal-privileges">Global Privileges</h3>
<p>The following table lists the privileges that can be granted globally. You can
also grant all database, table, and function privileges globally. When granted
globally, these privileges apply to all databases, tables, or functions,
including those created later.</p>
<p>To set a global privilege, use <code class="fixed" style="white-space:pre-wrap">*.*</code> for <em>priv_level</em>.</p>
<h4 class="anchored_heading" id="grantbinlog-admin">BINLOG ADMIN</h4>
<p>Enables administration of the <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log/">binary log</a>, including the <a style="color: #150281;" href="https://mariadb.com/kb/en/purge-binary-logs/">PURGE BINARY LOGS</a> statement and setting the <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#binlog_annotate_row_events">binlog_annotate_row_events</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#binlog_cache_size">binlog_cache_size</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#binlog_commit_wait_count">binlog_commit_wait_count</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#binlog_commit_wait_usec">binlog_commit_wait_usec</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#binlog_direct_non_transactional_updates">binlog_direct_non_transactional_updates</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#binlog_expire_logs_seconds">binlog_expire_logs_seconds</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#binlog_file_cache_size">binlog_file_cache_size</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#binlog_format">binlog_format</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#binlog_row_image">binlog_row_image</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#binlog_row_metadata">binlog_row_metadata</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#binlog_stmt_cache_size">binlog_stmt_cache_size</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#expire_logs_days">expire_logs_days</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#log_bin_compress">log_bin_compress</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#log_bin_compress_min_len">log_bin_compress_min_len</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#log_bin_trust_function_creators">log_bin_trust_function_creators</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#max_binlog_cache_size">max_binlog_cache_size</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#max_binlog_size">max_binlog_size</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#max_binlog_stmt_cache_size">max_binlog_stmt_cache_size</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#sql_log_bin">sql_log_bin</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#sync_binlog">sync_binlog</a> system variables. Added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>. </p>
<h4 class="anchored_heading" id="grantbinlog-monitor">BINLOG MONITOR</h4>
<p>New name for <a href="#grantreplication-client">REPLICATION CLIENT</a> from <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>, (<code>REPLICATION CLIENT</code> still supported as an alias for compatibility purposes). Permits running SHOW commands related to the <a href="binary_log">binary log</a>, in particular the <a style="color: #150281;" href="https://mariadb.com/kb/en/show-binlog-status/">SHOW BINLOG STATUS</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/show-replica-status/">SHOW REPLICA STATUS</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/show-binary-logs/">SHOW BINARY LOGS</a> statements.</p>
<h4 class="anchored_heading" id="grantbinlog-replay">BINLOG REPLAY</h4>
<p>Enables replaying the binary log with the <a style="color: #150281;" href="https://mariadb.com/kb/en/binlog/">BINLOG</a> statement (generated by <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlbinlog/">mariadb-binlog</a>), executing <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#timestamp">SET timestamp</a> when <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#secure_timestamp">secure_timestamp</a> is set to <code>replication</code>, and setting the session values of system variables usually included in BINLOG output, in particular <a style="color: #150281;" href="https://mariadb.com/kb/en/gtid/#gtid_domain_id">gtid_domain_id</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/gtid/#gtid_seq_no">gtid_seq_no</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#pseudo_thread_id">pseudo_thread_id</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#server_id">server_id</a>. Added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a></p>
<h4 class="anchored_heading" id="grantconnection-admin">CONNECTION ADMIN</h4>
<p>Enables administering connection resource limit options. This includes ignoring the limits specified by <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#max_connections">max_connections</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#max_user_connections">max_user_connections</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#max_password_errors">max_password_errors</a>, not executing the statements specified in <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#init_connect">init_connect</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/kill/">killing connections and queries</a> owned by other users as well as setting the following connection-related system variables: <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#connect_timeout">connect_timeout</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#disconnect_on_expired_password">disconnect_on_expired_password</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/thread-pool-system-status-variables/#extra_max_connections">extra_max_connections</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#init_connect">init_connect</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#max_connections">max_connections</a>, 
<a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#max_connect_errors">max_connect_errors</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#max_password_errors">max_password_errors</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#proxy_protocol_networks">proxy_protocol_networks</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#secure_auth">secure_auth</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#slow_launch_time">slow_launch_time</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/thread-pool-system-status-variables/#thread_pool_exact_stats">thread_pool_exact_stats</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/thread-pool-system-status-variables/#thread_pool_dedicated_listener">thread_pool_dedicated_listener</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/thread-pool-system-status-variables/#thread_pool_idle_timeout">thread_pool_idle_timeout</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/thread-pool-system-status-variables/#thread_pool_max_threads">thread_pool_max_threads</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/thread-pool-system-status-variables/#thread_pool_min_threads">thread_pool_min_threads</a>, thread_pool_mode, <a style="color: #150281;" href="https://mariadb.com/kb/en/thread-pool-system-status-variables/#thread_pool_oversubscribe">thread_pool_oversubscribe</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/thread-pool-system-status-variables/#thread_pool_prio_kickup_timer">thread_pool_prio_kickup_timer</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/thread-pool-system-status-variables/#thread_pool_priority">thread_pool_priority</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/thread-pool-system-status-variables/#thread_pool_size">thread_pool_size</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/thread-pool-system-status-variables/#thread_pool_stall_limit">thread_pool_stall_limit</a>. Added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>.</p>
<h4 class="anchored_heading" id="grantcreate-user">CREATE USER</h4>
<p>Create a user using the <a href="#create-user">CREATE USER</a> statement, or implicitly create a user with the <code>GRANT</code> statement.</p>
<h4 class="anchored_heading" id="grantfederated-admin">FEDERATED ADMIN</h4>
<p>Execute <a style="color: #150281;" href="https://mariadb.com/kb/en/create-server/">CREATE SERVER</a>, <a href="#alter-server">ALTER SERVER</a>, and <a style="color: #150281;" href="https://mariadb.com/kb/en/drop-server/">DROP SERVER</a> statements. Added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>.</p>
<h4 class="anchored_heading" id="grantfile">FILE</h4>
<p>Read and write files on the server, using statements like <a style="color: #150281;" href="https://mariadb.com/kb/en/load-data-infile/">LOAD DATA INFILE</a> or functions like <a style="color: #150281;" href="https://mariadb.com/kb/en/load_file/">LOAD_FILE()</a>. Also needed to create <a style="color: #150281;" href="https://mariadb.com/kb/en/connect/">CONNECT</a> outward tables. MariaDB server must have the permissions to access those files.</p>
<h4 class="anchored_heading" id="grantgrant-option">GRANT OPTION</h4>
<p>Grant global privileges. You can only grant privileges that you have.</p>
<h4 class="anchored_heading" id="grantprocess">PROCESS</h4>
<p>Show information about the active processes, for example via <a style="color: #150281;" href="https://mariadb.com/kb/en/show-processlist/">SHOW PROCESSLIST</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqladmin/">mysqladmin processlist</a>. If you have the PROCESS privilege, you can see all threads. Otherwise, you can see only your own threads (that is, threads associated with the MariaDB account that you are using).</p>
<h4 class="anchored_heading" id="grantread_only-admin">READ_ONLY ADMIN</h4>
<p>User can set the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#read_only">read_only</a> system variable and allows the user to perform write operations, even when the <code>read_only</code> option is active. Added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>.</p>
<h4 class="anchored_heading" id="grantreload">RELOAD</h4>
<p>Execute <a style="color: #150281;" href="https://mariadb.com/kb/en/flush/">FLUSH</a> statements or equivalent <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqladmin/">mariadb-admin/mysqladmin</a> commands.</p>
<h4 class="anchored_heading" id="grantreplication-client">REPLICATION CLIENT</h4>
<p>Execute <a style="color: #150281;" href="https://mariadb.com/kb/en/show-master-status/">SHOW MASTER STATUS</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/show-slave-status/">SHOW SLAVE STATUS</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/show-binary-logs/">SHOW BINARY LOGS</a> informative statements. Renamed to <a href="#grantbinlog-monitor">BINLOG MONITOR</a> in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a> (but still supported as an alias for compatibility reasons).</p>
<h4 class="anchored_heading" id="grantreplication-master-admin">REPLICATION MASTER ADMIN</h4>
<p>Permits administration of primary servers, including the <a style="color: #150281;" href="https://mariadb.com/kb/en/show-replica-hosts/">SHOW REPLICA HOSTS</a> statement, and setting the <a style="color: #150281;" href="https://mariadb.com/kb/en/gtid/#gtid_binlog_state">gtid_binlog_state</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/gtid/#gtid_domain_id">gtid_domain_id</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#master_verify_checksum">master_verify_checksum</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#server_id">server_id</a> system variables. Added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>.</p>
<h4 class="anchored_heading" id="grantreplica-monitor">REPLICA MONITOR</h4>
<p>Permit <a style="color: #150281;" href="https://mariadb.com/kb/en/show-replica-status/">SHOW REPLICA STATUS</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/show-relaylog-events/">SHOW RELAYLOG EVENTS</a>. From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1059-release-notes/">MariaDB 10.5.9</a>.</p>
<p>When a user would upgrade from an older major release to a <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-105/">MariaDB 10.5</a> minor release prior to <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1059-release-notes/">MariaDB 10.5.9</a>, certain user accounts would lose capabilities. For example, a user account that had the REPLICATION CLIENT privilege in older major releases could run <a style="color: #150281;" href="https://mariadb.com/kb/en/show-replica-status/">SHOW REPLICA STATUS</a>, but after upgrading to a <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-105/">MariaDB 10.5</a> minor release prior to <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1059-release-notes/">MariaDB 10.5.9</a>, they could no longer run <a style="color: #150281;" href="https://mariadb.com/kb/en/show-replica-status/">SHOW REPLICA STATUS</a>, because that statement was changed to require the REPLICATION REPLICA ADMIN privilege.</p>
<p>This issue is fixed in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1059-release-notes/">MariaDB 10.5.9</a> with this new privilege, which now grants the user the ability to execute SHOW [ALL] (SLAVE | REPLICA) STATUS.</p>
<p>When a database is upgraded from an older major release to MariaDB Server 10.5.9 or later, any user accounts with the REPLICATION CLIENT or REPLICATION SLAVE privileges will automatically be granted the new REPLICA MONITOR privilege. The privilege fix occurs when the server is started up, not when mariadb-upgrade is performed.</p>
<p>However, when a database is upgraded from an early 10.5 minor release to 10.5.9 and later, the user will have to fix any user account privileges manually.</p>
<h4 class="anchored_heading" id="grantreplication-replica">REPLICATION REPLICA</h4>
<p>Synonym for <a href="#grantreplication-slave">REPLICATION SLAVE</a>. From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1051-release-notes/">MariaDB 10.5.1</a>.</p>
<h4 class="anchored_heading" id="grantreplication-slave">REPLICATION SLAVE</h4>
<p>Accounts used by replica servers on the primary need this privilege. This is needed to get the updates made on the master. From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1051-release-notes/">MariaDB 10.5.1</a>, <a href="#grantreplication-replica">REPLICATION REPLICA</a> is an alias for <code>REPLICATION SLAVE</code>.</p>
<h4 class="anchored_heading" id="grantreplication-slave-admin">REPLICATION SLAVE ADMIN</h4>
<p>Permits administering replica servers, including <a style="color: #150281;" href="https://mariadb.com/kb/en/start-replica/">START REPLICA/SLAVE</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/stop-replica/">STOP REPLICA/SLAVE</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/change-master-to/">CHANGE MASTER</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/show-replica-status/">SHOW REPLICA/SLAVE STATUS</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/show-relaylog-events/">SHOW RELAYLOG EVENTS</a> statements, replaying the binary log with the <a style="color: #150281;" href="https://mariadb.com/kb/en/binlog/">BINLOG</a> statement (generated by <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlbinlog/">mariadb-binlog</a>), and setting the <a style="color: #150281;" href="https://mariadb.com/kb/en/gtid/#gtid_cleanup_batch_size">gtid_cleanup_batch_size</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/gtid/#gtid_ignore_duplicates">gtid_ignore_duplicates</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/gtid/#gtid_pos_auto_engines">gtid_pos_auto_engines</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/gtid/#gtid_slave_pos">gtid_slave_pos</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/gtid/#gtid_strict_mode">gtid_strict_mode</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#init_slave">init_slave</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#read_binlog_speed_limit">read_binlog_speed_limit</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#relay_log_purge">relay_log_purge</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#relay_log_recovery">relay_log_recovery</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#replicate_do_db">replicate_do_db</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#replicate_do_table">replicate_do_table</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#replicate_events_marked_for_skip">replicate_events_marked_for_skip</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#replicate_ignore_db">replicate_ignore_db</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#replicate_ignore_table">replicate_ignore_table</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#replicate_wild_do_table">replicate_wild_do_table</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#replicate_wild_ignore_table">replicate_wild_ignore_table</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_compressed_protocol">slave_compressed_protocol</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_ddl_exec_mode">slave_ddl_exec_mode</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_domain_parallel_threads">slave_domain_parallel_threads</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_exec_mode">slave_exec_mode</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_max_allowed_packet">slave_max_allowed_packet</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_net_timeout">slave_net_timeout</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_parallel_max_queued">slave_parallel_max_queued</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_parallel_mode">slave_parallel_mode</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_parallel_threads">slave_parallel_threads</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_parallel_workers">slave_parallel_workers</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_run_triggers_for_rbr">slave_run_triggers_for_rbr</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_sql_verify_checksum">slave_sql_verify_checksum</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_transaction_retry_interval">slave_transaction_retry_interval</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#slave_type_conversions">slave_type_conversions</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#sync_master_info">sync_master_info</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#sync_relay_log">sync_relay_log</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-system-variables/#sync_relay_log_info">sync_relay_log_info</a> system variables. Added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>.</p>
<h4 class="anchored_heading" id="grantset-user">SET USER</h4>
<p>Enables setting the <code>DEFINER</code> when creating <a style="color: #150281;" href="https://mariadb.com/kb/en/triggers/">triggers</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/views/">views</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/stored-functions/">stored functions</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/stored-procedures/">stored procedures</a>. Added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>.</p>
<h4 class="anchored_heading" id="grantshow-databases">SHOW DATABASES</h4>
<p>List all databases using the <a style="color: #150281;" href="https://mariadb.com/kb/en/show-databases/">SHOW DATABASES</a> statement. Without the <code>SHOW DATABASES</code> privilege, you can still issue the <code>SHOW DATABASES</code> statement, but it will only list databases containing tables on which you have privileges.</p>
<h4 class="anchored_heading" id="grantshutdown">SHUTDOWN</h4>
<p>Shut down the server using <a style="color: #150281;" href="https://mariadb.com/kb/en/shutdown/">SHUTDOWN</a> or the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqladmin/">mysqladmin shutdown</a> command.</p>
<h4 class="anchored_heading" id="grantsuper">SUPER</h4>
<p>Execute superuser statements: <a style="color: #150281;" href="https://mariadb.com/kb/en/change-master-to/">CHANGE MASTER TO</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/data-manipulation-kill-connection-query/">KILL</a> (users who do not have this privilege can only <code>KILL</code> their own threads), <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-commands-purge-logs/">PURGE LOGS</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/set/">SET global system variables</a>, or the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqladmin/">mysqladmin debug</a> command. Also, this permission allows the user to write data even if the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#read_only">read_only</a> startup option is set, enable or disable logging, enable or disable replication on replica, specify a <code>DEFINER</code> for statements that support that clause, connect once after reaching the <code>MAX_CONNECTIONS</code>. If a statement has been specified for the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#init_connect">init-connect</a> <code>mysqld</code> option, that command will not be executed when a user with <code>SUPER</code> privileges connects to the server.</p>
<p>The SUPER privilege has been split into multiple smaller privileges from <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a> to allow for more fine-grained privileges, although it remains an alias for these smaller privileges.</p>
<h3 class="anchored_heading" id="grantdatabase-privileges">Database Privileges</h3>
<p>The following table lists the privileges that can be granted at the database
level. You can also grant all table and function privileges at the database
level. Table and function privileges on a database apply to all tables or
functions in that database, including those created later.</p>
<p>To set a privilege for a database, specify the database using
<code class="fixed" style="white-space:pre-wrap">db_name.*</code> for <em>priv_level</em>, or just use <code class="fixed" style="white-space:pre-wrap">*</code>
to specify the default database.</p>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Privilege</th><th>Description</th></tr>
<tr><td><code>CREATE</code></td><td>Create a database using the <a style="color: #150281;" href="https://mariadb.com/kb/en/create-database/">CREATE DATABASE</a> statement, when the privilege is granted for a database. You can grant the <code>CREATE</code> privilege on databases that do not yet exist. This also grants the <code>CREATE</code> privilege on all tables in the database.</td></tr>
<tr><td><code>CREATE ROUTINE</code></td><td>Create Stored Programs using the <a style="color: #150281;" href="https://mariadb.com/kb/en/create-procedure/">CREATE PROCEDURE</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/create-function/">CREATE FUNCTION</a> statements.</td></tr>
<tr><td><code>CREATE TEMPORARY TABLES</code></td><td>Create temporary tables with the <a href="#create-table">CREATE TEMPORARY TABLE</a> statement. This privilege enable writing and dropping those temporary tables</td></tr>
<tr><td><code>DROP</code></td><td>Drop a database using the <a style="color: #150281;" href="https://mariadb.com/kb/en/drop-database/">DROP DATABASE</a> statement, when the privilege is granted for a database. This also grants the <code>DROP</code> privilege on all tables in the database.</td></tr>
<tr><td><code>EVENT</code></td><td>Create, drop and alter <code>EVENT</code>s.</td></tr>
<tr><td><code>GRANT OPTION</code></td><td>Grant database privileges. You can only grant privileges that you have.</td></tr>
<tr><td><code>LOCK TABLES</code></td><td>Acquire explicit locks using the <a style="color: #150281;" href="https://mariadb.com/kb/en/transactions-lock/">LOCK TABLES</a> statement; you also need to have the <code>SELECT</code> privilege on a table, in order to lock it.</td></tr>
</tbody></table>
</div><h3 class="anchored_heading" id="granttable-privileges">Table Privileges</h3>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Privilege</th><th>Description</th></tr>
<tr><td><code>ALTER</code></td><td>Change the structure of an existing table using the <a href="#alter-table">ALTER TABLE</a> statement.</td></tr>
<tr><td><code>CREATE</code></td><td>Create a table using the <a href="#create-table">CREATE TABLE</a> statement.  You can grant the <code>CREATE</code> privilege on tables that do not yet exist.</td></tr>
<tr><td><code>CREATE VIEW</code></td><td>Create a view using the <a style="color: #150281;" href="https://mariadb.com/kb/en/create-view/">CREATE_VIEW</a> statement.</td></tr>
<tr><td><code>DELETE</code></td><td>Remove rows from a table using the <a href="#delete">DELETE</a> statement.</td></tr>
<tr><td><code>DELETE HISTORY</code></td><td>Remove <a style="color: #150281;" href="https://mariadb.com/kb/en/system-versioned-tables/">historical rows</a> from a table using the <a href="#delete">DELETE HISTORY</a> statement. Displays as <code>DELETE VERSIONING ROWS</code> when running <a href="#show-grants">SHOW GRANTS</a> until <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10315-release-notes/">MariaDB 10.3.15</a> and until <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1045-release-notes/">MariaDB 10.4.5</a> (<a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-17655">MDEV-17655</a>), or when running SHOW PRIVILEGES until <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10413-release-notes/">MariaDB 10.4.13</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10323-release-notes/">MariaDB 10.3.23</a> (<a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-20382">MDEV-20382</a>). From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1034-release-notes/">MariaDB 10.3.4</a>. From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1035-release-notes/">MariaDB 10.3.5</a>, if a user has the <code>SUPER</code> privilege but not this privilege, running <a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_upgrade/">mysql_upgrade</a> will grant this privilege as well.</td></tr>
<tr><td><code>DROP</code></td><td>Drop a table using the <a href="#drop-table">DROP TABLE</a> statement or a view using the <a style="color: #150281;" href="https://mariadb.com/kb/en/drop-view/">DROP VIEW</a> statement. Also required to execute the <a href="#truncate-table">TRUNCATE TABLE</a> statement.</td></tr>
<tr><td><code>GRANT OPTION</code></td><td>Grant table privileges. You can only grant privileges that you have.</td></tr>
<tr><td><code>INDEX</code></td><td>Create an index on a table using the <a style="color: #150281;" href="https://mariadb.com/kb/en/create-index/">CREATE INDEX</a> statement. Without the <code>INDEX</code> privilege, you can still create indexes when creating a table using the <a href="#create-table">CREATE TABLE</a> statement if the you have the <code>CREATE</code> privilege, and you can create indexes using the <a href="#alter-table">ALTER TABLE</a> statement if you have the <code>ALTER</code> privilege.</td></tr>
<tr><td><code>INSERT</code></td><td>Add rows to a table using the <a style="color: #150281;" href="https://mariadb.com/kb/en/insert/">INSERT</a> statement.  The <code>INSERT</code> privilege can also be set on individual columns; see <a href="#grantcolumn-privileges">Column Privileges</a> below for details.</td></tr>
<tr><td><code>REFERENCES</code></td><td>Unused.</td></tr>
<tr><td><code>SELECT</code></td><td>Read data from a table using the <a style="color: #150281;" href="https://mariadb.com/kb/en/select/">SELECT</a> statement. The <code>SELECT</code> privilege can also be set on individual columns; see <a href="#grantcolumn-privileges">Column Privileges</a> below for details.</td></tr>
<tr><td><code>SHOW VIEW</code></td><td>Show the <a style="color: #150281;" href="https://mariadb.com/kb/en/create-view/">CREATE VIEW</a> statement to create a view using the <a style="color: #150281;" href="https://mariadb.com/kb/en/show-create-view/">SHOW CREATE VIEW</a> statement.</td></tr>
<tr><td><code>TRIGGER</code></td><td>Execute triggers associated to tables you update, execute the <a style="color: #150281;" href="https://mariadb.com/kb/en/create-trigger/">CREATE TRIGGER</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/drop-trigger/">DROP TRIGGER</a> statements. You will still be able to see triggers.</td></tr>
<tr><td><code>UPDATE</code></td><td>Update existing rows in a table using the <a href="#update">UPDATE</a> statement. <code>UPDATE</code> statements usually include a <code>WHERE</code> clause to update only certain rows. You must have <code>SELECT</code> privileges on the table or the appropriate columns for the <code>WHERE</code> clause. The <code>UPDATE</code> privilege can also be set on individual columns; see <a href="#grantcolumn-privileges">Column Privileges</a> below for details.</td></tr>
</tbody></table>
</div><h3 class="anchored_heading" id="grantcolumn-privileges">Column Privileges</h3>
<p>Some table privileges can be set for individual columns of a table. To use
column privileges, specify the table explicitly and provide a list of column
names after the privilege type. For example, the following statement would allow
the user to read the names and positions of employees, but not other information
from the same table, such as salaries.</p>
<pre class="fixed">GRANT SELECT (name, position) on Employee to 'jeffrey'@'localhost';
</pre><div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Privilege</th><th>Description</th></tr>
<tr><td><code>INSERT (column_list)</code></td><td>Add rows specifying values in columns using the <a style="color: #150281;" href="https://mariadb.com/kb/en/insert/">INSERT</a> statement. If you only have column-level <code>INSERT</code> privileges, you must specify the columns you are setting in the <code>INSERT</code> statement. All other columns will be set to their default values, or <code>NULL</code>.</td></tr>
<tr><td><code>REFERENCES (column_list)</code></td><td>Unused.</td></tr>
<tr><td><code>SELECT (column_list)</code></td><td>Read values in columns using the <a style="color: #150281;" href="https://mariadb.com/kb/en/select/">SELECT</a> statement. You cannot access or query any columns for which you do not have <code>SELECT</code> privileges, including in <code>WHERE</code>, <code>ON</code>, <code>GROUP BY</code>, and <code>ORDER BY</code> clauses.</td></tr>
<tr><td><code>UPDATE (column_list)</code></td><td>Update values in columns of existing rows using the <a href="#update">UPDATE</a> statement. <code>UPDATE</code> statements usually include a <code>WHERE</code> clause to update only certain rows. You must have <code>SELECT</code> privileges on the table or the appropriate columns for the <code>WHERE</code> clause.</td></tr>
</tbody></table>
</div><h3 class="anchored_heading" id="grantfunction-privileges">Function Privileges</h3>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Privilege</th><th>Description</th></tr>
<tr><td><code>ALTER ROUTINE</code></td><td>Change the characteristics of a stored function using the <a href="#alter-function">ALTER FUNCTION</a> statement.</td></tr>
<tr><td><code>EXECUTE</code></td><td>Use a stored function. You need <code>SELECT</code> privileges for any tables or columns accessed by the function.</td></tr>
<tr><td><code>GRANT OPTION</code></td><td>Grant function privileges. You can only grant privileges that you have.</td></tr>
</tbody></table>
</div><h3 class="anchored_heading" id="grantprocedure-privileges">Procedure Privileges</h3>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Privilege</th><th>Description</th></tr>
<tr><td><code>ALTER ROUTINE</code></td><td>Change the characteristics of a stored procedure using the <a href="#alter-procedure">ALTER PROCEDURE</a> statement.</td></tr>
<tr><td><code>EXECUTE</code></td><td>Execute a <a style="color: #150281;" href="https://mariadb.com/kb/en/stored-procedures/">stored procedure</a> using the <a style="color: #150281;" href="https://mariadb.com/kb/en/call/">CALL</a> statement. The privilege to call a procedure may allow you to perform actions you wouldn't otherwise be able to do, such as insert rows into a table.</td></tr>
<tr><td><code>GRANT OPTION</code></td><td>Grant procedure privileges. You can only grant privileges that you have.</td></tr>
</tbody></table>
</div><h3 class="anchored_heading" id="grantproxy-privileges">Proxy Privileges</h3>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Privilege</th><th>Description</th></tr>
<tr><td><code>PROXY</code></td><td>Permits one user to be a proxy for another.</td></tr>
</tbody></table>
</div><p>The <code>PROXY</code> privilege allows one user to proxy as another user, which means their privileges change to that of the proxy user, and the <a style="color: #150281;" href="https://mariadb.com/kb/en/current_user/">CURRENT_USER()</a> function returns the user name of the proxy user.</p>
<p>The <code>PROXY</code> privilege only works with authentication plugins that support it. The default <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_native_password/">mysql_native_password</a> authentication plugin does not support proxy users.</p>
<p>The <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/">pam</a> authentication plugin is the only plugin included with MariaDB that currently supports proxy users. The <code>PROXY</code> privilege is commonly used with the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/">pam</a> authentication plugin to enable <a style="color: #150281;" href="https://mariadb.com/kb/en/user-and-group-mapping-with-pam/">user and group mapping with PAM</a>.</p>
<p>For example, to grant the <code>PROXY</code> privilege to an <a href="#create-useranonymous-accounts">anonymous account</a> that authenticates with the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/">pam</a> authentication plugin, you could execute the following:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'dba'</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'strongpassword'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'dba'</span><span class="o">@</span><span class="s1">'%'</span> <span class="p">;</span>

<span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">''</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">pam</span> <span class="k">USING</span> <span class="s1">'mariadb'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="n">PROXY</span> <span class="k">ON</span> <span class="s1">'dba'</span><span class="o">@</span><span class="s1">'%'</span> <span class="k">TO</span> <span class="s1">''</span><span class="o">@</span><span class="s1">'%'</span><span class="p">;</span>
</pre><p>A user account can only grant the <code>PROXY</code> privilege for a specific user account if the granter also has the <code>PROXY</code> privilege for that specific user account, and if that privilege is defined <code>WITH GRANT OPTION</code>. For example, the following example fails because the granter does not have the <code>PROXY</code> privilege for that specific user account at all:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="k">USER</span><span class="p">(),</span> <span class="k">CURRENT_USER</span><span class="p">();</span>
<span class="o">+</span><span class="c1">-----------------+-----------------+</span>
<span class="o">|</span> <span class="k">USER</span><span class="p">()</span>          <span class="o">|</span> <span class="k">CURRENT_USER</span><span class="p">()</span>  <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+-----------------+</span>
<span class="o">|</span> <span class="n">alice</span><span class="o">@</span><span class="n">localhost</span> <span class="o">|</span> <span class="n">alice</span><span class="o">@</span><span class="n">localhost</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+-----------------+</span>

<span class="k">SHOW</span> <span class="n">GRANTS</span><span class="p">;</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Grants</span> <span class="k">for</span> <span class="n">alice</span><span class="o">@</span><span class="n">localhost</span>                                                                                            <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'alice'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="n">PASSWORD</span> <span class="s1">'*2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19'</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------------------------------------------------+</span>

<span class="k">GRANT</span> <span class="n">PROXY</span> <span class="k">ON</span> <span class="s1">'dba'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">TO</span> <span class="s1">'bob'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">1698</span> <span class="p">(</span><span class="mi">28000</span><span class="p">):</span> <span class="k">Access</span> <span class="n">denied</span> <span class="k">for</span> <span class="k">user</span> <span class="s1">'alice'</span><span class="o">@</span><span class="s1">'localhost'</span>
</pre><p>And the following example fails because the granter does have the <code>PROXY</code> privilege for that specific user account, but it is not defined <code>WITH GRANT OPTION</code>:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="k">USER</span><span class="p">(),</span> <span class="k">CURRENT_USER</span><span class="p">();</span>
<span class="o">+</span><span class="c1">-----------------+-----------------+</span>
<span class="o">|</span> <span class="k">USER</span><span class="p">()</span>          <span class="o">|</span> <span class="k">CURRENT_USER</span><span class="p">()</span>  <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+-----------------+</span>
<span class="o">|</span> <span class="n">alice</span><span class="o">@</span><span class="n">localhost</span> <span class="o">|</span> <span class="n">alice</span><span class="o">@</span><span class="n">localhost</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+-----------------+</span>

<span class="k">SHOW</span> <span class="n">GRANTS</span><span class="p">;</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Grants</span> <span class="k">for</span> <span class="n">alice</span><span class="o">@</span><span class="n">localhost</span>                                                                                            <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'alice'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="n">PASSWORD</span> <span class="s1">'*2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19'</span> <span class="o">|</span>
<span class="o">|</span> <span class="k">GRANT</span> <span class="n">PROXY</span> <span class="k">ON</span> <span class="s1">'dba'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">TO</span> <span class="s1">'alice'</span><span class="o">@</span><span class="s1">'localhost'</span>                                                               <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------------------------------------------------+</span>

<span class="k">GRANT</span> <span class="n">PROXY</span> <span class="k">ON</span> <span class="s1">'dba'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">TO</span> <span class="s1">'bob'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">1698</span> <span class="p">(</span><span class="mi">28000</span><span class="p">):</span> <span class="k">Access</span> <span class="n">denied</span> <span class="k">for</span> <span class="k">user</span> <span class="s1">'alice'</span><span class="o">@</span><span class="s1">'localhost'</span>
</pre><p>But the following example succeeds because the granter does have the <code>PROXY</code> privilege for that specific user account, and it is defined <code>WITH GRANT OPTION</code>:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="k">USER</span><span class="p">(),</span> <span class="k">CURRENT_USER</span><span class="p">();</span>
<span class="o">+</span><span class="c1">-----------------+-----------------+</span>
<span class="o">|</span> <span class="k">USER</span><span class="p">()</span>          <span class="o">|</span> <span class="k">CURRENT_USER</span><span class="p">()</span>  <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+-----------------+</span>
<span class="o">|</span> <span class="n">alice</span><span class="o">@</span><span class="n">localhost</span> <span class="o">|</span> <span class="n">alice</span><span class="o">@</span><span class="n">localhost</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+-----------------+</span>

<span class="k">SHOW</span> <span class="n">GRANTS</span><span class="p">;</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Grants</span> <span class="k">for</span> <span class="n">alice</span><span class="o">@</span><span class="n">localhost</span>                                                                                                              <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'alice'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="n">PASSWORD</span> <span class="s1">'*2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19'</span> <span class="k">WITH</span> <span class="k">GRANT</span> <span class="k">OPTION</span> <span class="o">|</span>
<span class="o">|</span> <span class="k">GRANT</span> <span class="n">PROXY</span> <span class="k">ON</span> <span class="s1">'dba'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">TO</span> <span class="s1">'alice'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">WITH</span> <span class="k">GRANT</span> <span class="k">OPTION</span>                                                               <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------------------------------------------------------------------+</span>

<span class="k">GRANT</span> <span class="n">PROXY</span> <span class="k">ON</span> <span class="s1">'dba'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">TO</span> <span class="s1">'bob'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>
</pre><p>A user account can grant the <code>PROXY</code> privilege for any other user account if the granter has the <code>PROXY</code> privilege for the <code>''@'%'</code> anonymous user account, like this:</p>
<pre class="fixed"><span class="k">GRANT</span> <span class="n">PROXY</span> <span class="k">ON</span> <span class="s1">''</span><span class="o">@</span><span class="s1">'%'</span> <span class="k">TO</span> <span class="s1">'dba'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">WITH</span> <span class="k">GRANT</span> <span class="k">OPTION</span><span class="p">;</span>
</pre><p>For example, the following example succeeds because the user can grant the <code>PROXY</code> privilege for any other user account:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="k">USER</span><span class="p">(),</span> <span class="k">CURRENT_USER</span><span class="p">();</span>
<span class="o">+</span><span class="c1">-----------------+-----------------+</span>
<span class="o">|</span> <span class="k">USER</span><span class="p">()</span>          <span class="o">|</span> <span class="k">CURRENT_USER</span><span class="p">()</span>  <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+-----------------+</span>
<span class="o">|</span> <span class="n">alice</span><span class="o">@</span><span class="n">localhost</span> <span class="o">|</span> <span class="n">alice</span><span class="o">@</span><span class="n">localhost</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+-----------------+</span>

<span class="k">SHOW</span> <span class="n">GRANTS</span><span class="p">;</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Grants</span> <span class="k">for</span> <span class="n">alice</span><span class="o">@</span><span class="n">localhost</span>                                                                                                              <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'alice'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="n">PASSWORD</span> <span class="s1">'*2470C0C06DEE42FD1618BB99005ADCA2EC9D1E19'</span> <span class="k">WITH</span> <span class="k">GRANT</span> <span class="k">OPTION</span> <span class="o">|</span>
<span class="o">|</span> <span class="k">GRANT</span> <span class="n">PROXY</span> <span class="k">ON</span> <span class="s1">''</span><span class="o">@</span><span class="s1">'%'</span> <span class="k">TO</span> <span class="s1">'alice'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">WITH</span> <span class="k">GRANT</span> <span class="k">OPTION</span>                                                                          <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------------------------------------------------------------------------------------------------------------------------------+</span>

<span class="k">GRANT</span> <span class="n">PROXY</span> <span class="k">ON</span> <span class="s1">'app1_dba'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">TO</span> <span class="s1">'bob'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="k">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">004</span> <span class="n">sec</span><span class="p">)</span>

<span class="k">GRANT</span> <span class="n">PROXY</span> <span class="k">ON</span> <span class="s1">'app2_dba'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">TO</span> <span class="s1">'carol'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="k">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">004</span> <span class="n">sec</span><span class="p">)</span>
</pre><p>The default <code>root</code> user accounts created by <a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_install_db/">mysql_install_db</a> have this privilege. For example:</p>
<pre class="fixed"><span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'root'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">WITH</span> <span class="k">GRANT</span> <span class="k">OPTION</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="n">PROXY</span> <span class="k">ON</span> <span class="s1">''</span><span class="o">@</span><span class="s1">'%'</span> <span class="k">TO</span> <span class="s1">'root'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">WITH</span> <span class="k">GRANT</span> <span class="k">OPTION</span><span class="p">;</span>
</pre><p>This allows the default <code>root</code> user accounts to grant the <code>PROXY</code> privilege for any other user account, and it also allows the default <code>root</code> user accounts to grant others the privilege to do the same.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="grantauthentication-options">Authentication Options</h2>
<p>The authentication options for the <code>GRANT</code> statement are the same as those for the <a href="#create-user">CREATE USER</a> statement.</p>
<h3 class="anchored_heading" id="grantidentified-by-password">IDENTIFIED BY 'password'</h3>
<p>The optional <code>IDENTIFIED BY</code> clause can be used to provide an account with a password. The password should be specified in plain text. It will be hashed by the <a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD</a> function prior to being stored to the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a> table.</p>
<p>For example, if our password is <code>mariadb</code>, then we can create the user with:</p>
<pre class="fixed"><span class="k">GRANT</span> <span class="k">USAGE</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'mariadb'</span><span class="p">;</span>
</pre><p>If you do not specify a password with the <code>IDENTIFIED BY</code> clause, the user
will be able to connect without a password. A blank password is not a wildcard
to match any password. The user must connect without providing a password if no
password is set.</p>
<p>If the user account already exists and if you provide the <code>IDENTIFIED BY</code> clause, then the user's password will be changed. You must have the privileges needed for the <a href="#set-password">SET PASSWORD</a>
statement to change a user's password with <code>GRANT</code>.</p>
<p>The only <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugins</a> that this clause supports are <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_native_password/">mysql_native_password</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_old_password/">mysql_old_password</a>.</p>
<h3 class="anchored_heading" id="grantidentified-by-password-password_hash">IDENTIFIED BY PASSWORD 'password_hash'</h3>
<p>The optional <code>IDENTIFIED BY PASSWORD</code> clause can be used to provide an account with a password that has already been hashed. The password should be specified as a hash that was provided by the <a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD</a> function. It will be stored to the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a> table as-is.</p>
<p>For example, if our password is <code>mariadb</code>, then we can find the hash with:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">'mariadb'</span><span class="p">);</span>
<span class="o">+</span><span class="c1">-------------------------------------------+</span>
<span class="o">|</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">'mariadb'</span><span class="p">)</span>                       <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------------------------------------+</span>
<span class="o">|</span> <span class="o">*</span><span class="mi">54958</span><span class="n">E764CE10E50764C2EECBB71D01F08549980</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------------------------------------+</span>
<span class="mi">1</span> <span class="k">row</span> <span class="k">in</span> <span class="k">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>
</pre><p>And then we can create a user with the hash:</p>
<pre class="fixed"><span class="k">GRANT</span> <span class="k">USAGE</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="n">PASSWORD</span> <span class="s1">'*54958E764CE10E50764C2EECBB71D01F08549980'</span><span class="p">;</span>
</pre><p>If you do not specify a password with the <code>IDENTIFIED BY</code> clause, the user
will be able to connect without a password. A blank password is not a wildcard
to match any password. The user must connect without providing a password if no
password is set.</p>
<p>If the user account already exists and if you provide the <code>IDENTIFIED BY</code> clause, then the user's password will be changed. You must have the privileges needed for the <a href="#set-password">SET PASSWORD</a>
statement to change a user's password with <code>GRANT</code>.</p>
<p>The only <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugins</a> that this clause supports are <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_native_password/">mysql_native_password</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_old_password/">mysql_old_password</a>.</p>
<h3 class="anchored_heading" id="grantidentified-viawith-authentication_plugin">IDENTIFIED {VIA|WITH} authentication_plugin</h3>
<p>The optional <code>IDENTIFIED VIA authentication_plugin</code> allows you to specify that the account should be authenticated by a specific <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugin</a>. The plugin name must be an active authentication plugin as per <a style="color: #150281;" href="https://mariadb.com/kb/en/show-plugins/">SHOW PLUGINS</a>. If it doesn't show up in that output, then you will need to install it with <a style="color: #150281;" href="https://mariadb.com/kb/en/install-plugin/">INSTALL PLUGIN</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/install-soname/">INSTALL SONAME</a>.</p>
<p>For example, this could be used with the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/">PAM authentication plugin</a>:</p>
<pre class="fixed"><span class="k">GRANT</span> <span class="k">USAGE</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">pam</span><span class="p">;</span>
</pre><p>Some authentication plugins allow additional arguments to be specified after a <code>USING</code> or <code>AS</code> keyword. For example, the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/">PAM authentication plugin</a> accepts a <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/#configuring-the-pam-service">service name</a>:</p>
<pre class="fixed"><span class="k">GRANT</span> <span class="k">USAGE</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="n">foo2</span><span class="o">@</span><span class="n">test</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">pam</span> <span class="k">USING</span> <span class="s1">'mariadb'</span><span class="p">;</span>
</pre><p>The exact meaning of the additional argument would depend on the specific authentication plugin.</p>
<div class="mariadb_from_10_4_0 mariadb from_10_4_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1040-release-notes/">10.4.0</a></h5><p>The <code>USING</code> or <code>AS</code> keyword can also be used to provide a plain-text password to a plugin if it's provided as an argument to the <a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD()</a> function. This is only valid for <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugins</a> that have implemented a hook for the <a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD()</a> function. For example, the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-ed25519/">ed25519</a> authentication plugin supports this:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="n">safe</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">ed25519</span> <span class="k">USING</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">'secret'</span><span class="p">);</span>
</pre></div><div class="mariadb_from_10_4_3 mariadb from_10_4_3 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1043-release-notes/">10.4.3</a></h5><p>One can specify many authentication plugins, they all work as alternatives ways of authenticating a user:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="n">safe</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="n">VIA</span> <span class="n">ed25519</span> <span class="k">USING</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">'secret'</span><span class="p">)</span> <span class="k">OR</span> <span class="n">unix_socket</span><span class="p">;</span>
</pre></div><p>By default, when you create a user without specifying an authentication plugin, MariaDB uses the <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_native_password/">mysql_native_password</a> plugin.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="grantresource-limit-options">Resource Limit Options</h2>
<div class="mariadb_from_10_2_0 mariadb from_10_2_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1020-release-notes/">10.2.0</a></h5><p><a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1020-release-notes/">MariaDB 10.2.0</a> introduced a number of resource limit options.</p>
</div><p>It is possible to set per-account limits for certain server resources. The following table shows the values that can be set per account:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Limit Type</th><th>Decription</th></tr>
<tr><td><code>MAX_QUERIES_PER_HOUR</code></td><td>Number of statements that the account can issue per hour (including updates)</td></tr>
<tr><td><code>MAX_UPDATES_PER_HOUR</code></td><td>Number of updates (not queries) that the account can issue per hour</td></tr>
<tr><td><code>MAX_CONNECTIONS_PER_HOUR</code></td><td>Number of connections that the account can start per hour</td></tr>
<tr><td><code>MAX_USER_CONNECTIONS</code></td><td>Number of simultaneous connections that can be accepted from the same account; if it is 0, <code>max_connections</code> will be used instead; if <code>max_connections</code> is 0, there is no limit for this account's simultaneous connections.</td></tr>
<tr><td><code>MAX_STATEMENT_TIME</code></td><td>Timeout, in seconds, for statements executed by the user. See also <a style="color: #150281;" href="https://mariadb.com/kb/en/aborting-statements/">Aborting Statements that Exceed a Certain Time to Execute</a>.</td></tr>
</tbody></table>
</div><p>If any of these limits are set to <code>0</code>, then there is no limit for that resource for that user.</p>
<p>To set resource limits for an account, if you do not want to change that account's privileges, you can issue a <code>GRANT</code> statement with the <code>USAGE</code> privilege, which has no meaning. The statement can name some or all limit types, in any order.</p>
<p>Here is an example showing how to set resource limits:</p>
<pre class="fixed"><span class="k">GRANT</span> <span class="k">USAGE</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'someone'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">WITH</span>
    <span class="n">MAX_USER_CONNECTIONS</span> <span class="mi">0</span>
    <span class="n">MAX_QUERIES_PER_HOUR</span> <span class="mi">200</span><span class="p">;</span>
</pre><p>The resources are tracked per account, which means <code>'user'@'server'</code>; not per user name or per connection.</p>
<p>The count can be reset for all users using <a style="color: #150281;" href="https://mariadb.com/kb/en/flush/">FLUSH USER_RESOURCES</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/flush/">FLUSH PRIVILEGES</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqladmin/">mysqladmin reload</a>.</p>
<p>Users with the <code>CONNECTION ADMIN</code> privilege (in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a> and later) or the <code>SUPER</code> privilege are not restricted by <code>max_user_connections</code>, <code>max_connections</code>, or <code>max_password_errors</code>.</p>
<p>Per account resource limits are stored in the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">user</a> table, in the <a style="color: #150281;" href="https://mariadb.com/kb/en/the-mysql-database-tables/">mysql</a> database. Columns used for resources limits are named <code>max_questions</code>, <code>max_updates</code>, <code>max_connections</code> (for <code>MAX_CONNECTIONS_PER_HOUR</code>), and <code>max_user_connections</code> (for <code>MAX_USER_CONNECTIONS</code>).</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="granttls-options">TLS Options</h2>
<p>By default, MariaDB transmits data between the server and clients without encrypting it. This is generally acceptable when the server and client run on the same host or in networks where security is guaranteed through other means. However, in cases where the server and client exist on separate networks or they are in a high-risk network, the lack of encryption does introduce security concerns as a malicious actor could potentially eavesdrop on the traffic as it is sent over the network between them.</p>
<p>To mitigate this concern, MariaDB allows you to encrypt data in transit between the server and clients using the Transport Layer Security (TLS) protocol. TLS was formerly known as Secure Socket Layer (SSL), but strictly speaking the SSL protocol is a predecessor to TLS and, that version of the protocol is now considered insecure. The documentation still uses the term SSL often and for compatibility reasons TLS-related server system and status variables still use the prefix ssl_, but internally, MariaDB only supports its secure successors.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/secure-connections-overview/">Secure Connections Overview</a> for more information about how to determine whether your MariaDB server has TLS support.</p>
<p>You can set certain TLS-related restrictions for specific user accounts. For instance, you might use this with user accounts that require access to sensitive data while sending it across networks that you do not control. These restrictions can be enabled for a user account with the <a href="#create-user">CREATE USER</a>, <a href="#alter-user">ALTER USER</a>, or <a href="#grant">GRANT</a> statements. The following options are available:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Option</th><th>Description</th></tr>
<tr><td><code>REQUIRE NONE</code></td><td>TLS is not required for this account, but can still be used.</td></tr>
<tr><td><code>REQUIRE SSL</code></td><td>The account must use TLS, but no valid X509 certificate is required. This option cannot be combined with other TLS options.</td></tr>
<tr><td><code>REQUIRE X509</code></td><td>The account must use TLS and must have a valid X509 certificate. This option implies <code>REQUIRE SSL</code>. This option cannot be combined with other TLS options.</td></tr>
<tr><td><code>REQUIRE ISSUER 'issuer'</code></td><td>The account must use TLS and must have a valid X509 certificate. Also, the Certificate Authority must be the one specified via the string <code>issuer</code>. This option implies <code>REQUIRE X509</code>. This option can be combined with the <code>SUBJECT</code>, and <code>CIPHER</code> options in any order.</td></tr>
<tr><td><code>REQUIRE SUBJECT 'subject'</code></td><td>The account must use TLS and must have a valid X509 certificate. Also, the certificate's Subject must be the one specified via the string <code>subject</code>. This option implies <code>REQUIRE X509</code>. This option can be combined with the <code>ISSUER</code>, and <code>CIPHER</code> options in any order.</td></tr>
<tr><td><code>REQUIRE CIPHER 'cipher'</code></td><td>The account must use TLS, but no valid X509 certificate is required. Also, the encryption used for the connection must use a specific cipher method specified in the string <code>cipher</code>. This option implies <code>REQUIRE SSL</code>. This option can be combined with the <code>ISSUER</code>, and <code>SUBJECT</code> options in any order.</td></tr>
</tbody></table>
</div><p>The <code>REQUIRE</code> keyword must be used only once for all specified options, and the <code>AND</code> keyword can be used to separate individual options, but it is not required.</p>
<p>For example, you can create a user account that requires these TLS options with the following:</p>
<pre class="fixed"><span class="k">GRANT</span> <span class="k">USAGE</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'alice'</span><span class="o">@</span><span class="s1">'%'</span>
    <span class="n">REQUIRE</span> <span class="n">SUBJECT</span> <span class="s1">'/CN=alice/O=My Dom, Inc./C=US/ST=Oregon/L=Portland'</span>
    <span class="k">AND</span> <span class="n">ISSUER</span> <span class="s1">'/C=FI/ST=Somewhere/L=City/ O=Some Company/CN=Peter Parker/emailAddress=p.parker@marvel.com'</span>
    <span class="k">AND</span> <span class="n">CIPHER</span> <span class="s1">'SHA-DES-CBC3-EDH-RSA'</span><span class="p">;</span>
</pre><p>If any of these options are set for a specific user account, then any client who tries to connect with that user account will have to be configured to connect with TLS.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/securing-connections-for-client-and-server/">Securing Connections for Client and Server</a> for information on how to enable TLS on the client and server.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="grantroles">Roles</h2>
<h3 class="anchored_heading" id="grantsyntax">Syntax</h3>
<pre class="fixed">GRANT role TO grantee [, grantee ... ]
[ WITH ADMIN OPTION ]

<em>grantee</em>:
    rolename
    username [<em>authentication_option</em>]
</pre><p>The GRANT statement is also used to grant the use a <a style="color: #150281;" href="https://mariadb.com/kb/en/roles/">role</a> to one or more users or other roles. In order to be able to grant a role, the grantor doing so must have permission to do so (see WITH ADMIN in the <a href="#create-role">CREATE ROLE</a> article).</p>
<p>Specifying the <code>WITH ADMIN OPTION</code> permits the grantee to in turn grant the role to another.</p>
<p>For example, the following commands show how to grant the same role to a couple different users.</p>
<pre class="fixed"><span class="k">GRANT</span> <span class="n">journalist</span> <span class="k">TO</span> <span class="n">hulda</span><span class="p">;</span>

<span class="k">GRANT</span> <span class="n">journalist</span> <span class="k">TO</span> <span class="n">berengar</span> <span class="k">WITH</span> <span class="k">ADMIN</span> <span class="k">OPTION</span><span class="p">;</span>
</pre><p>If a user has been granted a role, they do not automatically obtain all permissions associated with that role. These permissions are only in use when the user activates the role with the <a href="#set-role">SET ROLE</a> statement.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="grantgrant-examples">Grant Examples</h2>
<h3 class="anchored_heading" id="grantgranting-root-like-privileges">Granting Root-like Privileges</h3>
<p>You can create a user that has privileges similar to the default <code>root</code> accounts by executing the following:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'alexander'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span> <span class="k">ON</span>  <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">to</span> <span class="s1">'alexander'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="k">WITH</span> <span class="k">GRANT</span> <span class="k">OPTION</span><span class="p">;</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="grantsee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/troubleshooting-connection-issues/">Troubleshooting Connection Issues</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqld-options/#-skip-grant-tables">--skip-grant-tables</a> allows you to start MariaDB without <code>GRANT</code>.  This is useful if you lost your root password.
</li><li><a href="#create-user">CREATE USER</a>
</li><li><a href="#alter-user">ALTER USER</a>
</li><li><a href="#drop-user">DROP USER</a>
</li><li><a href="#set-password">SET PASSWORD</a>
</li><li><a href="#show-create-user">SHOW CREATE USER</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user table</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/password-validation-plugins/">Password Validation Plugins</a> - permits the setting of basic criteria for passwords
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">Authentication Plugins</a> - allow various authentication methods to be used, and new ones to be developed.</li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="rename-user">1.1.1.5 RENAME USER</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="syntax">Syntax</h2>
<pre class="fixed">RENAME USER old_user TO new_user
    [, old_user TO new_user] ...
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="description">Description</h2>
<p>The RENAME USER statement renames existing MariaDB accounts. To use it,
you must have the global <code><a href="#grantglobal-privileges">CREATE USER</a></code> privilege
or the <code><a href="#granttable-privileges">UPDATE</a></code> privilege for the <code>mysql</code> database.
Each account is named using the same format as for the <code><a href="#create-user">CREATE USER</a></code>
statement; for example, <code>'jeffrey'@'localhost'</code>.
If you specify only the user name part of the account name, a host
name part of <code>'%'</code> is used.</p>
<p>If any of the old user accounts do not exist or any of the new user accounts already
exist, <code>ERROR 1396 (HY000)</code> results. If an error occurs, <code>RENAME USER</code>
will still rename the accounts that do not result in an error.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="examples">Examples</h2>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'donald'</span><span class="p">,</span> <span class="s1">'mickey'</span><span class="p">;</span>
<span class="k">RENAME</span> <span class="k">USER</span> <span class="s1">'donald'</span> <span class="k">TO</span> <span class="s1">'duck'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">,</span> <span class="s1">'mickey'</span> <span class="k">TO</span> <span class="s1">'mouse'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>
</pre>
    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="revoke">1.1.1.6 REVOKE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#revokeprivileges" title="Privileges">Privileges</a>    <ol class="toc">

        <li class=""><a href="#revokesyntax" title="Syntax">Syntax</a></li>

        <li class=""><a href="#revokedescription" title="Description">Description</a></li>

        <li class=""><a href="#revokeexamples" title="Examples">Examples</a>    </li></ol>
</li>

    <li class=""><a href="#revokeroles" title="Roles">Roles</a>    <ol class="toc">

        <li class=""><a href="#revokesyntax" title="Syntax">Syntax</a></li>

        <li class=""><a href="#revokedescription" title="Description">Description</a></li>

        <li class=""><a href="#revokeexample" title="Example">Example</a>    </li></ol>
 </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="revokeprivileges">Privileges</h2>
<h3 class="anchored_heading" id="revokesyntax">Syntax</h3>
<pre class="fixed">REVOKE 
    priv_type [(column_list)]
      [, priv_type [(column_list)]] ...
    ON [object_type] priv_level
    FROM user [, user] ...

REVOKE ALL PRIVILEGES, GRANT OPTION
    FROM user [, user] ...
</pre><h3 class="anchored_heading" id="revokedescription">Description</h3>
<p>The <code>REVOKE</code> statement enables system administrators to revoke
privileges (or roles - see <a href="#revokeroles">section below</a>) from MariaDB accounts. Each account is named using the same format
as for the <code>GRANT</code> statement; for example,
'<code>jeffrey'@'localhost</code>'. If you specify only the user name part
of the account name, a host name part of '<code><code>%</code></code>' is used. For
details on the levels at which privileges exist, the allowable
<code>priv_type</code> and <code>priv_level</code> values, and the
syntax for specifying users and passwords, see <a href="#grant">GRANT</a>.</p>
<p>To use the first <code>REVOKE</code> syntax, you must have the
<code>GRANT OPTION</code> privilege, and you must have the privileges that
you are revoking.</p>
<p>To revoke all privileges, use the second syntax, which drops all
global, database, table, column, and routine privileges for the named
user or users:</p>
<pre class="fixed"><span class="k">REVOKE</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span><span class="p">,</span> <span class="k">GRANT</span> <span class="k">OPTION</span> <span class="k">FROM</span> <span class="k">user</span> <span class="p">[,</span> <span class="k">user</span><span class="p">]</span> <span class="p">...</span>
</pre><p>To use this <code>REVOKE</code> syntax, you must have the global
<a href="#create-user">CREATE USER</a> privilege or the
<a href="#update">UPDATE</a> privilege for the mysql database. See
<a href="#grant">GRANT</a>.</p>
<h3 class="anchored_heading" id="revokeexamples">Examples</h3>
<pre class="fixed"><span class="k">REVOKE</span> <span class="n">SUPER</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">FROM</span> <span class="s1">'alexander'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="revokeroles">Roles</h2>
<h3 class="anchored_heading" id="revokesyntax">Syntax</h3>
<pre class="fixed">REVOKE role  [, role ...]
    FROM grantee [, grantee2 ... ]

REVOKE ADMIN OPTION FOR role FROM grantee [, grantee2]
</pre><h3 class="anchored_heading" id="revokedescription">Description</h3>
<p><code>REVOKE</code> is also used to remove a <a style="color: #150281;" href="https://mariadb.com/kb/en/roles/">role</a> from a user or another role that it's previously been assigned to. If a role has previously been set as a <a href="#set-default-role">default role</a>, <code>REVOKE</code> does not remove the record of the default role from the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a> table. If the role is subsequently granted again, it will again be the user's default. Use <a href="#set-default-role">SET DEFAULT ROLE NONE</a> to explicitly remove this.</p>
<p>Before <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10113-release-notes/">MariaDB 10.1.13</a>, the <code>REVOKE role</code> statement was not permitted in <a style="color: #150281;" href="https://mariadb.com/kb/en/prepared-statements/">prepared statements</a>.</p>
<h3 class="anchored_heading" id="revokeexample">Example</h3>
<pre class="fixed"><span class="k">REVOKE</span> <span class="n">journalist</span> <span class="k">FROM</span> <span class="n">hulda</span>
</pre>
    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="set-password">1.1.1.7 SET PASSWORD</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="set-passwordsyntax">Syntax</h2>
<pre class="fixed">SET PASSWORD [FOR user] =
    {
        PASSWORD('some password')
      | OLD_PASSWORD('some password')
      | 'encrypted password'
    }
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class="mariadb_from_10_4"><a href="#set-passwordsyntax" title="Syntax">Syntax</a></li>

    <li class="mariadb_from_10_4"><a href="#set-passworddescription" title="Description">Description</a></li>

    <li class="mariadb_from_10_4"><a href="#set-passwordauthentication-plugin-support" title="Authentication Plugin Support">Authentication Plugin Support</a></li>

    <li class="mariadb_from_10_4"><a href="#set-passwordpasswordless-user-accounts" title="Passwordless User Accounts">Passwordless User Accounts</a></li>

    <li class="mariadb_from_10_4"><a href="#set-passwordexample" title="Example">Example</a></li>

    <li class="mariadb_from_10_4"><a href="#set-passwordsee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="set-passworddescription">Description</h2>
<p>The <code>SET PASSWORD</code> statement assigns a password to an existing MariaDB user
account.</p>
<p>If the password is specified using the <code><a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD()</a></code> or <code><a style="color: #150281;" href="https://mariadb.com/kb/en/old_password/">OLD_PASSWORD()</a></code>
function, the literal text of the password should be given. If the
password is specified without using either function, the password
should be the already-encrypted password value as returned by
<code><a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD()</a></code>.</p>
<p><code><a style="color: #150281;" href="https://mariadb.com/kb/en/old_password/">OLD_PASSWORD()</a></code> should only be used if your MariaDB/MySQL clients are very old (&lt; 4.0.0).</p>
<p>With no <code>FOR</code> clause, this statement sets the password for the current
user. Any client that has connected to the server using a non-anonymous
account can change the password for that account.</p>
<p>With a <code>FOR</code> clause, this statement sets the password for a specific
account on the current server host. Only clients that have the <code>UPDATE</code>
privilege for the <code>mysql</code> database can do this. The user value should be
given in <code class="fixed" style="white-space:pre-wrap">user_name@host_name</code> format, where <code>user_name</code> and <code>host_name</code> are
exactly as they are listed in the User and Host columns of the
<code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a></code> table entry. </p>
<p>The argument to <code><a style="color: #150281;" href="https://mariadb.com/kb/en/password/">PASSWORD()</a></code> and the password given to MariaDB clients can be of arbitrary length.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="set-passwordauthentication-plugin-support">Authentication Plugin Support</h2>
<div class="mariadb_from_10_4 mariadb from_10_4 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-104/">10.4</a></h5><p>In <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-104/">MariaDB 10.4</a> and later, <code>SET PASSWORD</code> (with or without <code>PASSWORD()</code>) works for accounts authenticated via any <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugins/">authentication plugin</a> that supports passwords stored in the <code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlglobal_priv-table/">mysql.global_priv</a></code> table.</p>
<p>The <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-ed25519/">ed25519</a></code>, <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_native_password/">mysql_native_password</a></code>, and <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_old_password/">mysql_old_password</a></code> authentication plugins store passwords in the <code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlglobal_priv-table/">mysql.global_priv</a></code> table.</p>
<p>If you run <code>SET PASSWORD</code> on an account that authenticates with one of these authentication plugins that stores passwords in the <code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlglobal_priv-table/">mysql.global_priv</a></code> table, then the <code>PASSWORD()</code> function is evaluated by the specific authentication plugin used by the account. The authentication plugin hashes the password with a method that is compatible with that specific authentication plugin.</p>
<p>The <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-unix-socket/">unix_socket</a></code>, <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-named-pipe/">named_pipe</a></code>, <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-gssapi/">gssapi</a></code>, and <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/">pam</a></code> authentication plugins do <strong>not</strong> store passwords in the <code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlglobal_priv-table/">mysql.global_priv</a></code> table. These authentication plugins rely on other methods to authenticate the user.</p>
<p>If you attempt to run <code>SET PASSWORD</code> on an account that authenticates with one of these authentication plugins that doesn't store a password in the <code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlglobal_priv-table/">mysql.global_priv</a></code> table, then MariaDB Server will raise a warning like the following:</p>
<pre class="fixed">SET PASSWORD is ignored for users authenticating via unix_socket plugin
</pre><p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-from-mariadb-104/">Authentication from MariaDB 10.4</a> for an overview of authentication changes in <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-104/">MariaDB 10.4</a>.</p>
</div><div class="mariadb_to_10_3 mariadb to_10_3 product"><h5 >MariaDB until <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-103/">10.3</a></h5><p>In <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-103/">MariaDB 10.3</a> and before, <code>SET PASSWORD</code> (with or without <code>PASSWORD()</code>) only works for accounts authenticated via <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_native_password/">mysql_native_password</a></code> or <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_old_password/">mysql_old_password</a></code> authentication plugins</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="set-passwordpasswordless-user-accounts">Passwordless User Accounts</h2>
<p>User accounts do not always require passwords to login.</p>
<p>The <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-unix-socket/">unix_socket</a></code> ,  <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-named-pipe/">named_pipe</a></code> and <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-gssapi/">gssapi</a></code> authentication plugins do not require a password to authenticate the user.</p>
<p>The <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-pam/">pam</a></code> authentication plugin may or may not require a password to authenticate the user, depending on the specific configuration.</p>
<p>The <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_native_password/">mysql_native_password</a></code> and <code><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-plugin-mysql_old_password/">mysql_old_password</a></code> authentication plugins require passwords for authentication, but the password can be blank. In that case, no password is required.</p>
<p>If you provide a password while attempting to log into the server as an account that doesn't require a password, then MariaDB server will simply ignore the password.</p>
<div class="mariadb_from_10_4 mariadb from_10_4 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-104/">10.4</a></h5><p>In <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-104/">MariaDB 10.4</a> and later, a user account can be defined to use multiple authentication plugins in a specific order of preference. This specific scenario may be more noticeable in these versions, since an account could be associated with some authentication plugins that require a password, and some that do not.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="set-passwordexample">Example</h2>
<p>For example, if you had an entry with User and
Host column values of '<code class="fixed" style="white-space:pre-wrap">bob</code>' and 
'<code class="fixed" style="white-space:pre-wrap">%.loc.gov</code>', you would write the
statement like this:</p>
<pre class="fixed"><span class="k">SET</span> <span class="n">PASSWORD</span> <span class="k">FOR</span> <span class="s1">'bob'</span><span class="o">@</span><span class="s1">'%.loc.gov'</span> <span class="o">=</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="s1">'newpass'</span><span class="p">);</span>
</pre><p>If you want to delete a password for a user, you would do:</p>
<pre class="fixed"><span class="k">SET</span> <span class="n">PASSWORD</span> <span class="k">FOR</span> <span class="s1">'bob'</span><span class="o">@</span><span class="n">localhost</span> <span class="o">=</span> <span class="n">PASSWORD</span><span class="p">(</span><span class="ss">""</span><span class="p">);</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="set-passwordsee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/password-validation-plugins/">Password Validation Plugins</a> - permits the setting of basic criteria for passwords
</li><li><code><a href="#alter-user">ALTER USER</a></code></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="create-role">1.1.1.8 CREATE ROLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="create-rolesyntax">Syntax</h2>
<pre class="fixed">CREATE [OR REPLACE] ROLE [IF NOT EXISTS] role 
  [WITH ADMIN 
    {CURRENT_USER | CURRENT_ROLE | user | role}]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#create-rolesyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#create-roledescription" title="Description">Description</a>    <ol class="toc">

        <li class=""><a href="#create-rolewith-admin" title="WITH ADMIN">WITH ADMIN</a></li>

        <li class=""><a href="#create-roleor-replace" title="OR REPLACE">OR REPLACE</a></li>

        <li class=""><a href="#create-roleif-not-exists" title="IF NOT EXISTS">IF NOT EXISTS</a>    </li></ol>
</li>

    <li class=""><a href="#create-roleexamples" title="Examples">Examples</a></li>

    <li class=""><a href="#create-rolesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-roledescription">Description</h2>
<p>The <code>CREATE ROLE</code> statement creates one or more MariaDB <a style="color: #150281;" href="https://mariadb.com/kb/en/roles/">roles</a>. To
use it, you must have the global <a href="#grantcreate-user">CREATE USER</a>
privilege or the <a href="#granttable-privileges">INSERT</a> privilege for the mysql
database. For each account, <code>CREATE ROLE</code> creates a new row in the
<a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a> table that has no privileges, and with the
corresponding <code>is_role</code> field set to <code>Y</code>. It also creates a record in the
<a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlroles_mapping-table/">mysql.roles_mapping</a> table.</p>
<p>If any of the specified roles already exist, <code>ERROR 1396 (HY000)</code> results. If
an error occurs, <code>CREATE ROLE</code> will still create the roles that do not result
in an error. The maximum length for a role is 128 characters. Role names can be
quoted, as explained in the <a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-names/">Identifier names</a> page. Only
one error is produced for all roles which have not been created:</p>
<pre class="fixed">ERROR 1396 (HY000): Operation CREATE ROLE failed for 'a','b','c'
</pre><p>Failed <code>CREATE</code> or <code>DROP</code> operations, for both users and roles, produce the
same error code.</p>
<p><code>PUBLIC</code> and <code>NONE</code> are reserved, and cannot be used as role names. <code>NONE</code> is used to <a href="#set-role">unset a role</a> and <code>PUBLIC</code> has a special use in other systems, such as Oracle, so is reserved for compatibility purposes.</p>
<p>Before <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10113-release-notes/">MariaDB 10.1.13</a>, the <code>CREATE ROLE</code> statement was not permitted in <a style="color: #150281;" href="https://mariadb.com/kb/en/prepared-statements/">prepared statements</a>.</p>
<p>For valid identifiers to use as role names, see <a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-names/">Identifier Names</a>.</p>
<h4 class="anchored_heading" id="create-rolewith-admin">WITH ADMIN</h4>
<p>The optional <code>WITH ADMIN</code> clause determines whether the current user, the
current role or another user or role has use of the newly created role. If the
clause is omitted, <code>WITH ADMIN CURRENT_USER</code> is treated as the default, which
means that the current user will be able to <a href="#grantroles">GRANT</a> this role to
users.</p>
<h4 class="anchored_heading" id="create-roleor-replace">OR REPLACE</h4>
<p>If the optional <code>OR REPLACE</code> clause is used, it acts as a shortcut for:</p>
<pre class="fixed"><span class="k">DROP</span> <span class="n">ROLE</span> <span class="k">IF</span> <span class="k">EXISTS</span> <span class="n">name</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="n">ROLE</span> <span class="n">name</span> <span class="p">...;</span>
</pre><h4 class="anchored_heading" id="create-roleif-not-exists">IF NOT EXISTS</h4>
<p>When the <code>IF NOT EXISTS</code> clause is used, MariaDB will return a warning instead of an error if the specified role already exists. Cannot be used together with the <code>OR REPLACE</code> clause.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-roleexamples">Examples</h2>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">ROLE</span> <span class="n">journalist</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">ROLE</span> <span class="n">developer</span> <span class="k">WITH</span> <span class="k">ADMIN</span> <span class="n">lorinda</span><span class="o">@</span><span class="n">localhost</span><span class="p">;</span>
</pre><p>Granting the role to another user. Only user <code>lorinda@localhost</code> has permission to grant the <code>developer</code> role:</p>
<pre class="fixed"> <span class="k">SELECT</span> <span class="k">USER</span><span class="p">();</span>
<span class="o">+</span><span class="c1">-------------------+</span>
<span class="o">|</span> <span class="k">USER</span><span class="p">()</span>            <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------------+</span>
<span class="o">|</span> <span class="n">henning</span><span class="o">@</span><span class="n">localhost</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------------+</span>
<span class="p">...</span>
<span class="k">GRANT</span> <span class="n">developer</span> <span class="k">TO</span> <span class="n">ian</span><span class="o">@</span><span class="n">localhost</span><span class="p">;</span>
<span class="k">Access</span> <span class="n">denied</span> <span class="k">for</span> <span class="k">user</span> <span class="s1">'henning'</span><span class="o">@</span><span class="s1">'localhost'</span>

 <span class="k">SELECT</span> <span class="k">USER</span><span class="p">();</span>
<span class="o">+</span><span class="c1">-------------------+</span>
<span class="o">|</span> <span class="k">USER</span><span class="p">()</span>            <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------------+</span>
<span class="o">|</span> <span class="n">lorinda</span><span class="o">@</span><span class="n">localhost</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-------------------+</span>

<span class="k">GRANT</span> <span class="n">m_role</span> <span class="k">TO</span> <span class="n">ian</span><span class="o">@</span><span class="n">localhost</span><span class="p">;</span>
</pre><p>The <code>OR REPLACE</code> and <code>IF NOT EXISTS</code> clauses. The <code>journalist</code> role already exists:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">ROLE</span> <span class="n">journalist</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">1396</span> <span class="p">(</span><span class="n">HY000</span><span class="p">):</span> <span class="k">Operation</span> <span class="k">CREATE</span> <span class="k">ROLE</span> <span class="n">failed</span> <span class="k">for</span> <span class="s1">'journalist'</span>

<span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">ROLE</span> <span class="n">journalist</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="k">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>

<span class="k">CREATE</span> <span class="k">ROLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">journalist</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="k">rows</span> <span class="n">affected</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>
</pre><pre class="fixed">SHOW WARNINGS;
+-------+------+---------------------------------------------------+
| Level | Code | Message                                           |
+-------+------+---------------------------------------------------+
| Note  | 1975 | Can't create role 'journalist'; it already exists |
+-------+------+---------------------------------------------------+

</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="create-rolesee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-names/">Identifier Names</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/roles-overview/">Roles Overview</a>
</li><li><a href="#drop-role">DROP ROLE</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="drop-role">1.1.1.9 DROP ROLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="drop-rolesyntax">Syntax</h2>
<pre class="fixed">DROP ROLE [IF EXISTS] role_name [,role_name ...]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#drop-rolesyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#drop-roledescription" title="Description">Description</a>    <ol class="toc">

        <li class=""><a href="#drop-roleif-exists" title="IF EXISTS">IF EXISTS</a>    </li></ol>
</li>

    <li class=""><a href="#drop-roleexamples" title="Examples">Examples</a></li>

    <li class=""><a href="#drop-rolesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="drop-roledescription">Description</h2>
<p>The <code>DROP ROLE</code> statement removes one or more MariaDB <a style="color: #150281;" href="https://mariadb.com/kb/en/roles/">roles</a>. To use this
statement, you must have the global <a href="#grantcreate-user">CREATE USER</a> privilege or
the <a href="#granttable-privileges">DELETE</a> privilege for the mysql database.</p>
<p><code>DROP ROLE</code> does not disable roles for connections which selected them with <a href="#set-role">SET ROLE</a>. If a role has previously been set as a <a href="#set-default-role">default role</a>, <code>DROP ROLE</code> does not remove the record of the default role from the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a> table. If the role is subsequently recreated and granted, it will again be the user's default. Use <a href="#set-default-role">SET DEFAULT ROLE NONE</a> to explicitly remove this.</p>
<p>If any of the specified user accounts do not exist, <code>ERROR 1396 (HY000)</code>
results. If an error occurs, <code>DROP ROLE</code> will still drop the roles that
do not result in an error. Only one error is produced for all roles which have not been dropped:</p>
<pre class="fixed">ERROR 1396 (HY000): Operation DROP ROLE failed for 'a','b','c'
</pre><p>Failed <code>CREATE</code> or <code>DROP</code> operations, for both users and roles, produce the same error code.</p>
<p>Before <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10113-release-notes/">MariaDB 10.1.13</a>, the <code>DROP ROLE</code> statement was not permitted in <a style="color: #150281;" href="https://mariadb.com/kb/en/prepared-statements/">prepared statements</a>.</p>
<h4 class="anchored_heading" id="drop-roleif-exists">IF EXISTS</h4>
<p>If the <code>IF EXISTS</code> clause is used, MariaDB will return a warning instead of an error if the role does not exist.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="drop-roleexamples">Examples</h2>
<pre class="fixed"><span class="k">DROP</span> <span class="n">ROLE</span> <span class="n">journalist</span><span class="p">;</span>
</pre><p>The same thing using the optional <code>IF EXISTS</code> clause:</p>
<pre class="fixed"><span class="k">DROP</span> <span class="k">ROLE</span> <span class="n">journalist</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">1396</span> <span class="p">(</span><span class="n">HY000</span><span class="p">):</span> <span class="k">Operation</span> <span class="k">DROP</span> <span class="k">ROLE</span> <span class="n">failed</span> <span class="k">for</span> <span class="s1">'journalist'</span>

<span class="k">DROP</span> <span class="k">ROLE</span> <span class="k">IF</span> <span class="k">EXISTS</span> <span class="n">journalist</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="k">rows</span> <span class="n">affected</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">Note</span> <span class="p">(</span><span class="n">Code</span> <span class="mi">1975</span><span class="p">):</span> <span class="n">Can</span><span class="s1">'t drop role '</span><span class="n">journalist</span><span class="s1">'; it doesn'</span><span class="n">t</span> <span class="n">exist</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="drop-rolesee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/roles-overview/">Roles Overview</a>
</li><li><a href="#create-role">CREATE ROLE</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="set-role">1.1.1.10 SET ROLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="set-rolesyntax">Syntax</h2>
<pre class="fixed">SET ROLE { role | NONE }
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#set-rolesyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#set-roledescription" title="Description">Description</a></li>

    <li class=""><a href="#set-roleexample" title="Example">Example</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="set-roledescription">Description</h2>
<p>The <code>SET ROLE</code> statement enables a <a style="color: #150281;" href="https://mariadb.com/kb/en/roles/">role</a>, along with all of its associated permissions, for the current session. To unset a role, use <code>NONE</code> .</p>
<p>If a role that doesn't exist, or to which the user has not been assigned, is specified, an <code>ERROR 1959 (OP000): Invalid role specification</code> error occurs.</p>
<p>An automatic SET ROLE is implicitly performed when a user connects if that user has been assigned a default role. See <a href="#set-default-role">SET DEFAULT ROLE</a>.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="set-roleexample">Example</h2>
<pre class="fixed"><span class="k">SELECT</span> <span class="k">CURRENT_ROLE</span><span class="p">;</span>
<span class="o">+</span><span class="c1">--------------+</span>
<span class="o">|</span> <span class="k">CURRENT_ROLE</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------+</span>
<span class="o">|</span> <span class="k">NULL</span>         <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------+</span>

<span class="k">SET</span> <span class="k">ROLE</span> <span class="n">staff</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="k">CURRENT_ROLE</span><span class="p">;</span>
<span class="o">+</span><span class="c1">--------------+</span>
<span class="o">|</span> <span class="k">CURRENT_ROLE</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------+</span>
<span class="o">|</span> <span class="n">staff</span>        <span class="o">|</span>
<span class="o">+</span><span class="c1">--------------+</span>

<span class="k">SET</span> <span class="k">ROLE</span> <span class="k">NONE</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="k">CURRENT_ROLE</span><span class="p">();</span>
<span class="o">+</span><span class="c1">----------------+</span>
<span class="o">|</span> <span class="k">CURRENT_ROLE</span><span class="p">()</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------+</span>
<span class="o">|</span> <span class="k">NULL</span>           <span class="o">|</span>
<span class="o">+</span><span class="c1">----------------+</span>
</pre>
    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="set-default-role">1.1.1.11 SET DEFAULT ROLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#set-default-rolesyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#set-default-roledescription" title="Description">Description</a></li>

    <li class=""><a href="#set-default-roleexamples" title="Examples">Examples</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="set-default-rolesyntax">Syntax</h2>
<pre class="fixed">SET DEFAULT ROLE { role | NONE } [ FOR user@host ]
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="set-default-roledescription">Description</h2>
<p>The <code>SET DEFAULT ROLE</code> statement sets a <strong>default <a style="color: #150281;" href="https://mariadb.com/kb/en/roles/">role</a></strong> for a specified (or current) user. A default role is automatically enabled when a user connects (an implicit <a href="#set-role">SET ROLE</a> statement is executed immediately after a connection is established).</p>
<p>To be able to set a role as a default, the role must already have been granted to that user, and one needs the privileges to enable this role (if you cannot do <code>SET ROLE X</code>, you won't be able to do <code>SET DEFAULT ROLE X</code>). To set a default role for another user one needs to have write access to the <code>mysql</code> database.</p>
<p>To remove a user's default role, use <code>SET DEFAULT ROLE NONE [ FOR user@host ]</code>. The record of the default role is not removed if the role is <a href="#drop-role">dropped</a> or <a href="#revokeroles">revoked</a>, so if the role is subsequently re-created or granted, it will again be the user's default role.</p>
<p>The default role is stored in the <code>default_role</code> column in the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqluser-table/">mysql.user</a> table/view, as well as in the <a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-applicable_roles-table/">Information Schema APPLICABLE_ROLES table</a>, so these can be viewed to see which role has been assigned to a user as the default. </p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="set-default-roleexamples">Examples</h2>
<p>Setting a default role for the current user:</p>
<pre class="fixed"><span class="k">SET</span> <span class="k">DEFAULT</span> <span class="k">ROLE</span> <span class="n">journalist</span><span class="p">;</span>
</pre><p>Removing a default role from the current user:</p>
<pre class="fixed"><span class="k">SET</span> <span class="k">DEFAULT</span> <span class="k">ROLE</span> <span class="k">NONE</span><span class="p">;</span>
</pre><p>Setting a default role for another user. The role has to have been granted to the user before it can be set as default:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">ROLE</span> <span class="n">journalist</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">USER</span> <span class="n">taniel</span><span class="p">;</span>

<span class="k">SET</span> <span class="k">DEFAULT</span> <span class="k">ROLE</span> <span class="n">journalist</span> <span class="k">FOR</span> <span class="n">taniel</span><span class="p">;</span>
<span class="n">ERROR</span> <span class="mi">1959</span> <span class="p">(</span><span class="n">OP000</span><span class="p">):</span> <span class="n">Invalid</span> <span class="k">role</span> <span class="n">specification</span> <span class="o">`</span><span class="n">journalist</span><span class="o">`</span>

<span class="k">GRANT</span> <span class="n">journalist</span> <span class="k">TO</span> <span class="n">taniel</span><span class="p">;</span>
<span class="k">SET</span> <span class="k">DEFAULT</span> <span class="k">ROLE</span> <span class="n">journalist</span> <span class="k">FOR</span> <span class="n">taniel</span><span class="p">;</span>
</pre><p>Viewing mysql.user:</p>
<pre class="fixed">select * from mysql.user where user='taniel'\G
*************************** 1. row ***************************
                  Host: %
                  User: taniel
...
               is_role: N
          default_role: journalist
...
</pre><p>Removing a default role for another user</p>
<pre class="fixed"><span class="k">SET</span> <span class="k">DEFAULT</span> <span class="k">ROLE</span> <span class="k">NONE</span> <span class="k">FOR</span> <span class="n">taniel</span><span class="p">;</span> 
</pre>
    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="show-grants">1.1.1.12 SHOW GRANTS</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#show-grantssyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#show-grantsdescription" title="Description">Description</a>    <ol class="toc">

        <li class=""><a href="#show-grantsusers" title="Users">Users</a></li>

        <li class=""><a href="#show-grantsroles" title="Roles">Roles</a>        <ol class="toc">

            <li class=""><a href="#show-grantsexample" title="Example">Example</a>        </li></ol>
    </li></ol>
</li>

    <li class=""><a href="#show-grantssee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="show-grantssyntax">Syntax</h2>
<pre class="fixed">SHOW GRANTS [FOR user|role]
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="show-grantsdescription">Description</h2>
<p>The <code>SHOW GRANTS</code> statement lists privileges granted to a particular user or role.</p>
<h3 class="anchored_heading" id="show-grantsusers">Users</h3>
<p>The statement lists the <a href="#grant">GRANT</a> statement or
statements that must be issued to duplicate the privileges that are granted to
a MariaDB user account. The account is named using the same format as for the
<code class="fixed" style="white-space:pre-wrap">GRANT</code> statement; for example,
'<code class="fixed" style="white-space:pre-wrap">jeffrey'@'localhost</code>'. If you specify only the user name part
of the account name, a host name part of '<code class="fixed" style="white-space:pre-wrap">%</code>' is used.  For
additional information about specifying account names, see
<a href="#grant">GRANT</a>.</p>
<pre class="fixed">SHOW GRANTS FOR 'root'@'localhost';
+---------------------------------------------------------------------+
| Grants for root@localhost                                           |
+---------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION |
+---------------------------------------------------------------------+
</pre><p>To list the privileges granted to the account that you are using to
connect to the server, you can use any of the following statements:</p>
<pre class="fixed"><span class="k">SHOW</span> <span class="n">GRANTS</span><span class="p">;</span>
<span class="k">SHOW</span> <span class="n">GRANTS</span> <span class="k">FOR</span> <span class="k">CURRENT_USER</span><span class="p">;</span>
<span class="k">SHOW</span> <span class="n">GRANTS</span> <span class="k">FOR</span> <span class="k">CURRENT_USER</span><span class="p">();</span>
</pre><p>If <code class="highlight fixed" style="white-space:pre-wrap">SHOW GRANTS FOR CURRENT_USER</code> (or any
of the equivalent syntaxes) is used in <code class="highlight fixed" style="white-space:pre-wrap">DEFINER</code> context (such
as within a stored procedure that is defined with 
 <code class="highlight fixed" style="white-space:pre-wrap">SQL SECURITY DEFINER</code>), the grants displayed are those of the
definer and not the invoker.</p>
<p>Note that the <code>DELETE HISTORY</code> privilege, introduced in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1034-release-notes/">MariaDB 10.3.4</a>, was displayed as <code>DELETE VERSIONING ROWS</code> when running <code>SHOW GRANTS</code> until <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10315-release-notes/">MariaDB 10.3.15</a> (<a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-17655">MDEV-17655</a>).</p>
<h3 class="anchored_heading" id="show-grantsroles">Roles</h3>
<p><code>SHOW GRANTS</code> can also be used to view the privileges granted to a <a style="color: #150281;" href="https://mariadb.com/kb/en/roles/">role</a>.</p>
<h4 class="anchored_heading" id="show-grantsexample">Example</h4>
<pre class="fixed">SHOW GRANTS FOR journalist;
+------------------------------------------+
| Grants for journalist                    |
+------------------------------------------+
| GRANT USAGE ON *.* TO 'journalist'       |
| GRANT DELETE ON `test`.* TO 'journalist' |
+------------------------------------------+
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="show-grantssee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/authentication-from-mariadb-104/">Authentication from MariaDB 10.4</a>
</li><li><a href="#show-create-user">SHOW CREATE USER</a> shows how the user was created.
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-privileges/">SHOW PRIVILEGES</a> shows the privileges supported by MariaDB.
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/roles/">Roles</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="show-create-user">1.1.1.13 SHOW CREATE USER</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="mariadb_from_10_2_0 mariadb from_10_2_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1020-release-notes/">10.2.0</a></h5><p><code>SHOW CREATE USER</code> was introduced in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1020-release-notes/">MariaDB 10.2.0</a></p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="syntax">Syntax</h2>
<pre class="fixed">SHOW CREATE USER user_name
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="description">Description</h2>
<p>Shows the <a href="#create-user">CREATE USER</a> statement that created the given
user. The statement requires the <a href="#granttable-privileges">SELECT</a> privilege for the <a style="color: #150281;" href="https://mariadb.com/kb/en/the-mysql-database-tables/">mysql</a> database, except for the current user.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="examples">Examples</h2>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="n">foo4</span><span class="o">@</span><span class="n">test</span> <span class="n">require</span> <span class="n">cipher</span> <span class="s1">'text'</span> 
  <span class="n">issuer</span> <span class="s1">'foo_issuer'</span> <span class="n">subject</span> <span class="s1">'foo_subject'</span><span class="p">;</span>

<span class="k">SHOW</span> <span class="k">CREATE</span> <span class="k">USER</span> <span class="n">foo4</span><span class="o">@</span><span class="n">test</span><span class="err">\</span><span class="k">G</span>
<span class="o">***************************</span> <span class="mi">1</span><span class="p">.</span> <span class="k">row</span> <span class="o">***************************</span>
<span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'foo4'</span><span class="o">@</span><span class="s1">'test'</span> 
  <span class="n">REQUIRE</span> <span class="n">ISSUER</span> <span class="s1">'foo_issuer'</span> 
  <span class="n">SUBJECT</span> <span class="s1">'foo_subject'</span> 
  <span class="n">CIPHER</span> <span class="s1">'text'</span>
</pre><p><a style="color: #150281;" href="https://mariadb.com/kb/en/user-password-expiry/">User Password Expiry</a>:</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'monty'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">PASSWORD</span> <span class="n">EXPIRE</span> <span class="nb">INTERVAL</span> <span class="mi">120</span> <span class="k">DAY</span><span class="p">;</span>

<span class="k">SHOW</span> <span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'monty'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>
<span class="o">+</span><span class="c1">------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="k">CREATE</span> <span class="k">USER</span> <span class="k">for</span> <span class="n">monty</span><span class="o">@</span><span class="n">localhost</span>                                  <span class="o">|</span>
<span class="o">+</span><span class="c1">------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'monty'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">PASSWORD</span> <span class="n">EXPIRE</span> <span class="nb">INTERVAL</span> <span class="mi">120</span> <span class="k">DAY</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------------------------------------------------------------------+</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="see-also">See Also</h2>
<ul start="1"><li><a href="#create-user">CREATE USER</a>
</li><li><a href="#alter-user">ALTER USER</a>
</li><li><a href="#show-grants">SHOW GRANTS</a> shows the <code>GRANTS/PRIVILEGES</code> for a user.
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-privileges/">SHOW PRIVILEGES</a> shows the privileges supported by MariaDB.</li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section>
<h1 class="col-md-8" style="margin-top:0px;" id="administrative-sql-statements">1.1.2 Administrative SQL Statements</h1>
<section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="table-statements">1.1.2.1 
        Table Statements
    
</h1>
                

                



                <div>
                    
    
    

    

    

    

    

    
        <div class="creole">
            <p>Articles about creating, modifying, and maintaining tables in MariaDB.</p>

        </div>
    

    

        
            
    
    <ul class="media-list listing" data-order-url="/kb/en/table-statements/+change_order">
                
                
    
        
    
    <li class="media node category product no_product_class not_primary" data-node-id="243" id="node_243">
        <div class="media-left left-box">
        <a class="" href="#alter">
            <div class="category print-background">
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#alter">
            <h4 class="media-heading">
                ALTER</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Data Definition</span>
    



            </div>
            
            <span class="blurb">
                The various ALTER statements in MariaDB.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="658" id="node_658">
        <div class="media-left left-box">
        <a class="" href="#analyze-table">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="3comments">3</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#analyze-table">
            <h4 class="media-heading">
                ANALYZE TABLE</h4>
            
            <span class="blurb">
                Store key distributions for a table.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="660" id="node_660">
        <div class="media-left left-box">
        <a class="" href="#check-table">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="1comment">1</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#check-table">
            <h4 class="media-heading">
                CHECK TABLE</h4>
            
            <span class="blurb">
                Check table for errors.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="4986" id="node_4986">
        <div class="media-left left-box">
        <a class="" href="#check-view">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#check-view">
            <h4 class="media-heading">
                CHECK VIEW</h4>
            
            <span class="blurb">
                Check whether the view algorithm is correct.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="661" id="node_661">
        <div class="media-left left-box">
        <a class="" href="#checksum-table">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="1comment">1</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#checksum-table">
            <h4 class="media-heading">
                CHECKSUM TABLE</h4>
            
            <span class="blurb">
                Report a table checksum.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_2_1 mariadb from_10_2_1 mariadb_from_10_3_3 mariadb from_10_3_3 mariadb_from_10_3_3 mariadb from_10_3_3 mariadb_from_10_3_3 mariadb from_10_3_3 mariadb_from_10_3_4 mariadb from_10_3_4 mariadb_from_10_3_4 mariadb from_10_3_4 mariadb_from_10_6_0 mariadb from_10_6_0 mariadb_from_10_3_4 mariadb from_10_3_4 mariadb_from_10_2_1 mariadb from_10_2_1 mariadb_from_10_3 mariadb from_10_3 mariadb_from_10_3 mariadb from_10_3 mariadb_from_10_6_1 mariadb from_10_6_1 mariadb_from_10_2_1 mariadb from_10_2_1 mariadb_from_10_3_3 mariadb from_10_3_3 mariadb_from_10_3_3 mariadb from_10_3_3 mariadb_from_10_3_3 mariadb from_10_3_3 mariadb_from_10_3_4 mariadb from_10_3_4 mariadb_from_10_3_4 mariadb from_10_3_4 mariadb_from_10_6_0 mariadb from_10_6_0 mariadb_from_10_3_4 mariadb from_10_3_4 mariadb_from_10_2_1 mariadb from_10_2_1 mariadb_from_10_3 mariadb from_10_3 mariadb_from_10_3 mariadb from_10_3 mariadb_from_10_6_1 mariadb from_10_6_1 not_primary" data-node-id="241" id="node_241">
        <div class="media-left left-box">
        <a class="" href="#create-table">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="7comments">7</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#create-table">
            <h4 class="media-heading">
                CREATE TABLE</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Data Definition</span>
    

    
    » <span class="crumb">CREATE</span>
    



            </div>
            
            <span class="blurb">
                Creates a new table.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_4_3 mariadb from_10_4_3 mariadb_from_10_3_1 mariadb from_10_3_1 mariadb_from_10_3_4 mariadb from_10_3_4 mariadb_from_10_4_3 mariadb from_10_4_3 mariadb_from_10_3_1 mariadb from_10_3_1 mariadb_from_10_3_4 mariadb from_10_3_4 not_primary" data-node-id="676" id="node_676">
        <div class="media-left left-box">
        <a class="" href="#delete">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="2comments">2</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#delete">
            <h4 class="media-heading">
                DELETE</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Data Manipulation</span>
    

    
    » <span class="crumb">Changing &amp; Deleting Data</span>
    



            </div>
            
            <span class="blurb">
                Delete rows from one or more tables.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_5_4 mariadb from_10_5_4 mariadb_from_10_5_4 mariadb from_10_5_4 mariadb_from_10_3_1 mariadb from_10_3_1 mariadb_from_10_6_1 mariadb from_10_6_1 mariadb_from_10_3_1 mariadb from_10_3_1 mariadb_from_10_6_1 mariadb from_10_6_1 not_primary" data-node-id="586" id="node_586">
        <div class="media-left left-box">
        <a class="" href="#drop-table">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#drop-table">
            <h4 class="media-heading">
                DROP TABLE</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Data Definition</span>
    

    
    » <span class="crumb">DROP</span>
    



            </div>
            
            <span class="blurb">
                Removes definition and data from one or more tables.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class not_primary" data-node-id="917" id="node_917">
        <div class="media-left left-box">
        <a class="" href="#installing-system-tables-mysql_install_db">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#installing-system-tables-mysql_install_db">
            <h4 class="media-heading">
                Installing System Tables (mysql_install_db)</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">MariaDB Administration</span>
    

    
    » <span class="crumb">Getting, Installing, and Upgrading MariaDB</span>
    



            </div>
            
            <span class="blurb">
                Using mysql_install_db to create the system tables in the 'mysql' database directory

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_4_6 mariadb from_10_4_6 mariadb_from_10_5_2 mariadb from_10_5_2 mariadb_from_10_4_6 mariadb from_10_4_6 mariadb_from_10_5_2 mariadb from_10_5_2" data-node-id="912" id="node_912">
        <div class="media-left left-box">
        <a class="" href="#mysqlcheck">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#mysqlcheck">
            <h4 class="media-heading">
                mysqlcheck</h4>
            
            <span class="blurb">
                Tool for checking, repairing, analyzing and optimizing tables.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_4_6 mariadb from_10_4_6 mariadb_from_10_5_2 mariadb from_10_5_2 mariadb_from_10_2_42 mariadb from_10_2_42 mariadb_from_10_4_6 mariadb from_10_4_6 mariadb_from_10_5_2 mariadb from_10_5_2 mariadb_from_10_2_42 mariadb from_10_2_42" data-node-id="913" id="node_913">
        <div class="media-left left-box">
        <a class="" href="https://mariadb.com/kb/en/mysql_upgrade/">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="2comments">2</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="https://mariadb.com/kb/en/mysql_upgrade/">
            <h4 class="media-heading">
                mysql_upgrade</h4>
            
            <span class="blurb">
                Update to the latest version.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_3_0 mariadb from_10_3_0 mariadb_from_10_3_0 mariadb from_10_3_0 not_primary" data-node-id="662" id="node_662">
        <div class="media-left left-box">
        <a class="" href="#optimize-table">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="4comments">4</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#optimize-table">
            <h4 class="media-heading">
                OPTIMIZE TABLE</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">High Availability &amp; Performance Tuning</span>
    

    
    » <span class="crumb">Optimization and Tuning</span>
    

    
    » <span class="crumb">Optimizing Tables</span>
    



            </div>
            
            <span class="blurb">
                Reclaim unused space and defragment data.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_5_2 mariadb from_10_5_2 mariadb_from_10_5_2 mariadb from_10_5_2 mariadb_from_10_3_0 mariadb from_10_3_0 mariadb_from_10_6_1 mariadb from_10_6_1 mariadb_from_10_3_0 mariadb from_10_3_0 mariadb_from_10_6_1 mariadb from_10_6_1 not_primary" data-node-id="591" id="node_591">
        <div class="media-left left-box">
        <a class="" href="#rename-table">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="1comment">1</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#rename-table">
            <h4 class="media-heading">
                RENAME TABLE</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Data Definition</span>
    



            </div>
            
            <span class="blurb">
                Change a table's name.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="663" id="node_663">
        <div class="media-left left-box">
        <a class="" href="#repair-table">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#repair-table">
            <h4 class="media-heading">
                REPAIR TABLE</h4>
            
            <span class="blurb">
                Rapairs a table, if the storage engine supports this statement.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class" data-node-id="4984" id="node_4984">
        <div class="media-left left-box">
        <a class="" href="#repair-view">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#repair-view">
            <h4 class="media-heading">
                REPAIR VIEW</h4>
            
            <span class="blurb">
                Fix view if the algorithms are swapped.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_5_0 mariadb from_10_5_0 mariadb_from_10_5_0 mariadb from_10_5_0 not_primary" data-node-id="854" id="node_854">
        <div class="media-left left-box">
        <a class="" href="#replace">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="1comment">1</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#replace">
            <h4 class="media-heading">
                REPLACE</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Data Manipulation</span>
    

    
    » <span class="crumb">Changing &amp; Deleting Data</span>
    



            </div>
            
            <span class="blurb">
                Equivalent to DELETE + INSERT, or just an INSERT if no rows are returned.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class not_primary" data-node-id="790" id="node_790">
        <div class="media-left left-box">
        <a class="" href="#show-columns">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#show-columns">
            <h4 class="media-heading">
                SHOW COLUMNS</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Administrative SQL Statements</span>
    

    
    » <span class="crumb">SHOW</span>
    



            </div>
            
            <span class="blurb">
                Column information.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_2_1 mariadb from_10_2_1 mariadb_from_10_2_2 mariadb from_10_2_2 mariadb_from_10_2_1 mariadb from_10_2_1 mariadb_from_10_2_2 mariadb from_10_2_2 not_primary" data-node-id="796" id="node_796">
        <div class="media-left left-box">
        <a class="" href="#show-create-table">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#show-create-table">
            <h4 class="media-heading">
                SHOW CREATE TABLE</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Administrative SQL Statements</span>
    

    
    » <span class="crumb">SHOW</span>
    



            </div>
            
            <span class="blurb">
                Shows the CREATE TABLE statement that created the table.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class not_primary" data-node-id="805" id="node_805">
        <div class="media-left left-box">
        <a class="" href="#show-index">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#show-index">
            <h4 class="media-heading">
                SHOW INDEX</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Administrative SQL Statements</span>
    

    
    » <span class="crumb">SHOW</span>
    



            </div>
            
            <span class="blurb">
                Information about table indexes.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_3_0 mariadb from_10_3_0 mariadb_from_10_3_0 mariadb from_10_3_0" data-node-id="677" id="node_677">
        <div class="media-left left-box">
        <a class="" href="#truncate-table">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#truncate-table">
            <h4 class="media-heading">
                TRUNCATE TABLE</h4>
            
            <span class="blurb">
                DROP and re-CREATE a table.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_4_3 mariadb from_10_4_3 mariadb_from_10_4_3 mariadb from_10_4_3 mariadb_from_10_3_2 mariadb from_10_3_2 mariadb_from_10_3_2 mariadb from_10_3_2 not_primary" data-node-id="672" id="node_672">
        <div class="media-left left-box">
        <a class="" href="#update">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="2comments">2</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="#update">
            <h4 class="media-heading">
                UPDATE</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Data Manipulation</span>
    

    
    » <span class="crumb">Changing &amp; Deleting Data</span>
    



            </div>
            
            <span class="blurb">
                Modify rows in one or more tables.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node category product no_product_class" data-node-id="5089" id="node_5089">
        <div class="media-left left-box">
        <a class="" href="https://mariadb.com/kb/en/obsolete-table-commands/">
            <div class="category print-background">
                
            </div>
        </a>
        </div>
        <a class="media-body" href="https://mariadb.com/kb/en/obsolete-table-commands/">
            <h4 class="media-heading">
                Obsolete Table Commands</h4>
            
            <span class="blurb">
                Table commands that have been removed from MariaDB

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product no_product_class not_primary" data-node-id="1955" id="node_1955">
        <div class="media-left left-box">
        <a class="" href="https://mariadb.com/kb/en/ignore/">
            <div class="article print-background">
                
                    
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="https://mariadb.com/kb/en/ignore/">
            <h4 class="media-heading">
                IGNORE</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">SQL Statements</span>
    

    
    » <span class="crumb">Data Manipulation</span>
    

    
    » <span class="crumb">Inserting &amp; Loading Data</span>
    



            </div>
            
            <span class="blurb">
                Suppress errors while trying to violate a UNIQUE constraint.

            </span>
        </a>
    </li>

            
                
                
    
        
    
    <li class="media node article product mariadb_from_10_3_4 mariadb from_10_3_4 mariadb_from_10_3_4 mariadb from_10_3_4 mariadb_from_10_5_0 mariadb from_10_5_0 mariadb_from_10_5_0 mariadb from_10_5_0 not_primary" data-node-id="7380" id="node_7380">
        <div class="media-left left-box">
        <a class="" href="https://mariadb.com/kb/en/system-versioned-tables/">
            <div class="article print-background">
                
                    
                    
                        <div class="node_comments" title="26comments">26</div>
                    
                
            </div>
        </a>
        </div>
        <a class="media-body" href="https://mariadb.com/kb/en/system-versioned-tables/">
            <h4 class="media-heading">
                System-Versioned Tables</h4>
            
            <div class="node-breadcrumb breadcrumbs">
                under:
                


    
    » <span class="crumb">MariaDB Server Documentation</span>
    

    
    » <span class="crumb">SQL Statements &amp; Structure</span>
    

    
    » <span class="crumb">Temporal Tables</span>
    



            </div>
            
            <span class="blurb">
                System-versioned tables record the history of all changes to table data.

            </span>
        </a>
    </li>

            
            </ul>
        

        

        

        
    

    
    
        
    



                    
                </div>
            </section>
<h1 class="col-md-8" style="margin-top:0px;" id="alter">1.1.2.1.1 ALTER</h1>

<div style = "display:block; clear:both; page-break-after:always;"></div>
<section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="alter-table">1.1.2.1.1.1 ALTER TABLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tablesyntax">Syntax</h2>
<pre class="highlight fixed"><p>ALTER [ONLINE] [IGNORE] TABLE [IF EXISTS] tbl_name
    [WAIT n | NOWAIT]
    alter_specification [, alter_specification] ...</p>
<p>alter_specification:
    <a href="#create-tabletable-options">table_option</a> ...
  <code>|</code> ADD [COLUMN] [IF NOT EXISTS] col_name <a href="#create-tablecolumn-definitions">column_definition</a>
        [FIRST | AFTER col_name ]
  <code>|</code> ADD [COLUMN] [IF NOT EXISTS] (col_name <a href="#create-tablecolumn-definitions">column_definition</a>,...)
  <code>|</code> ADD {INDEX|KEY} [IF NOT EXISTS] [index_name]
        [index_type] (index_col_name,...) [index_option] ...
  <code>|</code> ADD [CONSTRAINT [symbol]] PRIMARY KEY
        [index_type] (index_col_name,...) [index_option] ...
  <code>|</code> ADD [CONSTRAINT [symbol]]
        UNIQUE [INDEX|KEY] [index_name]
        [index_type] (index_col_name,...) [index_option] ...
  <code>|</code> ADD FULLTEXT [INDEX|KEY] [index_name]
        (index_col_name,...) [index_option] ...
  <code>|</code> ADD SPATIAL [INDEX|KEY] [index_name]
        (index_col_name,...) [index_option] ...
  <code>|</code> ADD [CONSTRAINT [symbol]]
        FOREIGN KEY [IF NOT EXISTS] [index_name] (index_col_name,...)
        reference_definition
  <code>|</code> ADD PERIOD FOR SYSTEM_TIME (start_column_name, end_column_name)
  <code>|</code> ALTER [COLUMN] col_name SET DEFAULT literal | (expression)
  <code>|</code> ALTER [COLUMN] col_name DROP DEFAULT
  <code>|</code> ALTER {INDEX|KEY} index_name [NOT] INVISIBLE
  <code>|</code> CHANGE [COLUMN] [IF EXISTS] old_col_name new_col_name <a href="#create-tablecolumn-definitions">column_definition</a>
        [FIRST|AFTER col_name]
  <code>|</code> MODIFY [COLUMN] [IF EXISTS] col_name <a href="#create-tablecolumn-definitions">column_definition</a>
        [FIRST | AFTER col_name]
  <code>|</code> DROP [COLUMN] [IF EXISTS] col_name [RESTRICT|CASCADE]
  <code>|</code> DROP PRIMARY KEY
  <code>|</code> DROP {INDEX|KEY} [IF EXISTS] index_name
  <code>|</code> DROP FOREIGN KEY [IF EXISTS] fk_symbol
  <code>|</code> DROP CONSTRAINT [IF EXISTS] constraint_name
  <code>|</code> DISABLE KEYS
  <code>|</code> ENABLE KEYS
  <code>|</code> RENAME [TO] new_tbl_name
  <code>|</code> ORDER BY col_name [, col_name] ...
  <code>|</code> RENAME COLUMN old_col_name TO new_col_name
  <code>|</code> RENAME {INDEX|KEY} old_index_name TO new_index_name
  <code>|</code> CONVERT TO CHARACTER SET charset_name [COLLATE collation_name]
  <code>|</code> [DEFAULT] CHARACTER SET [=] charset_name
  <code>|</code> [DEFAULT] COLLATE [=] collation_name
  <code>|</code> DISCARD TABLESPACE
  <code>|</code> IMPORT TABLESPACE
  <code>|</code> ALGORITHM [=] {DEFAULT|INPLACE|COPY|NOCOPY|INSTANT}
  <code>|</code> LOCK [=] {DEFAULT|NONE|SHARED|EXCLUSIVE}
  <code>|</code> FORCE
  <code>|</code> partition_options
  <code>|</code> ADD PARTITION [IF NOT EXISTS] (partition_definition)
  <code>|</code> DROP PARTITION [IF EXISTS] partition_names
  <code>|</code> COALESCE PARTITION number
  <code>|</code> REORGANIZE PARTITION [partition_names INTO (partition_definitions)]
  <code>|</code> ANALYZE PARTITION partition_names
  <code>|</code> CHECK PARTITION partition_names
  <code>|</code> OPTIMIZE PARTITION partition_names
  <code>|</code> REBUILD PARTITION partition_names
  <code>|</code> REPAIR PARTITION partition_names
  <code>|</code> EXCHANGE PARTITION partition_name WITH TABLE tbl_name
  <code>|</code> REMOVE PARTITIONING
  <code>|</code> ADD SYSTEM VERSIONING
  <code>|</code> DROP SYSTEM VERSIONING</p>
<p>index_col_name:
    col_name [(length)] [ASC | DESC]</p>
<p>index_type:
    USING {BTREE | HASH | RTREE}</p>
<p>index_option:
    [ KEY_BLOCK_SIZE [=] value
  <code>|</code> index_type
  <code>|</code> WITH PARSER parser_name
  <code>|</code> COMMENT 'string'
  <code>|</code> CLUSTERING={YES| NO} ]
  [ IGNORED | NOT IGNORED ]</p>
<p>table_options:
    <a href="#create-tabletable-options">table_option</a> <code>[</code>[,] <a href="#create-tabletable-options">table_option</a>] ...</p></pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#alter-tablesyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#alter-tabledescription" title="Description">Description</a></li>

    <li class=""><a href="#alter-tableprivileges" title="Privileges">Privileges</a></li>

    <li class=""><a href="#alter-tableonline-ddl" title="Online DDL">Online DDL</a>    <ol class="toc">

        <li class=""><a href="#alter-tablealter-online-table" title="ALTER ONLINE TABLE">ALTER ONLINE TABLE</a>    </li></ol>
</li>

    <li class=""><a href="#alter-tablewaitnowait" title="WAIT/NOWAIT">WAIT/NOWAIT</a></li>

    <li class=""><a href="#alter-tableif-exists" title="IF EXISTS">IF EXISTS</a></li>

    <li class=""><a href="#alter-tablecolumn-definitions" title="Column Definitions">Column Definitions</a></li>

    <li class=""><a href="#alter-tableindex-definitions" title="Index Definitions">Index Definitions</a></li>

    <li class=""><a href="#alter-tablecharacter-sets-and-collations" title="Character Sets and Collations">Character Sets and Collations</a></li>

    <li class=""><a href="#alter-tablealter-specifications" title="Alter Specifications">Alter Specifications</a>    <ol class="toc">

        <li class=""><a href="#alter-tabletable-options" title="Table Options">Table Options</a></li>

        <li class=""><a href="#alter-tableadd-column" title="ADD COLUMN">ADD COLUMN</a></li>

        <li class=""><a href="#alter-tabledrop-column" title="DROP COLUMN">DROP COLUMN</a></li>

        <li class=""><a href="#alter-tablemodify-column" title="MODIFY COLUMN">MODIFY COLUMN</a></li>

        <li class=""><a href="#alter-tablechange-column" title="CHANGE COLUMN">CHANGE COLUMN</a></li>

        <li class=""><a href="#alter-tablealter-column" title="ALTER COLUMN">ALTER COLUMN</a></li>

        <li class=""><a href="#alter-tablerename-indexkey" title="RENAME INDEX/KEY">RENAME INDEX/KEY</a></li>

        <li class=""><a href="#alter-tablerename-column" title="RENAME COLUMN">RENAME COLUMN</a></li>

        <li class=""><a href="#alter-tableadd-primary-key" title="ADD PRIMARY KEY">ADD PRIMARY KEY</a></li>

        <li class=""><a href="#alter-tabledrop-primary-key" title="DROP PRIMARY KEY">DROP PRIMARY KEY</a></li>

        <li class=""><a href="#alter-tableadd-foreign-key" title="ADD FOREIGN KEY">ADD FOREIGN KEY</a></li>

        <li class=""><a href="#alter-tabledrop-foreign-key" title="DROP FOREIGN KEY">DROP FOREIGN KEY</a></li>

        <li class=""><a href="#alter-tableadd-index" title="ADD INDEX">ADD INDEX</a></li>

        <li class=""><a href="#alter-tabledrop-index" title="DROP INDEX">DROP INDEX</a></li>

        <li class=""><a href="#alter-tableadd-unique-index" title="ADD UNIQUE INDEX">ADD UNIQUE INDEX</a></li>

        <li class=""><a href="#alter-tabledrop-unique-index" title="DROP UNIQUE INDEX">DROP UNIQUE INDEX</a></li>

        <li class=""><a href="#alter-tableadd-fulltext-index" title="ADD FULLTEXT INDEX">ADD FULLTEXT INDEX</a></li>

        <li class=""><a href="#alter-tabledrop-fulltext-index" title="DROP FULLTEXT INDEX">DROP FULLTEXT INDEX</a></li>

        <li class=""><a href="#alter-tableadd-spatial-index" title="ADD SPATIAL INDEX">ADD SPATIAL INDEX</a></li>

        <li class=""><a href="#alter-tabledrop-spatial-index" title="DROP SPATIAL INDEX">DROP SPATIAL INDEX</a></li>

        <li class=""><a href="#alter-tableenable-disable-keys" title="ENABLE/ DISABLE KEYS">ENABLE/ DISABLE KEYS</a></li>

        <li class=""><a href="#alter-tablerename-to" title="RENAME TO">RENAME TO</a></li>

        <li class=""><a href="#alter-tableadd-constraint" title="ADD CONSTRAINT">ADD CONSTRAINT</a></li>

        <li class=""><a href="#alter-tabledrop-constraint" title="DROP CONSTRAINT">DROP CONSTRAINT</a></li>

        <li class=""><a href="#alter-tableadd-system-versioning" title="ADD SYSTEM VERSIONING">ADD SYSTEM VERSIONING</a></li>

        <li class=""><a href="#alter-tabledrop-system-versioning" title="DROP SYSTEM VERSIONING">DROP SYSTEM VERSIONING</a></li>

        <li class=""><a href="#alter-tableadd-period-for-system_time" title="ADD PERIOD FOR SYSTEM_TIME">ADD PERIOD FOR SYSTEM_TIME</a></li>

        <li class=""><a href="#alter-tableforce" title="FORCE">FORCE</a></li>

        <li class=""><a href="#alter-tableexchange-partition" title="EXCHANGE PARTITION">EXCHANGE PARTITION</a></li>

        <li class=""><a href="#alter-tablediscard-tablespace" title="DISCARD TABLESPACE">DISCARD TABLESPACE</a></li>

        <li class=""><a href="#alter-tableimport-tablespace" title="IMPORT TABLESPACE">IMPORT TABLESPACE</a></li>

        <li class=""><a href="#alter-tablealgorithm" title="ALGORITHM">ALGORITHM</a>        <ol class="toc">

            <li class=""><a href="#alter-tablealgorithmdefault" title="ALGORITHM=DEFAULT">ALGORITHM=DEFAULT</a></li>

            <li class=""><a href="#alter-tablealgorithmcopy" title="ALGORITHM=COPY">ALGORITHM=COPY</a></li>

            <li class=""><a href="#alter-tablealgorithminplace" title="ALGORITHM=INPLACE">ALGORITHM=INPLACE</a></li>

            <li class=""><a href="#alter-tablealgorithmnocopy" title="ALGORITHM=NOCOPY">ALGORITHM=NOCOPY</a></li>

            <li class=""><a href="#alter-tablealgorithminstant" title="ALGORITHM=INSTANT">ALGORITHM=INSTANT</a>        </li></ol>
</li>

        <li class=""><a href="#alter-tablelock" title="LOCK">LOCK</a>    </li></ol>
</li>

    <li class=""><a href="#alter-tableprogress-reporting" title="Progress Reporting">Progress Reporting</a></li>

    <li class=""><a href="#alter-tableaborting-alter-table-operations" title="Aborting ALTER TABLE Operations">Aborting ALTER TABLE Operations</a></li>

    <li class=""><a href="#alter-tableatomic-alter-table" title="Atomic ALTER TABLE">Atomic ALTER TABLE</a></li>

    <li class=""><a href="#alter-tablereplication" title="Replication">Replication</a></li>

    <li class=""><a href="#alter-tableexamples" title="Examples">Examples</a></li>

    <li class=""><a href="#alter-tablesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tabledescription">Description</h2>
<p><code>ALTER TABLE</code> enables you to change the structure of an existing table.
For example, you can add or delete columns, create or destroy indexes,
change the type of existing columns, or rename columns or the table
itself. You can also change the comment for the table and the storage engine of the
table.</p>
<p>If another connection is using the table, a <a style="color: #150281;" href="https://mariadb.com/kb/en/metadata-locking/">metadata lock</a> is active, and this statement will wait until the lock is released. This is also true for non-transactional tables.</p>
<p>When adding a <code>UNIQUE</code> index on a column (or a set of columns) which have duplicated values, an error will be produced and the statement will be stopped. To suppress the error and force the creation of <code>UNIQUE</code> indexes, discarding duplicates, the <a style="color: #150281;" href="https://mariadb.com/kb/en/ignore/">IGNORE</a> option can be specified. This can be useful if a column (or a set of columns) should be UNIQUE but it contains duplicate values; however, this technique provides no control on which rows are preserved and which are deleted. Also, note that <code>IGNORE</code> is accepted but ignored in <code>ALTER TABLE ... EXCHANGE PARTITION</code> statements.</p>
<p>This statement can also be used to rename a table. For details see <a href="#rename-table">RENAME TABLE</a>.</p>
<p>When an index is created, the storage engine may use a configurable buffer in the process. Incrementing the buffer speeds up the index creation. <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam/">MyISAM</a> allocate a buffer whose size is defined by <a style="color: #150281;" href="https://mariadb.com/kb/en/aria-server-system-variables/#aria_sort_buffer_size">aria_sort_buffer_size</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam-server-system-variables/#myisam_sort_buffer_size">myisam_sort_buffer_size</a>, also used for <a href="#repair-table">REPAIR TABLE</a>. <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a> allocates three buffers whose size is defined by <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_sort_buffer_size">innodb_sort_buffer_size</a>.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tableprivileges">Privileges</h2>
<p>Executing the <code>ALTER TABLE</code> statement generally requires at least the <a href="#granttable-privileges">ALTER</a> privilege for the table or the database..</p>
<p>If you are renaming a table, then it also requires the <a href="#granttable-privileges">DROP</a>, <a href="#granttable-privileges">CREATE</a> and <a href="#granttable-privileges">INSERT</a> privileges for the table or the database as well.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tableonline-ddl">Online DDL</h2>
<p>Online DDL is supported with the <a href="#alter-tablealgorithm">ALGORITHM</a> and <a href="#alter-tablelock">LOCK</a> clauses.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-online-ddl-overview/">InnoDB Online DDL Overview</a> for more information on online DDL with <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a>.</p>
<h3 class="anchored_heading" id="alter-tablealter-online-table">ALTER ONLINE TABLE</h3>
<p>ALTER ONLINE TABLE also works for partitioned tables.</p>
<p>Online <code>ALTER TABLE</code> is available by executing the following:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="n">ONLINE</span> <span class="k">TABLE</span> <span class="p">...;</span>
</pre><p>This statement has the following semantics:</p>
<p>This statement is equivalent to the following:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="p">...</span> <span class="k">LOCK</span><span class="o">=</span><span class="k">NONE</span><span class="p">;</span>
</pre><p>See the <a href="#alter-tablelock">LOCK</a> alter specification for more information.
&lt;&lt;/product&gt;&gt;</p>
<p>This statement is equivalent to the following:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="p">...</span> <span class="n">ALGORITHM</span><span class="o">=</span><span class="n">INPLACE</span><span class="p">;</span>
</pre><p>See the <a href="#alter-tablealgorithm">ALGORITHM</a> alter specification for more information.
&lt;&lt;/product&gt;&gt;</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tablewaitnowait">WAIT/NOWAIT</h2>
<div class="mariadb_from_10_3_0 mariadb from_10_3_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1030-release-notes/">10.3.0</a></h5><p>Set the lock wait timeout. See <a style="color: #150281;" href="https://mariadb.com/kb/en/wait-and-nowait/">WAIT and NOWAIT</a>.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tableif-exists">IF EXISTS</h2>
<p>The  <code>IF EXISTS</code> and <code>IF NOT EXISTS</code> clauses are available for the following:</p>
<pre class="highlight fixed"><p>ADD COLUMN       [IF NOT EXISTS]
ADD INDEX        [IF NOT EXISTS]
ADD FOREIGN KEY  [IF NOT EXISTS]
ADD PARTITION    [IF NOT EXISTS]
CREATE INDEX     [IF NOT EXISTS]</p>
<p>DROP COLUMN      [IF EXISTS]
DROP INDEX       [IF EXISTS]
DROP FOREIGN KEY [IF EXISTS]
DROP PARTITION   [IF EXISTS]
CHANGE COLUMN    [IF EXISTS]
MODIFY COLUMN    [IF EXISTS]
DROP INDEX       [IF EXISTS]</p></pre><p>When <code>IF EXISTS</code> and <code>IF NOT EXISTS</code> are used in clauses, queries will not
report errors when the condition is triggered for that clause. A warning with
the same message text will be issued and the ALTER will move on to the next
clause in the statement (or end if finished).
&lt;&lt;/product&gt;&gt;</p>
<div class="mariadb_from_10_5_2 mariadb from_10_5_2 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">10.5.2</a></h5><p>If this is directive is used after <code>ALTER ... TABLE</code>, one will not get an error if the table doesn't exist.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tablecolumn-definitions">Column Definitions</h2>
<p>See <a href="#create-tablecolumn-definitions">CREATE TABLE: Column Definitions</a> for information about column definitions.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tableindex-definitions">Index Definitions</h2>
<p>See <a href="#create-tableindex-definitions">CREATE TABLE: Index Definitions</a> for information about index definitions.</p>
<p>The <a style="color: #150281;" href="https://mariadb.com/kb/en/create-index/">CREATE INDEX</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/drop-index/">DROP INDEX</a> statements can also be used to add or remove an index.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tablecharacter-sets-and-collations">Character Sets and Collations</h2>
<pre class="highlight fixed"><p>CONVERT TO CHARACTER SET charset_name [COLLATE collation_name]
[DEFAULT] CHARACTER SET [=] charset_name
[DEFAULT] COLLATE [=] collation_name</p></pre><p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/setting-character-sets-and-collations/">Setting Character Sets and Collations</a> for details on setting the <a style="color: #150281;" href="https://mariadb.com/kb/en/data-types-character-sets-and-collations/">character sets and collations</a>.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tablealter-specifications">Alter Specifications</h2>
<h3 class="anchored_heading" id="alter-tabletable-options">Table Options</h3>
<p>See <a href="#create-tabletable-options">CREATE TABLE: Table Options</a> for information about table options.</p>
<h3 class="anchored_heading" id="alter-tableadd-column">ADD COLUMN</h3>
<pre class="highlight fixed"><p>... ADD COLUMN [IF NOT EXISTS]  (col_name <a href="#create-tablecolumn-definitions">column_definition</a>,...)</p></pre><p>Adds a column to the table. The syntax is the same as in <a href="#create-table">CREATE TABLE</a>.
If you are using <code class="highlight fixed" style="white-space:pre-wrap">IF NOT_EXISTS</code> the column will not be added if it was not there already. This is very useful when doing scripts to modify tables.</p>
<p>The <code>FIRST</code> and <code>AFTER</code> clauses affect the physical order of columns in the datafile. Use <code>FIRST</code> to add a column in the first (leftmost) position, or <code>AFTER</code> followed by a column name to add the new column in any other position. Note that, nowadays, the physical position of a column is usually irrelevant.</p>
<p>See also <a style="color: #150281;" href="https://mariadb.com/kb/en/instant-add-column-for-innodb/">Instant ADD COLUMN for InnoDB</a>.</p>
<h3 class="anchored_heading" id="alter-tabledrop-column">DROP COLUMN</h3>
<pre class="highlight fixed"><p>... DROP COLUMN [IF EXISTS] col_name [CASCADE|RESTRICT]</p></pre><p>Drops the column from the table.
If you are using <code class="highlight fixed" style="white-space:pre-wrap">IF EXISTS</code> you will not get an error if the column didn't exist.
If the column is part of any index, the column will be dropped from them, except if you add a new column with identical name at the same time. The index will be dropped if all columns from the index were dropped.
If the column was used in a view or trigger, you will get an error next time the view or trigger is accessed.</p>
<div class="mariadb_from_10_2_8 mariadb from_10_2_8 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1028-release-notes/">10.2.8</a></h5><p>Dropping a column that is part of a multi-column <code class="highlight fixed" style="white-space:pre-wrap">UNIQUE</code> constraint is not permitted. For example:</p>
<pre class="fixed">CREATE TABLE a (
  a int,
  b int,
  primary key (a,b)
);

ALTER TABLE x DROP COLUMN a;
[42000][1072] Key column 'A' doesn't exist in table
</pre><p>The reason is that dropping column <code>a</code> would result in the new constraint that all values in column <code>b</code> be unique. In order to drop the column, an explicit <code>DROP PRIMARY KEY</code> and <code>ADD PRIMARY KEY</code> would be required. Up until <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1027-release-notes/">MariaDB 10.2.7</a>, the column was dropped and the additional constraint applied, resulting in the following structure:</p>
<pre class="fixed">ALTER TABLE x DROP COLUMN a;
Query OK, 0 rows affected (0.46 sec)

DESC x;
+-------+---------+------+-----+---------+-------+
| Field | Type    | Null | Key | Default | Extra |
+-------+---------+------+-----+---------+-------+
| b     | int(11) | NO   | PRI | NULL    |       |
+-------+---------+------+-----+---------+-------+
</pre></div><div class="mariadb_from_10_4_0 mariadb from_10_4_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1040-release-notes/">10.4.0</a></h5><p><a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1040-release-notes/">MariaDB 10.4.0</a> supports instant DROP COLUMN. DROP COLUMN of an indexed column would imply <a style="color: #150281;" href="https://mariadb.com/kb/en/drop-index/">DROP INDEX</a> (and in the case of a non-UNIQUE multi-column index, possibly ADD INDEX). These will not be allowed with <a href="#alter-tablealgorithm">ALGORITHM=INSTANT</a>, but unlike before, they can be allowed with <a href="#alter-tablealgorithm">ALGORITHM=NOCOPY</a></p>
</div><p><code class="highlight fixed" style="white-space:pre-wrap">RESTRICT</code> and <code class="highlight fixed" style="white-space:pre-wrap">CASCADE</code> are allowed to make porting from other database systems easier. In MariaDB, they do nothing.</p>
<h3 class="anchored_heading" id="alter-tablemodify-column">MODIFY COLUMN</h3>
<p>Allows you to modify the type of a column. The column will be at the same place as the original column and all indexes on the column will be kept.  Note that when modifying column, you should specify all attributes for the new column.</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">a</span> <span class="nb">INT</span> <span class="n">UNSIGNED</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">((</span><span class="n">a</span><span class="p">));</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">MODIFY</span> <span class="n">a</span> <span class="nb">BIGINT</span> <span class="n">UNSIGNED</span> <span class="n">AUTO_INCREMENT</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="alter-tablechange-column">CHANGE COLUMN</h3>
<p>Works like <code>MODIFY COLUMN</code> except that you can also change the name of the column. The column will be at the same place as the original column and all index on the column will be kept.</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">a</span> <span class="nb">INT</span> <span class="n">UNSIGNED</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">a</span><span class="p">));</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="n">CHANGE</span> <span class="n">a</span> <span class="n">b</span> <span class="nb">BIGINT</span> <span class="n">UNSIGNED</span> <span class="n">AUTO_INCREMENT</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="alter-tablealter-column">ALTER COLUMN</h3>
<p>This lets you change column options.</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">a</span> <span class="nb">INT</span> <span class="n">UNSIGNED</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span> <span class="n">b</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">a</span><span class="p">));</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">ALTER</span> <span class="n">b</span> <span class="k">SET</span> <span class="k">DEFAULT</span> <span class="s1">'hello'</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="alter-tablerename-indexkey">RENAME INDEX/KEY</h3>
<div class="mariadb_from_10_5_2 mariadb from_10_5_2 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">10.5.2</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>, it is possible to rename an index using the <code>RENAME INDEX</code> (or <code>RENAME KEY</code>) syntax, for example:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">RENAME</span> <span class="k">INDEX</span> <span class="n">i_old</span> <span class="k">TO</span> <span class="n">i_new</span><span class="p">;</span>
</pre></div><h3 class="anchored_heading" id="alter-tablerename-column">RENAME COLUMN</h3>
<div class="mariadb_from_10_5_2 mariadb from_10_5_2 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">10.5.2</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>, it is possible to rename a column using the <code>RENAME COLUMN</code> syntax, for example:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">RENAME</span> <span class="k">COLUMN</span> <span class="n">c_old</span> <span class="k">TO</span> <span class="n">c_new</span><span class="p">;</span>
</pre></div><h3 class="anchored_heading" id="alter-tableadd-primary-key">ADD PRIMARY KEY</h3>
<p>Add a primary key.</p>
<p>For <code>PRIMARY KEY</code> indexes, you can specify a name for the index, but it is silently ignored, and the name of the index is always <code>PRIMARY</code>.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/getting-started-with-indexes/#primary-key">Getting Started with Indexes: Primary Key</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tabledrop-primary-key">DROP PRIMARY KEY</h3>
<p>Drop a primary key.</p>
<p>For <code>PRIMARY KEY</code> indexes, you can specify a name for the index, but it is silently ignored, and the name of the index is always <code>PRIMARY</code>.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/getting-started-with-indexes/#primary-key">Getting Started with Indexes: Primary Key</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tableadd-foreign-key">ADD FOREIGN KEY</h3>
<p>Add a foreign key.</p>
<p>For <code>FOREIGN KEY</code> indexes, a reference definition must be provided.</p>
<p>For <code>FOREIGN KEY</code> indexes, you can specify a name for the constraint, using the <code>CONSTRAINT</code> keyword. That name will be used in error messages.</p>
<p>First, you have to specify the name of the target (parent) table and a column or a column list which must be indexed and whose values must match to the foreign key's values. The <code>MATCH</code> clause is accepted to improve the compatibility with other DBMS's, but has no meaning in MariaDB. The <code>ON DELETE</code> and <code>ON UPDATE</code> clauses specify what must be done when a <code>DELETE</code> (or a <code>REPLACE</code>) statements attempts to delete a referenced row from the parent table, and when an <code>UPDATE</code> statement attempts to modify the referenced foreign key columns in a parent table row, respectively. The following options are allowed:</p>
<ul start="1"><li><code>RESTRICT</code>: The delete/update operation is not performed.  The statement terminates with a 1451 error (SQLSTATE '2300').
</li><li><code>NO ACTION</code>: Synonym for <code>RESTRICT</code>.
</li><li><code>CASCADE</code>: The delete/update operation is performed in both tables.
</li><li><code>SET NULL</code>: The update or delete goes ahead in the parent table, and the corresponding foreign key fields in the child table are set to <code>NULL</code>.  (They must not be defined as <code>NOT NULL</code> for this to succeed).
</li><li><code>SET DEFAULT</code>: This option is implemented only for the legacy PBXT storage engine, which is disabled by default and no longer maintained. It sets the child table's foreign key fields to their <code>DEFAULT</code> values when the referenced parent table key entries are updated or deleted.
</li></ul>
<p>If either clause is omitted, the default behavior for the omitted clause is <code>RESTRICT</code>.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/foreign-keys/">Foreign Keys</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tabledrop-foreign-key">DROP FOREIGN KEY</h3>
<p>Drop a foreign key.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/foreign-keys/">Foreign Keys</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tableadd-index">ADD INDEX</h3>
<p>Add a plain index.</p>
<p>Plain indexes are regular indexes that are not unique, and are not acting as a primary key or a foreign key. They are also not the "specialized" <code>FULLTEXT</code> or <code>SPATIAL</code> indexes.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/getting-started-with-indexes/#plain-indexes">Getting Started with Indexes: Plain Indexes</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tabledrop-index">DROP INDEX</h3>
<p>Drop a plain index.</p>
<p>Plain indexes are regular indexes that are not unique, and are not acting as a primary key or a foreign key. They are also not the "specialized" <code>FULLTEXT</code> or <code>SPATIAL</code> indexes.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/getting-started-with-indexes/#plain-indexes">Getting Started with Indexes: Plain Indexes</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tableadd-unique-index">ADD UNIQUE INDEX</h3>
<p>Add a unique index.</p>
<p>The <code>UNIQUE</code> keyword means that the index will not accept duplicated values, except for NULLs. An error will raise if you try to insert duplicate values in a UNIQUE index.</p>
<p>For <code>UNIQUE</code> indexes, you can specify a name for the constraint, using the <code>CONSTRAINT</code> keyword. That name will be used in error messages.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/getting-started-with-indexes/#unique-index">Getting Started with Indexes: Unique Index</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tabledrop-unique-index">DROP UNIQUE INDEX</h3>
<p>Drop a unique index.</p>
<p>The <code>UNIQUE</code> keyword means that the index will not accept duplicated values, except for NULLs. An error will raise if you try to insert duplicate values in a UNIQUE index.</p>
<p>For <code>UNIQUE</code> indexes, you can specify a name for the constraint, using the <code>CONSTRAINT</code> keyword. That name will be used in error messages.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/getting-started-with-indexes/#unique-index">Getting Started with Indexes: Unique Index</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tableadd-fulltext-index">ADD FULLTEXT INDEX</h3>
<p>Add a <code>FULLTEXT</code> index.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/full-text-indexes/">Full-Text Indexes</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tabledrop-fulltext-index">DROP FULLTEXT INDEX</h3>
<p>Drop a <code>FULLTEXT</code> index.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/full-text-indexes/">Full-Text Indexes</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tableadd-spatial-index">ADD SPATIAL INDEX</h3>
<p>Add a SPATIAL index.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/spatial-index/">SPATIAL INDEX</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tabledrop-spatial-index">DROP SPATIAL INDEX</h3>
<p>Drop a SPATIAL index.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/spatial-index/">SPATIAL INDEX</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tableenable-disable-keys">ENABLE/ DISABLE KEYS</h3>
<p><code>DISABLE KEYS</code> will disable all non unique keys for the table for storage engines that support this (at least MyISAM and Aria). This can be used to <a style="color: #150281;" href="https://mariadb.com/kb/en/how-to-quickly-insert-data-into-mariadb/">speed up inserts</a> into empty tables.</p>
<p><code>ENABLE KEYS</code> will enable all disabled keys.</p>
<h3 class="anchored_heading" id="alter-tablerename-to">RENAME TO</h3>
<p>Renames the table. See also <a href="#rename-table">RENAME TABLE</a>.</p>
<h3 class="anchored_heading" id="alter-tableadd-constraint">ADD CONSTRAINT</h3>
<p>Modifies the table adding a <a style="color: #150281;" href="https://mariadb.com/kb/en/constraint/">constraint</a> on a particular column or columns.</p>
<div class="mariadb_from_10_2_1 mariadb from_10_2_1 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">10.2.1</a></h5><p><a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a> introduced new ways to define a constraint.</p>
</div><p>Note: Before <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a>, constraint expressions were accepted in syntax, but ignored.</p>
<pre class="highlight fixed"><p>ALTER TABLE table_name 
ADD CONSTRAINT [constraint_name] CHECK(expression);</p></pre><p>Before a row is inserted or updated, all constraints are evaluated in the order they are defined.  If any constraint fails, then the row will not be updated.  One can use most deterministic functions in a constraint, including <a style="color: #150281;" href="https://mariadb.com/kb/en/user-defined-functions/">UDF's</a>.</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">account_ledger</span> <span class="p">(</span>
	<span class="n">id</span> <span class="nb">INT</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
	<span class="n">transaction_name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
	<span class="n">credit_account</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
	<span class="n">credit_amount</span> <span class="nb">INT</span><span class="p">,</span>
	<span class="n">debit_account</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
	<span class="n">debit_amount</span> <span class="nb">INT</span><span class="p">);</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">account_ledger</span> 
<span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="n">is_balanced</span> 
    <span class="k">CHECK</span><span class="p">((</span><span class="n">debit_amount</span> <span class="o">+</span> <span class="n">credit_amount</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
</pre><p>The <code>constraint_name</code> is optional.  If you don't provide one in the <code>ALTER TABLE</code> statement, MariaDB auto-generates a name for you.  This is done so that you can remove it later using <a href="#alter-tabledrop-constraint">DROP CONSTRAINT</a> clause.</p>
<p>You can disable all constraint expression checks by setting the variable <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#check_constraint_checks">check_constraint_checks</a> to <code>OFF</code>.  You may find this useful when loading a table that violates some constraints that you want to later find and fix in SQL.</p>
<p>To view constraints on a table, query <a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-table_constraints-table/">information_schema.TABLE_CONSTRAINTS</a>:</p>
<pre class="fixed"><span class="k">SELECT</span> <span class="k">CONSTRAINT_NAME</span><span class="p">,</span> <span class="k">TABLE_NAME</span><span class="p">,</span> <span class="n">CONSTRAINT_TYPE</span> 
<span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">TABLE_CONSTRAINTS</span>
<span class="k">WHERE</span> <span class="k">TABLE_NAME</span> <span class="o">=</span> <span class="s1">'account_ledger'</span><span class="p">;</span>

<span class="o">+</span><span class="c1">-----------------+----------------+-----------------+</span>
<span class="o">|</span> <span class="k">CONSTRAINT_NAME</span> <span class="o">|</span> <span class="k">TABLE_NAME</span>     <span class="o">|</span> <span class="n">CONSTRAINT_TYPE</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+----------------+-----------------+</span>
<span class="o">|</span> <span class="n">is_balanced</span>     <span class="o">|</span> <span class="n">account_ledger</span> <span class="o">|</span> <span class="k">CHECK</span>           <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+----------------+-----------------+</span>
</pre><h3 class="anchored_heading" id="alter-tabledrop-constraint">DROP CONSTRAINT</h3>
<div class="mariadb_from_10_2_22 mariadb from_10_2_22 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10222-release-notes/">10.2.22</a></h5><p><code>DROP CONSTRAINT</code> for <code>UNIQUE</code> and <code>FOREIGN KEY</code> <a style="color: #150281;" href="https://mariadb.com/kb/en/constraint/">constraints</a> was introduced in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10222-release-notes/">MariaDB 10.2.22</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10313-release-notes/">MariaDB 10.3.13</a>.</p>
</div><div class="mariadb_from_10_2_1 mariadb from_10_2_1 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">10.2.1</a></h5><p><code>DROP CONSTRAINT</code> for <code>CHECK</code> constraints was introduced in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a></p>
</div><p>Modifies the table, removing the given constraint.</p>
<pre class="fixed">ALTER TABLE table_name
DROP CONSTRAINT constraint_name;
</pre><p>When you add a constraint to a table, whether through a <a href="#create-tableconstraint-expressions">CREATE TABLE</a> or <a href="#alter-tableadd-constraint">ALTER TABLE...ADD CONSTRAINT</a> statement, you can either set a <code>constraint_name</code> yourself, or allow MariaDB to auto-generate one for you.  To view constraints on a table, query <a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-table_constraints-table/">information_schema.TABLE_CONSTRAINTS</a>.  For instance,</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="p">(</span>
   <span class="n">a</span> <span class="nb">INT</span><span class="p">,</span>
   <span class="n">b</span> <span class="nb">INT</span><span class="p">,</span>
   <span class="k">c</span> <span class="nb">INT</span><span class="p">,</span>
   <span class="k">CONSTRAINT</span> <span class="k">CHECK</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">),</span>
   <span class="k">CONSTRAINT</span> <span class="n">check_equals</span> <span class="k">CHECK</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="k">c</span><span class="p">));</span> 

<span class="k">SELECT</span> <span class="k">CONSTRAINT_NAME</span><span class="p">,</span> <span class="k">TABLE_NAME</span><span class="p">,</span> <span class="n">CONSTRAINT_TYPE</span> 
<span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">TABLE_CONSTRAINTS</span>
<span class="k">WHERE</span> <span class="k">TABLE_NAME</span> <span class="o">=</span> <span class="s1">'t'</span><span class="p">;</span>

<span class="o">+</span><span class="c1">-----------------+----------------+-----------------+</span>
<span class="o">|</span> <span class="k">CONSTRAINT_NAME</span> <span class="o">|</span> <span class="k">TABLE_NAME</span>     <span class="o">|</span> <span class="n">CONSTRAINT_TYPE</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+----------------+-----------------+</span>
<span class="o">|</span> <span class="n">check_equals</span>    <span class="o">|</span> <span class="n">t</span>              <span class="o">|</span> <span class="k">CHECK</span>           <span class="o">|</span>
<span class="o">|</span> <span class="n">CONSTRAINT_1</span>    <span class="o">|</span> <span class="n">t</span>              <span class="o">|</span> <span class="k">CHECK</span>           <span class="o">|</span>
<span class="o">+</span><span class="c1">-----------------+----------------+-----------------+</span>
</pre><p>To remove a constraint from the table, issue an <code>ALTER TABLE...DROP CONSTRAINT</code> statement.  For example,</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="k">DROP</span> <span class="k">CONSTRAINT</span> <span class="n">is_unique</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="alter-tableadd-system-versioning">ADD SYSTEM VERSIONING</h3>
<div class="mariadb_from_10_3_4 mariadb from_10_3_4 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1034-release-notes/">10.3.4</a></h5><p><a style="color: #150281;" href="https://mariadb.com/kb/en/system-versioned-tables/">System-versioned tables</a> was added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1034-release-notes/">MariaDB 10.3.4</a>.</p>
</div><p>Add system versioning.</p>
<h3 class="anchored_heading" id="alter-tabledrop-system-versioning">DROP SYSTEM VERSIONING</h3>
<div class="mariadb_from_10_3_4 mariadb from_10_3_4 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1034-release-notes/">10.3.4</a></h5><p><a style="color: #150281;" href="https://mariadb.com/kb/en/system-versioned-tables/">System-versioned tables</a> was added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1034-release-notes/">MariaDB 10.3.4</a>.</p>
</div><p>Drop system versioning.</p>
<h3 class="anchored_heading" id="alter-tableadd-period-for-system_time">ADD PERIOD FOR SYSTEM_TIME</h3>
<div class="mariadb_from_10_3_4 mariadb from_10_3_4 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1034-release-notes/">10.3.4</a></h5><p><a style="color: #150281;" href="https://mariadb.com/kb/en/system-versioned-tables/">System-versioned tables</a> was added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1034-release-notes/">MariaDB 10.3.4</a>.</p>
</div><h3 class="anchored_heading" id="alter-tableforce">FORCE</h3>
<p><code>ALTER TABLE ... FORCE</code> can force MariaDB to re-build the table.</p>
<p>In <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-55/">MariaDB 5.5</a> and before, this could only be done by setting the <a href="#create-tablestorage-engine">ENGINE</a> table option to its old value. For example, for an InnoDB table, one could execute the following:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">tab_name</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">InnoDB</span><span class="p">;</span>
</pre><p>The <code>FORCE</code> option can be used instead. For example, :</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">tab_name</span> <span class="k">FORCE</span><span class="p">;</span>
</pre><p>With InnoDB, the table rebuild will only reclaim unused space (i.e. the space previously used for deleted rows) if the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_file_per_table">innodb_file_per_table</a> system variable is set to <code>ON</code>. If the system variable is <code>OFF</code>, then the space will not be reclaimed, but it will be-re-used for new data that's later added.</p>
<h3 class="anchored_heading" id="alter-tableexchange-partition">EXCHANGE PARTITION</h3>
<p>This is used to exchange the tablespace files between a partition and another table.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-file-per-table-tablespaces/#copying-transportable-tablespaces">copying InnoDB's transportable tablespaces</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tablediscard-tablespace">DISCARD TABLESPACE</h3>
<p>This is used to discard an InnoDB table's tablespace.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-file-per-table-tablespaces/#copying-transportable-tablespaces">copying InnoDB's transportable tablespaces</a> for more information.</p>
<h3 class="anchored_heading" id="alter-tableimport-tablespace">IMPORT TABLESPACE</h3>
<p>This is used to import an InnoDB table's tablespace. The tablespace should have been copied from its original server after executing <a style="color: #150281;" href="https://mariadb.com/kb/en/flush-tables-for-export/">FLUSH TABLES FOR EXPORT</a>.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-file-per-table-tablespaces/#copying-transportable-tablespaces">copying InnoDB's transportable tablespaces</a> for more information.</p>
<p><code>ALTER TABLE ... IMPORT</code> only applies to InnoDB tables. Most other popular storage engines, such as Aria and MyISAM, will recognize their data files as soon as they've been placed in the proper directory under the datadir, and no special DDL is required to import them.</p>
<h3 class="anchored_heading" id="alter-tablealgorithm">ALGORITHM</h3>
<p>The <code>ALTER TABLE</code> statement supports the <code>ALGORITHM</code> clause. This clause is one of the clauses that is used to implement online DDL. <code>ALTER TABLE</code> supports several different algorithms. An algorithm can be explicitly chosen for an <code>ALTER TABLE</code> operation by setting the <code>ALGORITHM</code> clause. The supported values are:</p>
<ul start="1"><li><code>ALGORITHM=DEFAULT</code> - This implies the default behavior for the specific statement, such as if no <code>ALGORITHM</code> clause is specified.
</li><li><code>ALGORITHM=COPY</code>
</li><li><code>ALGORITHM=INPLACE</code>
</li><li><code>ALGORITHM=NOCOPY</code> - This was added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1037-release-notes/">MariaDB 10.3.7</a>.
</li><li><code>ALGORITHM=INSTANT</code> - This was added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1037-release-notes/">MariaDB 10.3.7</a>.
</li></ul>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-online-ddl-overview/#algorithm">InnoDB Online DDL Overview: ALGORITHM</a> for information on how the <code>ALGORITHM</code> clause affects InnoDB.</p>
<h4 class="anchored_heading" id="alter-tablealgorithmdefault">ALGORITHM=DEFAULT</h4>
<p>The default behavior, which occurs if <code>ALGORITHM=DEFAULT</code> is specified, or if <code>ALGORITHM</code> is not specified at all, usually only makes a copy if the operation doesn't support being done in-place at all. In this case, the most efficient available algorithm will usually be used.</p>
<p>However, in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1036-release-notes/">MariaDB 10.3.6</a> and before, if the value of the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#old_alter_table">old_alter_table</a> system variable is set to <code>ON</code>, then the default behavior is to perform <code>ALTER TABLE</code> operations by making a copy of the table using the old algorithm.</p>
<p>In <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1037-release-notes/">MariaDB 10.3.7</a> and later, the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#old_alter_table">old_alter_table</a> system variable is deprecated. Instead, the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#alter_algorithm">alter_algorithm</a> system variable defines the default algorithm for <code>ALTER TABLE</code> operations.</p>
<h4 class="anchored_heading" id="alter-tablealgorithmcopy">ALGORITHM=COPY</h4>
<p><code>ALGORITHM=COPY</code> is the name for the original <a href="#alter-table">ALTER TABLE</a> algorithm from early MariaDB versions.</p>
<p>When <code>ALGORITHM=COPY</code> is set, MariaDB essentially does the following operations:</p>
<pre class="fixed"><span class="c1">-- Create a temporary table with the new definition</span>
<span class="k">CREATE</span> <span class="k">TEMPORARY</span> <span class="k">TABLE</span> <span class="n">tmp_tab</span> <span class="p">(</span>
<span class="p">...</span>
<span class="p">);</span>

<span class="c1">-- Copy the data from the original table</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">tmp_tab</span>
   <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">original_tab</span><span class="p">;</span>

<span class="c1">-- Drop the original table</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">original_tab</span><span class="p">;</span>

<span class="c1">-- Rename the temporary table, so that it replaces the original one</span>
<span class="k">RENAME</span> <span class="k">TABLE</span> <span class="n">tmp_tab</span> <span class="k">TO</span> <span class="n">original_tab</span><span class="p">;</span>
</pre><p>This algorithm is very inefficient, but it is generic, so it works for all storage engines.</p>
<p>If <code>ALGORITHM=COPY</code> is specified, then the copy algorithm will be used even if it is not necessary. This can result in a lengthy table copy. If multiple <a href="#alter-table">ALTER TABLE</a> operations are required that each require the table to be rebuilt, then it is best to specify all operations in a single <a href="#alter-table">ALTER TABLE</a> statement, so that the table is only rebuilt once.</p>
<h4 class="anchored_heading" id="alter-tablealgorithminplace">ALGORITHM=INPLACE</h4>
<p><code>ALGORITHM=COPY</code> can be incredibly slow, because the whole table has to be copied and rebuilt. <code>ALGORITHM=INPLACE</code> was introduced as a way to avoid this by performing operations in-place and avoiding the table copy and rebuild, when possible.</p>
<p>When <code>ALGORITHM=INPLACE</code> is set, the underlying storage engine uses optimizations to perform the operation while avoiding the table copy and rebuild. However, <code>INPLACE</code> is a bit of a misnomer, since some operations may still require the table to be rebuilt for some storage engines. Regardless, several operations can be performed without a full copy of the table for some storage engines.</p>
<p>A more accurate name would have been <code>ALGORITHM=ENGINE</code>, where <code>ENGINE</code> refers to an "engine-specific" algorithm.</p>
<p>If an <a href="#alter-table">ALTER TABLE</a> operation supports <code>ALGORITHM=INPLACE</code>, then it can be performed using optimizations by the underlying storage engine, but it may rebuilt.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-online-ddl-operations-with-algorithminplace/">InnoDB Online DDL Operations with ALGORITHM=INPLACE</a> for more.</p>
<h4 class="anchored_heading" id="alter-tablealgorithmnocopy">ALGORITHM=NOCOPY</h4>
<p><code>ALGORITHM=NOCOPY</code> was introduced in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1037-release-notes/">MariaDB 10.3.7</a>.</p>
<p><code>ALGORITHM=INPLACE</code> can sometimes be surprisingly slow in instances where it has to rebuild the clustered index, because when the clustered index has to be rebuilt, the whole table has to be rebuilt. <code>ALGORITHM=NOCOPY</code> was introduced as a way to avoid this. </p>
<p>If an <code>ALTER TABLE</code> operation supports <code>ALGORITHM=NOCOPY</code>, then it can be performed without rebuilding the clustered index.</p>
<p>If <code>ALGORITHM=NOCOPY</code> is specified for an <code>ALTER TABLE</code> operation that does not support <code>ALGORITHM=NOCOPY</code>, then an error will be raised. In this case, raising an error is preferable, if the alternative is for the operation to rebuild the clustered index, and perform unexpectedly slowly.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-online-ddl-operations-with-algorithmnocopy/">InnoDB Online DDL Operations with ALGORITHM=NOCOPY</a> for more.</p>
<h4 class="anchored_heading" id="alter-tablealgorithminstant">ALGORITHM=INSTANT</h4>
<p><code>ALGORITHM=INSTANT</code> was introduced in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1037-release-notes/">MariaDB 10.3.7</a>.</p>
<p><code>ALGORITHM=INPLACE</code> can sometimes be surprisingly slow in instances where it has to modify data files. <code>ALGORITHM=INSTANT</code> was introduced as a way to avoid this.</p>
<p>If an <code>ALTER TABLE</code> operation supports <code>ALGORITHM=INSTANT</code>, then it can be performed without modifying any data files.</p>
<p>If <code>ALGORITHM=INSTANT</code> is specified for an <code>ALTER TABLE</code> operation that does not support <code>ALGORITHM=INSTANT</code>, then an error will be raised. In this case, raising an error is preferable, if the alternative is for the operation to modify data files, and perform unexpectedly slowly.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-online-ddl-operations-with-algorithminstant/">InnoDB Online DDL Operations with ALGORITHM=INSTANT</a> for more.</p>
<h3 class="anchored_heading" id="alter-tablelock">LOCK</h3>
<p>The <code>ALTER TABLE</code> statement supports the <code>LOCK</code> clause. This clause is one of the clauses that is used to implement online DDL. <code>ALTER TABLE</code> supports several different locking strategies. A locking strategy can be explicitly chosen for an <code>ALTER TABLE</code> operation by setting the <code>LOCK</code> clause. The supported values are:</p>
<ul start="1"><li><code>DEFAULT</code>: Acquire the least restrictive lock on the table that is supported for the specific operation. Permit the maximum amount of concurrency that is supported for the specific operation.
</li><li><code>NONE</code>: Acquire no lock on the table. Permit <strong>all</strong> concurrent DML. If this locking strategy is not permitted for an operation, then an error is raised.
</li><li><code>SHARED</code>: Acquire a read lock on the table. Permit <strong>read-only</strong> concurrent DML. If this locking strategy is not permitted for an operation, then an error is raised.
</li><li><code>EXCLUSIVE</code>: Acquire a write lock on the table. Do <strong>not</strong> permit concurrent DML.
</li></ul>
<p>Different storage engines support different locking strategies for different operations. If a specific locking strategy is chosen for an <code>ALTER TABLE</code> operation, and that table's storage engine does not support that locking strategy for that specific operation, then an error will be raised.</p>
<p>If the <code>LOCK</code> clause is not explicitly set, then the operation uses <code>LOCK=DEFAULT</code>.</p>
<p><a href="alter-online-table">ALTER ONLINE TABLE</a> is equivalent to <code>LOCK=NONE</code>. Therefore, the <a href="alter-online-table">ALTER ONLINE TABLE</a> statement can be used to ensure that your <code>ALTER TABLE</code> operation allows all concurrent DML.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-online-ddl-overview/#lock">InnoDB Online DDL Overview: LOCK</a> for information on how the <code>LOCK</code> clause affects InnoDB.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tableprogress-reporting">Progress Reporting</h2>
<p>MariaDB provides progress reporting for <code>ALTER TABLE</code> statement for clients
that support the new progress reporting protocol. For example, if you were using the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysql-command-line-client/">mysql</a> client, then the progress report might look like this::</p>
<pre class="fixed">ALTER TABLE test ENGINE=Aria;
Stage: 1 of 2 'copy to tmp table'    46% of stage
</pre><p>The progress report is also shown in the output of the <a style="color: #150281;" href="https://mariadb.com/kb/en/show-processlist/">SHOW PROCESSLIST</a> statement and in the contents of the <a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-processlist-table/">information_schema.PROCESSLIST</a> table.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/progress-reporting/">Progress Reporting</a> for more information.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tableaborting-alter-table-operations">Aborting ALTER TABLE Operations</h2>
<p>If an <code>ALTER TABLE</code> operation is being performed and the connection is killed, the changes will be rolled back in a controlled manner. The rollback can be a slow operation as the time it takes is relative to how far the operation has progressed.</p>
<div class="mariadb_from_10_2_13 mariadb from_10_2_13 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10213-release-notes/">10.2.13</a></h5><p>Aborting <code>ALTER TABLE ... ALGORITHM=COPY</code>  was made faster by removing excessive undo logging (<a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-11415">MDEV-11415</a>).  This significantly shortens the time it takes to abort a running ALTER TABLE operation.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tableatomic-alter-table">Atomic ALTER TABLE</h2>
<div class="mariadb_from_10_6_1 mariadb from_10_6_1 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1061-release-notes/">10.6.1</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-106/">MariaDB 10.6</a>, <code>ALTER TABLE</code> is atomic for most engines, including InnoDB, MyRocks, MyISAM and  Aria (<a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-25180">MDEV-25180</a>).
This means that if there is a crash (server down or power outage) during an <code>ALTER TABLE</code> operation, after
recovery, either the old table and associated triggers and status will be intact, or the new table will be active.</p>
<p>In older MariaDB versions one could get leftover #sql-alter..', '#sql-backup..' or 'table_name.frm˝' files if the system crashed during the <code>ALTER TABLE</code> operation.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/atomic-ddl/">Atomic DDL</a> for more information.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tablereplication">Replication</h2>
<div class="mariadb_from_10_8_0 mariadb from_10_8_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1080-release-notes/">10.8.0</a></h5><p>Before <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1080-release-notes/">MariaDB 10.8.0</a>, ALTER TABLE got fully executed on the primary first, and only then was it replicated and started executing on replicas. From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1080-release-notes/">MariaDB 10.8.0</a>, ALTER TABLE gets replicated and starts executing on replicas when it <em>starts</em> executing on the primary, not when it <em>finishes</em>. This way the replication lag caused by a heavy ALTER TABLE can be completely eliminated (<a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-11675">MDEV-11675</a>). </p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tableexamples">Examples</h2>
<p>Adding a new column:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">ADD</span> <span class="n">x</span> <span class="nb">INT</span><span class="p">;</span>
</pre><p>Dropping a column:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">DROP</span> <span class="n">x</span><span class="p">;</span>
</pre><p>Modifying the type of a column:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">MODIFY</span> <span class="n">x</span> <span class="nb">bigint</span> <span class="n">unsigned</span><span class="p">;</span>
</pre><p>Changing the name and type of a column:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="n">CHANGE</span> <span class="n">a</span> <span class="n">b</span> <span class="nb">bigint</span> <span class="n">unsigned</span> <span class="n">auto_increment</span><span class="p">;</span>
</pre><p>Combining multiple clauses in a single ALTER TABLE statement, separated by commas:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">DROP</span> <span class="n">x</span><span class="p">,</span> <span class="k">ADD</span> <span class="n">x2</span> <span class="nb">INT</span><span class="p">,</span>  <span class="n">CHANGE</span> <span class="n">y</span> <span class="n">y2</span> <span class="nb">INT</span><span class="p">;</span>
</pre><p>Changing the storage engine and adding a comment:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> 
  <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">InnoDB</span> 
  <span class="k">COMMENT</span> <span class="o">=</span> <span class="s1">'First of three tables containing usage info'</span><span class="p">;</span>
</pre><p>Rebuilding the table (the previous example will also rebuild the table if it was already InnoDB):</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">FORCE</span><span class="p">;</span>
</pre><p>Dropping an index:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">rooms</span> <span class="k">DROP</span> <span class="k">INDEX</span> <span class="n">u</span><span class="p">;</span>
</pre><p>Adding a unique index:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">rooms</span> <span class="k">ADD</span> <span class="k">UNIQUE</span> <span class="k">INDEX</span> <span class="n">u</span><span class="p">(</span><span class="n">room_number</span><span class="p">);</span>
</pre><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1053-release-notes/">MariaDB 10.5.3</a>, adding a primary key for an <a style="color: #150281;" href="https://mariadb.com/kb/en/application-time-periods/">application-time period table</a> with a <a style="color: #150281;" href="https://mariadb.com/kb/en/application-time-periods/#without-overlaps">WITHOUT OVERLAPS</a> constraint:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">rooms</span> <span class="k">ADD</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">room_number</span><span class="p">,</span> <span class="n">p</span> <span class="k">WITHOUT</span> <span class="k">OVERLAPS</span><span class="p">);</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-tablesee-also">See Also</h2>
<ul start="1"><li><a href="#create-table">CREATE TABLE</a>
</li><li><a href="#drop-table">DROP TABLE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/character-sets-and-collations/">Character Sets and Collations</a>
</li><li><a href="#show-create-table">SHOW CREATE TABLE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/instant-add-column-for-innodb/">Instant ADD COLUMN for InnoDB</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="alter-database">1.1.2.1.1.2 ALTER DATABASE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <p>Modifies a database, changing its overall characteristics.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-databasesyntax">Syntax</h2>
<pre class="fixed">ALTER {DATABASE | SCHEMA} [db_name]
    alter_specification ...
ALTER {DATABASE | SCHEMA} db_name
    UPGRADE DATA DIRECTORY NAME

alter_specification:
    [DEFAULT] CHARACTER SET [=] charset_name
  | [DEFAULT] COLLATE [=] collation_name
  | COMMENT [=] 'comment'
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#alter-databasesyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#alter-databasedescription" title="Description">Description</a>    <ol class="toc">

        <li class=""><a href="#alter-databasecomment" title="COMMENT">COMMENT</a>    </li></ol>
</li>

    <li class=""><a href="#alter-databaseexamples" title="Examples">Examples</a></li>

    <li class=""><a href="#alter-databasesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-databasedescription">Description</h2>
<p><code>ALTER DATABASE</code> enables you to change the overall characteristics of a
database. These characteristics are stored in the <code>db.opt</code> file in the
database directory. To use <code>ALTER DATABASE</code>, you need the <code>ALTER</code>
privilege on the database. <code>ALTER SCHEMA</code> is a synonym for ALTER
DATABASE.</p>
<p>The <code>CHARACTER SET</code> clause changes the default database character set.
The <code>COLLATE</code> clause changes the default database collation. See <a style="color: #150281;" href="https://mariadb.com/kb/en/data-types-character-sets-and-collations/">Character Sets and Collations</a> for more.</p>
<p>You can see what character sets and collations are available using,
respectively, the <a style="color: #150281;" href="https://mariadb.com/kb/en/show-character-set/">SHOW CHARACTER SET</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/show-collation/">SHOW COLLATION</a> statements.</p>
<p>Changing the default character set/collation of a database does not change the character set/collation of any <a style="color: #150281;" href="https://mariadb.com/kb/en/stored-procedures/">stored procedures</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/stored-functions/">stored functions</a> that were previously created, and relied on the defaults. These need to be dropped and recreated in order to apply the character set/collation changes.</p>
<p>The database name can be omitted from the first syntax, in which case
the statement applies to the default database.</p>
<p>The syntax that includes the <code>UPGRADE DATA DIRECTORY NAME</code> clause was
added in MySQL 5.1.23. It updates the name of the directory associated
with the database to use the encoding implemented in MySQL 5.1 for
mapping database names to database directory names (see
<a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-to-file-name-mapping/">Identifier to File Name Mapping</a>). This
clause is for use under these conditions:</p>
<ul start="1"><li>It is intended when upgrading MySQL to 5.1 or later from older versions.
</li><li>It is intended to update a database directory name to the current encoding format if the name contains special characters that need encoding.
</li><li>The statement is used by <code>mysqlcheck</code> (as invoked by <code>mysql_upgrade</code>).
</li></ul>
<p>For example,if a database in MySQL 5.0 has a name of a-b-c, the name
contains instance of the `-' character. In 5.0, the database directory
is also named a-b-c, which is not necessarily safe for all file
systems. In MySQL 5.1 and up, the same database name is encoded as
a@002db@002dc to produce a file system-neutral directory name.</p>
<p>When a MySQL installation is upgraded to MySQL 5.1 or later from an
older version,the server displays a name such as a-b-c (which is in
the old format) as #mysql50#a-b-c, and you must refer to the name
using the #mysql50# prefix. Use <code>UPGRADE DATA DIRECTORY NAME</code> in this
case to explicitly tell the server to re-encode the database directory
name to the current encoding format:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">DATABASE</span> <span class="o">`#</span><span class="n">mysql50</span><span class="o">#</span><span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="o">-</span><span class="k">c</span><span class="o">`</span> <span class="n">UPGRADE</span> <span class="k">DATA</span> <span class="n">DIRECTORY</span> <span class="n">NAME</span><span class="p">;</span>
</pre><p>After executing this statement, you can refer to the database as a-b-c
without the special #mysql50# prefix.</p>
<h4 class="anchored_heading" id="alter-databasecomment">COMMENT</h4>
<div class="mariadb_from_10_5_0 mariadb from_10_5_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1050-release-notes/">10.5.0</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1050-release-notes/">MariaDB 10.5.0</a>, it is possible to add a comment of a maximum of 1024 bytes. If the comment length exceeds this length, a error/warning code 4144 is thrown. The database comment is also added to the db.opt file, as well as to the <a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-schemata-table/">information_schema.schemata table</a>.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-databaseexamples">Examples</h2>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">DATABASE</span> <span class="n">test</span> <span class="nb">CHARACTER</span> <span class="k">SET</span><span class="o">=</span><span class="s1">'utf8'</span>  <span class="k">COLLATE</span><span class="o">=</span><span class="s1">'utf8_bin'</span><span class="p">;</span>
</pre><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1050-release-notes/">MariaDB 10.5.0</a>:</p>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">DATABASE</span> <span class="n">p</span> <span class="k">COMMENT</span><span class="o">=</span><span class="s1">'Presentations'</span><span class="p">;</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-databasesee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/create-database/">CREATE DATABASE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/drop-database/">DROP DATABASE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-create-database/">SHOW CREATE DATABASE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-databases/">SHOW DATABASES</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/character-sets-and-collations/">Character Sets and Collations</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-schemata-table/">Information Schema SCHEMATA Table</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="alter-event">1.1.2.1.1.3 ALTER EVENT</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <p>Modifies one or more characteristics of an existing event.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-eventsyntax">Syntax</h2>
<pre class="fixed">ALTER
    [DEFINER = { user | CURRENT_USER }]
    EVENT event_name
    [ON SCHEDULE schedule]
    [ON COMPLETION [NOT] PRESERVE]
    [RENAME TO new_event_name]
    [ENABLE | DISABLE | DISABLE ON SLAVE]
    [COMMENT 'comment']
    [DO sql_statement]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#alter-eventsyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#alter-eventdescription" title="Description">Description</a></li>

    <li class=""><a href="#alter-eventexamples" title="Examples">Examples</a></li>

    <li class=""><a href="#alter-eventsee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-eventdescription">Description</h2>
<p>The <code>ALTER EVENT</code> statement is used to change one or more of the
characteristics of an existing <a style="color: #150281;" href="https://mariadb.com/kb/en/events/">event</a> without the need to drop and recreate it.
The syntax for each of the <code>DEFINER</code>, <code>ON SCHEDULE</code>, <code>ON COMPLETION</code>,
<code>COMMENT</code>, <code>ENABLE</code> <code>/</code> <code>DISABLE</code>, and <code>DO</code> clauses is exactly the
same as when used with <code><a style="color: #150281;" href="https://mariadb.com/kb/en/create-event/">CREATE EVENT</a></code>.</p>
<p>This statement requires the <code><a href="#grantdatabase-privileges">EVENT</a></code> privilege.
When a user executes a successful <code>ALTER EVENT</code> statement, that user becomes
the definer for the affected event.</p>
<p>(In MySQL 5.1.11 and earlier, an event could be altered only by its definer, or
by a user having the <code><a href="#grantglobal-privileges">SUPER</a></code> privilege.)</p>
<p><code>ALTER EVENT</code> works only with an existing event:</p>
<pre class="fixed">ALTER EVENT no_such_event ON SCHEDULE EVERY '2:3' DAY_HOUR;
ERROR 1539 (HY000): Unknown event 'no_such_event'
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-eventexamples">Examples</h2>
<pre class="fixed"><span class="k">ALTER</span> <span class="n">EVENT</span> <span class="n">myevent</span> 
  <span class="k">ON</span> <span class="n">SCHEDULE</span> <span class="k">AT</span> <span class="k">CURRENT_TIMESTAMP</span> <span class="o">+</span> <span class="nb">INTERVAL</span> <span class="mi">2</span> <span class="n">HOUR</span> 
  <span class="k">DO</span> 
    <span class="k">UPDATE</span> <span class="n">myschema</span><span class="p">.</span><span class="n">mytable</span> <span class="k">SET</span> <span class="n">mycol</span> <span class="o">=</span> <span class="n">mycol</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-eventsee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/events-overview/">Events Overview</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/create-event/">CREATE EVENT</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-create-event/">SHOW CREATE EVENT</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/drop-event/">DROP EVENT</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="alter-function">1.1.2.1.1.4 ALTER FUNCTION</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="alter-functionsyntax">Syntax</h2>
<pre class="fixed">ALTER FUNCTION func_name [characteristic ...]

characteristic:
    { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }
  | SQL SECURITY { DEFINER | INVOKER }
  | COMMENT 'string'
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#alter-functionsyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#alter-functiondescription" title="Description">Description</a></li>

    <li class=""><a href="#alter-functionexample" title="Example">Example</a></li>

    <li class=""><a href="#alter-functionsee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-functiondescription">Description</h2>
<p>This statement can be used to change the characteristics of a stored
function. More than one change may be specified in an <code>ALTER FUNCTION</code>
statement. However, you cannot change the parameters or body of a
stored function using this statement; to make such changes, you must
drop and re-create the function using <a style="color: #150281;" href="https://mariadb.com/kb/en/drop-function/">DROP FUNCTION</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/create-function/">CREATE FUNCTION</a>.</p>
<p>You must have the <code>ALTER ROUTINE</code> privilege for the function. (That
privilege is granted automatically to the function creator.) If binary
logging is enabled, the <code>ALTER FUNCTION</code> statement might also require
the <code>SUPER</code> privilege, as described in <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-logging-of-stored-routines/">Binary Logging of Stored Routines</a>.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-functionexample">Example</h2>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">FUNCTION</span> <span class="n">hello</span> <span class="k">SQL</span> <span class="k">SECURITY</span> <span class="k">INVOKER</span><span class="p">;</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-functionsee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/create-function/">CREATE FUNCTION</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-create-function/">SHOW CREATE FUNCTION</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/drop-function/">DROP FUNCTION</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-function-status/">SHOW FUNCTION STATUS</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-routines-table/">Information Schema ROUTINES Table</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="alter-logfile-group">1.1.2.1.1.5 ALTER LOGFILE GROUP</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="syntax">Syntax</h2>
<pre class="fixed">ALTER LOGFILE GROUP logfile_group
    ADD UNDOFILE 'file_name'
    [INITIAL_SIZE [=] size]
    [WAIT]
    ENGINE [=] engine_name
</pre><div class="cstm-style redbox"><p>The <code>ALTER LOGFILE GROUP</code> statement is not supported by MariaDB. It was originally inherited from MySQL NDB Cluster. See <a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-19295">MDEV-19295</a> for more information.</p>
</div>
    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="alter-procedure">1.1.2.1.1.6 ALTER PROCEDURE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="syntax">Syntax</h2>
<pre class="fixed">ALTER PROCEDURE proc_name [characteristic ...]

characteristic:
    { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }
  | SQL SECURITY { DEFINER | INVOKER }
  | COMMENT 'string'
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="description">Description</h2>
<p>This statement can be used to change the characteristics of a <a style="color: #150281;" href="https://mariadb.com/kb/en/stored-procedures/">stored
procedure</a>. More than one change may be specified in an <code>ALTER PROCEDURE</code>
statement. However, you cannot change the parameters or body of a
stored procedure using this statement. To make such changes, you must
drop and re-create the procedure using either <a style="color: #150281;" href="https://mariadb.com/kb/en/create-procedure/">CREATE OR REPLACE PROCEDURE</a> (since <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1013-release-notes/">MariaDB 10.1.3</a>) or <a style="color: #150281;" href="https://mariadb.com/kb/en/drop-procedure/">DROP PROCEDURE</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/create-procedure/">CREATE PROCEDURE</a> (<a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1012-release-notes/">MariaDB 10.1.2</a> and before).</p>
<p>You must have the <code>ALTER ROUTINE</code> privilege for the procedure. By default, that privilege is granted automatically to the procedure creator. See <a style="color: #150281;" href="https://mariadb.com/kb/en/stored-routine-privileges/">Stored Routine Privileges</a>.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="example">Example</h2>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">PROCEDURE</span> <span class="n">simpleproc</span> <span class="k">SQL</span> <span class="k">SECURITY</span> <span class="k">INVOKER</span><span class="p">;</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="see-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/stored-procedure-overview/">Stored Procedure Overview</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/create-procedure/">CREATE PROCEDURE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-create-procedure/">SHOW CREATE PROCEDURE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/drop-procedure/">DROP PROCEDURE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-create-procedure/">SHOW CREATE PROCEDURE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-procedure-status/">SHOW PROCEDURE STATUS</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/stored-routine-privileges/">Stored Routine Privileges</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-routines-table/">Information Schema ROUTINES Table</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="alter-sequence">1.1.2.1.1.7 ALTER SEQUENCE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="mariadb_from_10_3_1 mariadb from_10_3_1 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1031-release-notes/">10.3.1</a></h5><p><code>ALTER SEQUENCE</code> was introduced in <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-103/">MariaDB 10.3</a>.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-sequencesyntax">Syntax</h2>
<pre class="highlight fixed"><p>ALTER SEQUENCE [IF EXISTS] sequence_name
[ INCREMENT [ BY | = ] increment ]
[ MINVALUE [=] minvalue | NO MINVALUE | NOMINVALUE ]
[ MAXVALUE [=] maxvalue | NO MAXVALUE | NOMAXVALUE ]
[ START [ WITH | = ] start ] [ CACHE [=] cache ] [ [ NO ] CYCLE ]
[ RESTART [[WITH | =] restart]</p></pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class="mariadb_from_10_3_1"><a href="#alter-sequencesyntax" title="Syntax">Syntax</a></li>

    <li class="mariadb_from_10_3_1"><a href="#alter-sequencedescription" title="Description">Description</a>    <ol class="toc">

        <li class="mariadb_from_10_3_1"><a href="#alter-sequencearguments-to-alter-sequence" title="Arguments to ALTER SEQUENCE">Arguments to ALTER SEQUENCE</a></li>

        <li class="mariadb_from_10_3_1"><a href="#alter-sequenceinsert" title="INSERT">INSERT</a></li>

        <li class="mariadb_from_10_3_1"><a href="#alter-sequencenotes" title="Notes">Notes</a>    </li></ol>
</li>

    <li class="mariadb_from_10_3_1"><a href="#alter-sequencesee-also" title="See Also">See Also</a> </li></ol>

</div>
<p><code>ALTER SEQUENCE</code> allows one to change any values for a <code>SEQUENCE</code> created with <a style="color: #150281;" href="https://mariadb.com/kb/en/create-sequence/">CREATE SEQUENCE</a>.</p>
<p>The options for <code>ALTER SEQUENCE</code> can be given in any order.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-sequencedescription">Description</h2>
<p><code>ALTER SEQUENCE</code> changes the parameters of an existing sequence generator. Any parameters not specifically set in the <code>ALTER SEQUENCE</code> command retain their prior settings.</p>
<p><code>ALTER SEQUENCE</code> requires the <a href="#grant">ALTER privilege</a>.</p>
<h3 class="anchored_heading" id="alter-sequencearguments-to-alter-sequence">Arguments to <code>ALTER SEQUENCE</code></h3>
<p>The following options may be used:</p>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Option</th><th>Default value</th><th>Description</th></tr>
<tr><td><code>INCREMENT</code></td><td>1</td><td>Increment to use for values. May be negative.</td></tr>
<tr><td><code>MINVALUE</code></td><td>1 if <code>INCREMENT</code> &gt; 0 and -9223372036854775807 if <code>INCREMENT</code> &lt; 0</td><td>Minimum value for the sequence.</td></tr>
<tr><td><code>MAXVALUE</code></td><td>9223372036854775806 if <code>INCREMENT</code> &gt; 0 and -1 if <code>INCREMENT</code> &lt; 0</td><td>Max value for sequence.</td></tr>
<tr><td><code>START</code></td><td><code>MINVALUE</code> if <code>INCREMENT</code> &gt; 0 and <code>MAX_VALUE</code> if <code>INCREMENT</code>&lt; 0</td><td>First value that the sequence will generate.</td></tr>
<tr><td><code>CACHE</code></td><td>1000</td><td>Number of values that should be cached. 0 if no <code>CACHE</code>.  The underlying table will be updated first time a new sequence number is generated and each time the cache runs out.</td></tr>
<tr><td><code>CYCLE</code></td><td>0 (= <code>NO CYCLE</code>)</td><td>1 if the sequence should start again from <code>MINVALUE</code># after it has run out of values.</td></tr>
<tr><td><code>RESTART</code></td><td><code>START</code> if <code>restart</code> value not is given</td><td> If  <code>RESTART</code> option is used, <code>NEXT VALUE</code> will return the restart value.</td></tr>
</tbody></table>
</div><p>The optional clause <code>RESTART [ WITH restart ]</code> sets the next value for the sequence. This is equivalent to calling the <a style="color: #150281;" href="https://mariadb.com/kb/en/setval/">SETVAL()</a> function with the <code>is_used</code> argument as 0. The specified value will be returned by the next call of nextval.  Using <code>RESTART</code> with no restart value is
equivalent to supplying the start value that was recorded by
<a style="color: #150281;" href="https://mariadb.com/kb/en/create-sequence/">CREATE SEQUENCE</a> or last set by <code>ALTER SEQUENCE START WITH</code>.</p>
<p><code>ALTER SEQUENCE</code> will not allow you to change the sequence so that it's inconsistent. For example:</p>
<pre class="fixed">CREATE SEQUENCE s1;
ALTER SEQUENCE s1 MINVALUE 10;
ERROR 4061 (HY000): Sequence 'test.t1' values are conflicting

ALTER SEQUENCE s1 MINVALUE 10 RESTART 10;
ERROR 4061 (HY000): Sequence 'test.t1' values are conflicting

ALTER SEQUENCE s1 MINVALUE 10 START 10 RESTART 10;
</pre><h3 class="anchored_heading" id="alter-sequenceinsert">INSERT</h3>
<p>To allow <code>SEQUENCE</code> objects to be backed up by old tools, like <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqldump/">mysqldump</a>, one can use <code>SELECT</code> to read the current state of a <code>SEQUENCE</code> object and use an <code>INSERT</code> to update the <code>SEQUENCE</code> object.  <code>INSERT</code> is only allowed if all fields are specified:</p>
<pre class="fixed">CREATE SEQUENCE s1;
INSERT INTO s1 VALUES(1000,10,2000,1005,1,1000,0,0);
SELECT * FROM s1;

+------------+-----------+-----------+-------+-----------+-------+-------+-------+
| next_value | min_value | max_value | start | increment | cache | cycle | round |
+------------+-----------+-----------+-------+-----------+-------+-------+-------+
|       1000 |        10 |      2000 |  1005 |         1 |  1000 |     0 |     0 |
+------------+-----------+-----------+-------+-----------+-------+-------+-------+

SHOW CREATE SEQUENCE s1;
+-------+--------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                 |
+-------+--------------------------------------------------------------------------------------------------------------+
| s1    | CREATE SEQUENCE `s1` start with 1005 minvalue 10 maxvalue 2000 increment by 1 cache 1000 nocycle ENGINE=Aria |
+-------+--------------------------------------------------------------------------------------------------------------+
</pre><h3 class="anchored_heading" id="alter-sequencenotes">Notes</h3>
<p><code>ALTER SEQUENCE</code> will instantly affect all future <code>SEQUENCE</code> operations.  This is in contrast to some other databases where the changes requested by <code>ALTER SEQUENCE</code> will not be seen until the sequence cache has run out.</p>
<p><code>ALTER SEQUENCE</code> will take a full table lock of the sequence object during
its (brief) operation. This ensures that <code>ALTER SEQUENCE</code> is replicated
correctly.  If you only want to set the next sequence value to a
higher value than current, then you should use <a style="color: #150281;" href="https://mariadb.com/kb/en/setval/">SETVAL()</a>
instead, as this is not blocking.</p>
<p>If you want to change storage engine, sequence comment or rename the sequence, you can use <a href="#alter-table">ALTER TABLE</a> for this.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-sequencesee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/sequence-overview/">Sequence Overview</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/create-sequence/">CREATE SEQUENCE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/drop-sequence/">DROP SEQUENCE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/next-value-for-sequence_name/">NEXT VALUE FOR</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/previous-value-for-sequence_name/">PREVIOUS VALUE FOR</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/setval/">SETVAL()</a>.  Set next value for the sequence.
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/auto_increment/">AUTO INCREMENT</a>
</li><li><a href="#alter-table">ALTER TABLE</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="alter-server">1.1.2.1.1.8 ALTER SERVER</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="alter-serversyntax">Syntax</h2>
<pre class="fixed">ALTER SERVER server_name
    OPTIONS (option [, option] ...)
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#alter-serversyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#alter-serverdescription" title="Description">Description</a></li>

    <li class=""><a href="#alter-serverexamples" title="Examples">Examples</a></li>

    <li class=""><a href="#alter-serversee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-serverdescription">Description</h2>
<p>Alters the server information for <em>server_name</em>, adjusting the specified
options as per the <a style="color: #150281;" href="https://mariadb.com/kb/en/create-server/">CREATE SERVER</a> command. The corresponding fields in the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlservers-table/">mysql.servers table</a> are updated accordingly. This statement requires the <a href="#grantsuper">SUPER</a> privilege or, from <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>, the <a href="#grantfederated-admin">FEDERATED ADMIN</a> privilege.</p>
<p>ALTER SERVER is not written to the <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log/">binary log</a>, irrespective of
the <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log-formats/">binary log format</a> being used. From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10113-release-notes/">MariaDB 10.1.13</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/galera/">Galera</a> replicates the <a style="color: #150281;" href="https://mariadb.com/kb/en/create-server/">CREATE SERVER</a>, ALTER SERVER and <a style="color: #150281;" href="https://mariadb.com/kb/en/drop-server/">DROP SERVER</a> statements.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-serverexamples">Examples</h2>
<pre class="fixed">ALTER SERVER s OPTIONS (USER 'sally');
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-serversee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/create-server/">CREATE SERVER</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/drop-server/">DROP SERVER</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/spider/">Spider Storage Engine</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="alter-tablespace">1.1.2.1.1.9 ALTER TABLESPACE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="cstm-style redbox"><p>The <code>ALTER TABLESPACE</code> statement is not supported by MariaDB. It was originally inherited from MySQL NDB Cluster. In MySQL 5.7 and later, the statement is also supported for InnoDB. However, MariaDB has chosen not to include that specific feature. See <a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-19294">MDEV-19294</a> for more information.</p>
</div>
    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section>
<h1 class="col-md-8"><a href="#alter-user">1.1.2.1.1.10 ALTER USER</a></h1>
<section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="alter-view">1.1.2.1.2 ALTER VIEW</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="alter-viewsyntax">Syntax</h2>
<pre class="fixed">ALTER
    [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]
    [DEFINER = { user | CURRENT_USER }]
    [SQL SECURITY { DEFINER | INVOKER }]
    VIEW view_name [(column_list)]
    AS select_statement
    [WITH [CASCADED | LOCAL] CHECK OPTION]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#alter-viewsyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#alter-viewdescription" title="Description">Description</a></li>

    <li class=""><a href="#alter-viewexample" title="Example">Example</a></li>

    <li class=""><a href="#alter-viewsee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-viewdescription">Description</h2>
<p>This statement changes the definition of a <a style="color: #150281;" href="https://mariadb.com/kb/en/views/">view</a>, which must exist. The
syntax is similar to that for <a style="color: #150281;" href="https://mariadb.com/kb/en/create-view/">CREATE VIEW</a> and the effect is the same
as for <code>CREATE OR REPLACE VIEW</code> if the view exists. This statement
requires the <code>CREATE VIEW</code> and <code>DROP</code> <a href="#granttable-privileges">privileges</a> for the view, and some
privilege for each column referred to in the <code>SELECT</code> statement. <code>ALTER VIEW</code> is allowed only to the definer or users with the <a href="#grantglobal-privileges">SUPER</a> privilege.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="alter-viewexample">Example</h2>
<pre class="fixed"><span class="k">ALTER</span> <span class="k">VIEW</span> <span class="n">v</span> <span class="k">AS</span> <span class="k">SELECT</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="o">*</span><span class="mi">3</span> <span class="k">AS</span> <span class="n">a2</span> <span class="k">FROM</span> <span class="n">t</span><span class="p">;</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="alter-viewsee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/create-view/">CREATE VIEW</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/drop-view/">DROP VIEW</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-create-view/">SHOW CREATE VIEW</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-views-table/">INFORMATION SCHEMA VIEWS Table</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="analyze-table">1.1.2.1.3 ANALYZE TABLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="analyze-tablesyntax">Syntax</h2>
<pre class="fixed">ANALYZE [NO_WRITE_TO_BINLOG | LOCAL] TABLE tbl_name [,tbl_name ...] 
  [PERSISTENT FOR [ALL|COLUMNS ([col_name [,col_name ...]])] 
    [INDEXES ([index_name [,index_name ...]])]]           
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#analyze-tablesyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#analyze-tabledescription" title="Description">Description</a></li>

    <li class=""><a href="#analyze-tableengine-independent-statistics" title="Engine-Independent Statistics">Engine-Independent Statistics</a></li>

    <li class=""><a href="#analyze-tablesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="analyze-tabledescription">Description</h2>
<p><code>ANALYZE TABLE</code> analyzes and stores the key distribution for a
table (<a style="color: #150281;" href="https://mariadb.com/kb/en/index-statistics/">index statistics</a>). This statement works with <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam/">MyISAM</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a> tables. During the analysis, InnoDB will allow reads/writes, and MyISAM/Aria reads/inserts. For MyISAM tables, this statement is equivalent to using <a style="color: #150281;" href="https://mariadb.com/kb/en/myisamchk/">myisamchk --analyze</a>.</p>
<p>For more information on how the analysis works within InnoDB, see
<a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-limitations/#table-analysis">InnoDB Limitations</a>.</p>
<p>MariaDB uses the stored key distribution to decide the order in which
tables should be joined when you perform a join on something other than
a constant. In addition, key distributions can be used when deciding
which indexes to use for a specific table within a query.</p>
<p>This statement requires <a href="#grant">SELECT and INSERT privileges</a> for the table.</p>
<p>By default, ANALYZE TABLE statements are written to the <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log/">binary log</a> and will be <a style="color: #150281;" href="https://mariadb.com/kb/en/replication/">replicated</a>. The <code>NO_WRITE_TO_BINLOG</code> keyword (<code>LOCAL</code> is an alias) will ensure the statement is not written to the binary log. </p>
<p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10319-release-notes/">MariaDB 10.3.19</a>, <code>ANALYZE TABLE</code> statements are not logged to the binary log if <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#read_only">read_only</a> is set. See also <a style="color: #150281;" href="https://mariadb.com/kb/en/read-only-replicas/">Read-Only Replicas</a>.</p>
<p><code>ANALYZE TABLE</code> is also supported for partitioned tables. You
can use <code><a href="#alter-table">ALTER TABLE</a> ... ANALYZE PARTITION</code> to analyze one or
more partitions.</p>
<p>The <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a> storage engine supports <a style="color: #150281;" href="https://mariadb.com/kb/en/progress-reporting/">progress reporting</a> for the <code>ANALYZE TABLE</code> statement.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="analyze-tableengine-independent-statistics">Engine-Independent Statistics</h2>
<p><code>ANALYZE TABLE</code> supports <a style="color: #150281;" href="https://mariadb.com/kb/en/engine-independent-table-statistics/">engine-independent statistics</a>. See <a style="color: #150281;" href="https://mariadb.com/kb/en/engine-independent-table-statistics/#collecting-statistics-with-the-analyze-table-statement">Engine-Independent Table Statistics: Collecting Statistics with the ANALYZE TABLE Statement</a> for more information.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="analyze-tablesee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/index-statistics/">Index Statistics</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-persistent-statistics/">InnoDB Persistent Statistics</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/progress-reporting/">Progress Reporting</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/engine-independent-table-statistics/">Engine-independent Statistics</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/histogram-based-statistics/">Histogram-based Statistics</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/analyze-statement/">ANALYZE Statement</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="check-table">1.1.2.1.4 CHECK TABLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="syntax">Syntax</h2>
<pre class="fixed">CHECK TABLE tbl_name [, tbl_name] ... [option] ...

option = {FOR UPGRADE | QUICK | FAST | MEDIUM | EXTENDED | CHANGED}
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="description">Description</h2>
<p><code>CHECK TABLE</code> checks a table or tables for errors. <code>CHECK TABLE</code> works for
<a style="color: #150281;" href="https://mariadb.com/kb/en/archive/">Archive</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/csv/">CSV</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a>, and <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam/">MyISAM</a> tables. For Aria and MyISAM tables, the
key statistics are updated as well. For CSV, see also <a style="color: #150281;" href="https://mariadb.com/kb/en/checking-and-repairing-csv-tables/">Checking and Repairing CSV Tables</a>.</p>
<p>As an alternative, <a style="color: #150281;" href="https://mariadb.com/kb/en/myisamchk/">myisamchk</a> is a commandline tool for checking MyISAM tables when the tables are not being accessed.</p>
<p>For checking <a style="color: #150281;" href="https://mariadb.com/kb/en/dynamic-columns/">dynamic columns</a> integrity, <code><a style="color: #150281;" href="https://mariadb.com/kb/en/dynamic-columns-in-mariadb-10/#column_check">COLUMN_CHECK()</a></code> can be used.</p>
<p><code>CHECK TABLE</code> can also check views for problems, such as tables
that are referenced in the view definition that no longer exist.</p>
<p><code>CHECK TABLE</code> is also supported for partitioned tables. You can
use <code class="highlight fixed" style="white-space:pre-wrap"><a href="#alter-table">ALTER TABLE</a> ... CHECK PARTITION</code> 
to check one or more partitions.</p>
<p>The meaning of the different options are as follows - note that this can vary a bit between
storage engines:</p>
<div class="cstm-style borders"><table><tbody><tr><td>FOR UPGRADE</td><td>Do a very quick check if the storage format for the table has changed so that one needs to do a REPAIR. This is only needed when one upgrades between major versions of MariaDB or MySQL. This is usually done by <a style="color: #150281;" href="https://mariadb.com/kb/en/upgrading-to-mariadb-from-mysql/">running mysql_upgrade</a>.</td></tr>
<tr><td>FAST</td><td>Only check tables that has not been closed properly or are marked as corrupt. Only supported by the MyISAM and Aria engines. For other  engines the table is checked normally</td></tr>
<tr><td>CHANGED</td><td>Check only tables that has changed since last REPAIR / CHECK. Only supported by the MyISAM and Aria engines. For other  engines the table is checked normally.</td></tr>
<tr><td>QUICK</td><td>Do a fast check. For MyISAM and Aria engine this means we skip checking the delete link chain which may take some time.</td></tr>
<tr><td>MEDIUM</td><td>Scan also the data files. Checks integrity between data and index files with checksums. In most cases this should find all possible errors.</td></tr>
<tr><td>EXTENDED</td><td>Does a full check to verify every possible error. For MyISAM and Aria we verify for each row that all it keys exists and points to the row. This may take a long time on big tables!</td></tr>
</tbody></table>
</div><p>For most cases running <code>CHECK TABLE</code> without options or <code>MEDIUM</code> should be
good enough.</p>
<p>The <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a> storage engine supports <a style="color: #150281;" href="https://mariadb.com/kb/en/progress-reporting/">progress reporting</a> for this statement.</p>
<p>If you want to know if two tables are identical, take a look
at <code class="highlight fixed" style="white-space:pre-wrap"><a href="#checksum-table">CHECKSUM TABLE</a></code>.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="innodb">InnoDB</h2>
<p>If <code>CHECK TABLE</code> finds an error in an InnoDB table, MariaDB might shutdown to prevent the error propagation. In this case, the problem will be reported in the error log. Otherwise the table or an index might be marked as corrupted, to prevent use. This does not happen with some minor problems, like a wrong number of entries in a secondary index. Those problems are reported in the output of <code>CHECK TABLE</code>.</p>
<p>Each tablespace contains a header with metadata. This header is not checked by this statement.</p>
<p>During the execution of <code>CHECK TABLE</code>, other threads may be blocked.</p>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="check-view">1.1.2.1.5 CHECK VIEW</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="syntax">Syntax</h2>
<pre class="fixed">CHECK VIEW view_name
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="description">Description</h2>
<p>The <code>CHECK VIEW</code> statement was introduced in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10018-release-notes/">MariaDB 10.0.18</a> to assist with fixing <a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-6916">MDEV-6916</a>, an issue introduced in <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-52/">MariaDB 5.2</a> where the view algorithms were swapped. It checks whether the view algorithm is correct. It is run as part of <a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_upgrade/">mysql_upgrade</a>, and should not normally be required in regular use.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="see-also">See Also</h2>
<ul start="1"><li><a href="#repair-view">REPAIR VIEW</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="checksum-table">1.1.2.1.6 CHECKSUM TABLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="checksum-tablesyntax">Syntax</h2>
<pre class="fixed">CHECKSUM TABLE tbl_name [, tbl_name] ... [ QUICK | EXTENDED ]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#checksum-tablesyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#checksum-tabledescription" title="Description">Description</a></li>

    <li class=""><a href="#checksum-tabledifferences-between-mariadb-and-mysql" title="Differences Between MariaDB and MySQL">Differences Between MariaDB and MySQL</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="checksum-tabledescription">Description</h2>
<p><code class="fixed" style="white-space:pre-wrap">CHECKSUM TABLE</code> reports a table checksum.  This is very
useful if you want to know if two tables are the same (for example on a master
and slave).</p>
<p>With <code class="fixed" style="white-space:pre-wrap">QUICK</code>, the live table checksum is reported if it is
available, or <code class="fixed" style="white-space:pre-wrap">NULL</code> otherwise. This is very fast. A live
checksum is enabled by specifying the <code class="fixed" style="white-space:pre-wrap">CHECKSUM=1</code> table
option when you <a href="#create-table">create the table</a>; currently, this is supported
only for <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam/">MyISAM</a> tables.</p>
<p>With <code class="fixed" style="white-space:pre-wrap">EXTENDED</code>, the entire table is read row by row and the
checksum is calculated. This can be very slow for large tables.</p>
<p>If neither <code class="fixed" style="white-space:pre-wrap">QUICK</code> nor <code class="fixed" style="white-space:pre-wrap">EXTENDED</code> is
specified, MariaDB returns a live checksum if the table storage engine supports
it and scans the table otherwise.</p>
<p><code>CHECKSUM TABLE</code> requires the <a href="#granttable-privileges">SELECT privilege</a> for the table.</p>
<p>For a nonexistent table, <code class="fixed" style="white-space:pre-wrap">CHECKSUM TABLE</code> returns
<code class="fixed" style="white-space:pre-wrap">NULL</code> and generates a warning.</p>
<p>The table row format affects the checksum value. If the row format changes, the checksum will change. This means that when a table created with a MariaDB/MySQL version is upgraded to another version, the checksum value will probably change.</p>
<p>Two identical tables should always match to the same checksum value; however, also for non-identical tables there is a very slight chance that they will return the same value as the hashing algorithm is not completely collision-free.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="checksum-tabledifferences-between-mariadb-and-mysql">Differences Between MariaDB and MySQL</h2>
<p><code class="fixed" style="white-space:pre-wrap">CHECKSUM TABLE</code> may give a different result as MariaDB doesn't
ignore <code class="fixed" style="white-space:pre-wrap">NULL</code>s in the columns as MySQL 5.1 does (Later MySQL
versions should calculate checksums the same way as MariaDB). You can get the
'old style' checksum in MariaDB by starting mysqld with the
<code class="fixed" style="white-space:pre-wrap">--old</code> option. Note however that that the MyISAM and Aria
storage engines in MariaDB are using the new checksum internally, so if you are
using <code class="fixed" style="white-space:pre-wrap">--old</code>, the <code class="fixed" style="white-space:pre-wrap">CHECKSUM</code> command will be
slower as it needs to calculate the checksum row by row. Starting from MariaDB Server 10.9, <code class="fixed" style="white-space:pre-wrap">--old</code> is deprecated and will be removed in a future release. Set <code class="fixed" style="white-space:pre-wrap">--old-mode</code> or <code class="fixed" style="white-space:pre-wrap">OLD_MODE</code> to <code class="fixed" style="white-space:pre-wrap">COMPAT_5_1_CHECKSUM</code> to get 'old style' checksum.</p>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section>
<div style = "display:block; clear:both; page-break-after:always;"></div>
<section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="create-table">1.1.2.1.7 CREATE TABLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="create-tablesyntax">Syntax</h2>
<pre class="highlight fixed"><p>CREATE [OR REPLACE] [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name
    (<a href="#create-tablecolumn-definitions">create_definition</a>,...) <code>[</code><a href="#create-tabletable-options">table_options</a>    <code>]</code>... <code>[</code><a href="#create-tablepartitions">partition_options</a><code>]</code>
CREATE [OR REPLACE] [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name
    [(<a href="#create-tablecolumn-definitions">create_definition</a>,...)] <code>[</code><a href="#create-tabletable-options">table_options</a>   <code>]</code>... <code>[</code><a href="#create-tablepartitions">partition_options</a><code>]</code>
    select_statement
CREATE [OR REPLACE] [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name
   { LIKE old_table_name | (LIKE old_table_name) }</p>
<p>select_statement:
    [IGNORE | REPLACE] [AS] SELECT ...   (Some legal select statement)</p></pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#create-tablesyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#create-tabledescription" title="Description">Description</a></li>

    <li class=""><a href="#create-tableprivileges" title="Privileges">Privileges</a></li>

    <li class=""><a href="#create-tablecreate-or-replace" title="CREATE OR REPLACE">CREATE OR REPLACE</a>    <ol class="toc">

        <li class=""><a href="#create-tablethings-to-be-aware-of-with-create-or-replace" title="Things to be Aware of With CREATE OR REPLACE">Things to be Aware of With CREATE OR REPLACE</a>    </li></ol>
</li>

    <li class=""><a href="#create-tablecreate-table-if-not-exists" title="CREATE TABLE IF NOT EXISTS">CREATE TABLE IF NOT EXISTS</a></li>

    <li class=""><a href="#create-tablecreate-temporary-table" title="CREATE TEMPORARY TABLE">CREATE TEMPORARY TABLE</a></li>

    <li class=""><a href="#create-tablecreate-table-like" title="CREATE TABLE ... LIKE">CREATE TABLE ... LIKE</a></li>

    <li class=""><a href="#create-tablecreate-table-select" title="CREATE TABLE ... SELECT">CREATE TABLE ... SELECT</a></li>

    <li class=""><a href="#create-tablecolumn-definitions" title="Column Definitions">Column Definitions</a>    <ol class="toc">

        <li class=""><a href="#create-tablenull-and-not-null" title="NULL and NOT NULL">NULL and NOT NULL</a></li>

        <li class=""><a href="#create-tabledefault-column-option" title="DEFAULT Column Option">DEFAULT Column Option</a></li>

        <li class=""><a href="#create-tableauto_increment-column-option" title="AUTO_INCREMENT Column Option">AUTO_INCREMENT Column Option</a></li>

        <li class=""><a href="#create-tablezerofill-column-option" title="ZEROFILL Column Option">ZEROFILL Column Option</a></li>

        <li class=""><a href="#create-tableprimary-key-column-option" title="PRIMARY KEY Column Option">PRIMARY KEY Column Option</a></li>

        <li class=""><a href="#create-tableunique-key-column-option" title="UNIQUE KEY Column Option">UNIQUE KEY Column Option</a></li>

        <li class=""><a href="#create-tablecomment-column-option" title="COMMENT Column Option">COMMENT Column Option</a></li>

        <li class=""><a href="#create-tableref_system_id" title="REF_SYSTEM_ID">REF_SYSTEM_ID</a></li>

        <li class=""><a href="#create-tablegenerated-columns" title="Generated Columns">Generated Columns</a></li>

        <li class=""><a href="#create-tablecompressed" title="COMPRESSED">COMPRESSED</a></li>

        <li class=""><a href="#create-tableinvisible" title="INVISIBLE">INVISIBLE</a></li>

        <li class=""><a href="#create-tablewith-system-versioning-column-option" title="WITH SYSTEM VERSIONING Column Option">WITH SYSTEM VERSIONING Column Option</a></li>

        <li class=""><a href="#create-tablewithout-system-versioning-column-option" title="WITHOUT SYSTEM VERSIONING Column Option">WITHOUT SYSTEM VERSIONING Column Option</a>    </li></ol>
</li>

    <li class=""><a href="#create-tableindex-definitions" title="Index Definitions">Index Definitions</a>    <ol class="toc">

        <li class=""><a href="#create-tableindex-categories" title="Index Categories">Index Categories</a>        <ol class="toc">

            <li class=""><a href="#create-tableplain-indexes" title="Plain Indexes">Plain Indexes</a></li>

            <li class=""><a href="#create-tableprimary-key" title="PRIMARY KEY">PRIMARY KEY</a></li>

            <li class=""><a href="#create-tableunique" title="UNIQUE">UNIQUE</a></li>

            <li class=""><a href="#create-tableforeign-key" title="FOREIGN KEY">FOREIGN KEY</a></li>

            <li class=""><a href="#create-tablefulltext" title="FULLTEXT">FULLTEXT</a></li>

            <li class=""><a href="#create-tablespatial" title="SPATIAL">SPATIAL</a>        </li></ol>
</li>

        <li class=""><a href="#create-tableindex-options" title="Index Options">Index Options</a>        <ol class="toc">

            <li class=""><a href="#create-tablekey_block_size-index-option" title="KEY_BLOCK_SIZE Index Option">KEY_BLOCK_SIZE Index Option</a></li>

            <li class=""><a href="#create-tableindex-types" title="Index Types">Index Types</a></li>

            <li class=""><a href="#create-tablewith-parser-index-option" title="WITH PARSER Index Option">WITH PARSER Index Option</a></li>

            <li class=""><a href="#create-tablecomment-index-option" title="COMMENT Index Option">COMMENT Index Option</a></li>

            <li class=""><a href="#create-tableclustering-index-option" title="CLUSTERING Index Option">CLUSTERING Index Option</a></li>

            <li class=""><a href="#create-tableignored-not-ignored" title="IGNORED / NOT IGNORED">IGNORED / NOT IGNORED</a>        </li></ol>
    </li></ol>
</li>

    <li class=""><a href="#create-tableperiods" title="Periods">Periods</a></li>

    <li class=""><a href="#create-tableconstraint-expressions" title="Constraint Expressions">Constraint Expressions</a></li>

    <li class=""><a href="#create-tabletable-options" title="Table Options">Table Options</a>    <ol class="toc">

        <li class=""><a href="#create-tablestorage-engine" title="[STORAGE] ENGINE">[STORAGE] ENGINE</a></li>

        <li class=""><a href="#create-tableauto_increment" title="AUTO_INCREMENT">AUTO_INCREMENT</a></li>

        <li class=""><a href="#create-tableavg_row_length" title="AVG_ROW_LENGTH">AVG_ROW_LENGTH</a></li>

        <li class=""><a href="#create-tabledefault-character-setcharset" title="[DEFAULT] CHARACTER SET/CHARSET">[DEFAULT] CHARACTER SET/CHARSET</a></li>

        <li class=""><a href="#create-tablechecksumtable_checksum" title="CHECKSUM/TABLE_CHECKSUM">CHECKSUM/TABLE_CHECKSUM</a></li>

        <li class=""><a href="#create-tabledefault-collate" title="[DEFAULT] COLLATE">[DEFAULT] COLLATE</a></li>

        <li class=""><a href="#create-tablecomment" title="COMMENT">COMMENT</a></li>

        <li class=""><a href="#create-tableconnection" title="CONNECTION">CONNECTION</a></li>

        <li class=""><a href="#create-tabledata-directoryindex-directory" title="DATA DIRECTORY/INDEX DIRECTORY">DATA DIRECTORY/INDEX DIRECTORY</a></li>

        <li class=""><a href="#create-tabledelay_key_write" title="DELAY_KEY_WRITE">DELAY_KEY_WRITE</a></li>

        <li class=""><a href="#create-tableencrypted" title="ENCRYPTED">ENCRYPTED</a></li>

        <li class=""><a href="#create-tableencryption_key_id" title="ENCRYPTION_KEY_ID">ENCRYPTION_KEY_ID</a></li>

        <li class=""><a href="#create-tableietf_quotes" title="IETF_QUOTES">IETF_QUOTES</a></li>

        <li class=""><a href="#create-tableinsert_method" title="INSERT_METHOD">INSERT_METHOD</a></li>

        <li class=""><a href="#create-tablekey_block_size" title="KEY_BLOCK_SIZE">KEY_BLOCK_SIZE</a></li>

        <li class=""><a href="#create-tablemin_rowsmax_rows" title="MIN_ROWS/MAX_ROWS">MIN_ROWS/MAX_ROWS</a></li>

        <li class=""><a href="#create-tablepack_keys" title="PACK_KEYS">PACK_KEYS</a></li>

        <li class=""><a href="#create-tablepage_checksum" title="PAGE_CHECKSUM">PAGE_CHECKSUM</a></li>

        <li class=""><a href="#create-tablepage_compressed" title="PAGE_COMPRESSED">PAGE_COMPRESSED</a></li>

        <li class=""><a href="#create-tablepage_compression_level" title="PAGE_COMPRESSION_LEVEL">PAGE_COMPRESSION_LEVEL</a></li>

        <li class=""><a href="#create-tablepassword" title="PASSWORD">PASSWORD</a></li>

        <li class=""><a href="#create-tableraid_type" title="RAID_TYPE">RAID_TYPE</a></li>

        <li class=""><a href="#create-tablerow_format" title="ROW_FORMAT">ROW_FORMAT</a>        <ol class="toc">

            <li class=""><a href="#create-tablesupported-myisam-row-formats" title="Supported MyISAM Row Formats">Supported MyISAM Row Formats</a></li>

            <li class=""><a href="#create-tablesupported-aria-row-formats" title="Supported Aria Row Formats">Supported Aria Row Formats</a></li>

            <li class=""><a href="#create-tablesupported-innodb-row-formats" title="Supported InnoDB Row Formats">Supported InnoDB Row Formats</a></li>

            <li class=""><a href="#create-tableother-storage-engines-and-row_format" title="Other Storage Engines and ROW_FORMAT">Other Storage Engines and ROW_FORMAT</a>        </li></ol>
</li>

        <li class=""><a href="#create-tablesequence" title="SEQUENCE">SEQUENCE</a></li>

        <li class=""><a href="#create-tablestats_auto_recalc" title="STATS_AUTO_RECALC">STATS_AUTO_RECALC</a></li>

        <li class=""><a href="#create-tablestats_persistent" title="STATS_PERSISTENT">STATS_PERSISTENT</a></li>

        <li class=""><a href="#create-tablestats_sample_pages" title="STATS_SAMPLE_PAGES">STATS_SAMPLE_PAGES</a></li>

        <li class=""><a href="#create-tabletransactional" title="TRANSACTIONAL">TRANSACTIONAL</a></li>

        <li class=""><a href="#create-tableunion" title="UNION">UNION</a></li>

        <li class=""><a href="#create-tablewith-system-versioning" title="WITH SYSTEM VERSIONING">WITH SYSTEM VERSIONING</a>    </li></ol>
</li>

    <li class=""><a href="#create-tablepartitions" title="Partitions">Partitions</a></li>

    <li class=""><a href="#create-tablesequences" title="Sequences">Sequences</a></li>

    <li class=""><a href="#create-tableatomic-ddl" title="Atomic DDL">Atomic DDL</a></li>

    <li class=""><a href="#create-tableexamples" title="Examples">Examples</a></li>

    <li class=""><a href="#create-tablesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-tabledescription">Description</h2>
<p>Use the <code>CREATE TABLE</code> statement to create a table with the given name.</p>
<p>In its most basic form, the <code>CREATE TABLE</code> statement provides a table name
followed by a list of columns, indexes, and constraints. By default, the table
is created in the default database. Specify a database with <code><em>db_name</em>.<em>tbl_name</em></code>.
If you quote the table name, you must quote the database name and table name
separately as <code>`<em>db_name</em>`.`<em>tbl_name</em>`</code>. This is particularly useful for <a href="#create-tablecreate-table-select">CREATE TABLE ... SELECT</a>, because it allows to create a table into a database, which contains data from other databases. See <a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-qualifiers/">Identifier Qualifiers</a>.</p>
<p>If a table with the same name exists, error 1050 results. Use <a href="#create-tablecreate-table-if-not-exists">IF NOT EXISTS</a>
to suppress this error and issue a note instead. Use <a style="color: #150281;" href="https://mariadb.com/kb/en/show-warnings/">SHOW WARNINGS</a>
to see notes.</p>
<p>The <code>CREATE TABLE</code> statement automatically commits the current transaction,
except when using the <a href="#create-tablecreate-temporary-table">TEMPORARY</a> keyword.</p>
<p>For valid identifiers to use as table names, see <a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-names/">Identifier Names</a>.</p>
<div class="cstm-style greenbox"><p><strong>Note:</strong> if the default_storage_engine is set to ColumnStore then it needs setting on all UMs. Otherwise when the tables using the default engine are replicated across UMs they will use the wrong engine. You should therefore not use this option as a session variable with ColumnStore.</p>
</div><p><a style="color: #150281;" href="https://mariadb.com/kb/en/microseconds-in-mariadb/">Microsecond precision</a> can be between 0-6. If no precision is specified it is assumed to be 0, for backward compatibility reasons.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-tableprivileges">Privileges</h2>
<p>Executing the <code>CREATE TABLE</code> statement requires the <a href="#granttable-privileges">CREATE</a> privilege for the table or the database.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-tablecreate-or-replace">CREATE OR REPLACE</h2>
<p>If the <code>OR REPLACE</code> clause is used and the table already exists, then instead of returning an error, the server will drop the existing table and replace it with the newly defined table.</p>
<p>This syntax was originally added to make <a style="color: #150281;" href="https://mariadb.com/kb/en/replication/">replication</a> more robust if it has to rollback and repeat statements such as <code>CREATE ... SELECT</code> on replicas.</p>
<pre class="fixed">CREATE OR REPLACE TABLE table_name (a int);
</pre><p>is basically the same as:</p>
<pre class="fixed">DROP TABLE IF EXISTS table_name;
CREATE TABLE table_name (a int);
</pre><p>with the following exceptions:</p>
<ul start="1"><li>If <code class="highlight fixed" style="white-space:pre-wrap">table_name</code> was locked with <a style="color: #150281;" href="https://mariadb.com/kb/en/lock-tables-and-unlock-tables/">LOCK TABLES</a> it will continue to be locked after the statement.
</li><li>Temporary tables are only dropped if the <code class="highlight fixed" style="white-space:pre-wrap">TEMPORARY</code> keyword was used.  (With <a href="#drop-table">DROP TABLE</a>,  temporary tables are preferred to be dropped before normal tables).
</li></ul>
<h3 class="anchored_heading" id="create-tablethings-to-be-aware-of-with-create-or-replace">Things to be Aware of With CREATE OR REPLACE</h3>
<ul start="1"><li>The table is dropped first (if it existed), after that the <code class="highlight fixed" style="white-space:pre-wrap">CREATE</code> is done. Because of this, if the <code class="highlight fixed" style="white-space:pre-wrap">CREATE</code> fails, then the table will not exist anymore after the statement.  If the table was used with <code class="highlight fixed" style="white-space:pre-wrap">LOCK TABLES</code> it will be unlocked.
</li><li>One can't use <code class="highlight fixed" style="white-space:pre-wrap">OR REPLACE</code> together with <code class="highlight fixed" style="white-space:pre-wrap">IF EXISTS</code>.
</li><li>Slaves in replication will by default use <code class="highlight fixed" style="white-space:pre-wrap">CREATE OR REPLACE</code> when replicating <code class="highlight fixed" style="white-space:pre-wrap">CREATE</code> statements that don''t use <code class="highlight fixed" style="white-space:pre-wrap">IF EXISTS</code>. This can be changed by setting the variable <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-server-system-variables/#slave_ddl_exec_mode">slave-ddl-exec-mode</a> to <code class="highlight fixed" style="white-space:pre-wrap">STRICT</code>.
</li></ul>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-tablecreate-table-if-not-exists">CREATE TABLE IF NOT EXISTS</h2>
<p>If the <code>IF NOT EXISTS</code> clause is used, then the table will only be created if a table with the same name does not already exist. If the table already exists, then a warning will be triggered by default.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-tablecreate-temporary-table">CREATE TEMPORARY TABLE</h2>
<p>Use the <code>TEMPORARY</code> keyword to create a temporary table that is only available to the current session. Temporary tables are dropped when the session ends. Temporary table names are specific to the session. They will not conflict with other temporary tables from other sessions even if they share the same name. They will shadow names of non-temporary tables or views, if they are identical. A temporary table can have the same name as a non-temporary table which is located in the same database. In that case, their name will reference the temporary table when used in SQL statements. You must have the <a href="#grantdatabase-privileges">CREATE TEMPORARY TABLES</a> privilege on the database to create temporary tables. If no storage engine is specified, the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#default_tmp_storage_engine">default_tmp_storage_engine</a> setting will determine the engine.</p>
<p><a style="color: #150281;" href="https://mariadb.com/kb/en/myrocks/">ROCKSDB</a> temporary tables cannot be created by setting the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#default_tmp_storage_engine">default_tmp_storage_engine</a> system variable, or using <code>CREATE TEMPORARY TABLE LIKE</code>. Before <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-107/">MariaDB 10.7</a>, they could be specified, but would silently fail, and a MyISAM table would be created instead. From <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-107/">MariaDB 10.7</a> an error is returned. Explicitly creating a temporary table with <code>ENGINE=ROCKSDB</code> has never been permitted.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-tablecreate-table-like">CREATE TABLE ... LIKE</h2>
<p>Use the <code>LIKE</code> clause instead of a full table definition to create a table with the same definition as another table, including columns, indexes, and table options. Foreign key definitions, as well as any DATA DIRECTORY or INDEX DIRECTORY table options specified on the original table, will not be created.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-tablecreate-table-select">CREATE TABLE ... SELECT</h2>
<p>You can create a table containing data from other tables using the <code>CREATE ... SELECT</code> statement. Columns will be created in the table for each field returned by the <code>SELECT</code> query.</p>
<p>You can also define some columns normally and add other columns from a <code>SELECT</code>. You can also create columns in the normal way and assign them some values using the query, this is done to force a certain type or other field characteristics. The columns that are not named in the query will be placed before the others. For example:</p>
<pre class="fixed">CREATE TABLE test (a INT NOT NULL, b CHAR(10)) ENGINE=MyISAM
    SELECT 5 AS b, c, d FROM another_table;
</pre><p>Remember that the query just returns data. If you want to use the same indexes, or the same columns attributes (<code>[NOT] NULL</code>, <code>DEFAULT</code>, <code>AUTO_INCREMENT</code>) in the new table, you need to specify them manually. Types and sizes are not automatically preserved if no data returned by the <code>SELECT</code> requires the full size, and <code>VARCHAR</code> could be converted into <code>CHAR</code>. The <a style="color: #150281;" href="https://mariadb.com/kb/en/cast/">CAST()</a> function can be used to forcee the new table to use certain types.</p>
<p>Aliases (<code>AS</code>) are taken into account, and they should always be used when you <code>SELECT</code> an expression (function, arithmetical operation, etc).</p>
<p>If an error occurs during the query, the table will not be created at all.</p>
<p>If the new table has a primary key or <code>UNIQUE</code> indexes, you can use the <a style="color: #150281;" href="https://mariadb.com/kb/en/ignore/">IGNORE</a> or <code>REPLACE</code> keywords to handle duplicate key errors during the query. <code>IGNORE</code> means that the newer values must not be inserted an identical value exists in the index. <code>REPLACE</code> means that older values must be overwritten.</p>
<p>If the columns in the new table are more than the rows returned by the query, the columns populated by the query will be placed after other columns. Note that if the strict <code>SQL_MODE</code> is on, and the columns that are not names in the query do not have a <code>DEFAULT</code> value, an error will raise and no rows will be copied.</p>
<p><a style="color: #150281;" href="https://mariadb.com/kb/en/concurrent-inserts/">Concurrent inserts</a> are not used during the execution of a <code>CREATE ... SELECT</code>.</p>
<p>If the table already exists, an error similar to the following will be returned:</p>
<pre class="fixed">ERROR 1050 (42S01): Table 't' already exists
</pre><p>If the <code>IF NOT EXISTS</code> clause is used and the table exists, a note will be produced instead of an error.</p>
<p>To insert rows from a query into an existing table, <a style="color: #150281;" href="https://mariadb.com/kb/en/insert-select/">INSERT ... SELECT</a> can be used.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-tablecolumn-definitions">Column Definitions</h2>
<pre class="highlight fixed"><p>create_definition:
  { col_name column_definition <code>|</code> <a href="#create-tableindex-definitions">index_definition</a> <code>|</code> <a href="#create-tableperiods">period_definition</a> <code>|</code> CHECK (expr) }</p>
<p>column_definition:
  <a style="color: #150281;" href="https://mariadb.com/kb/en/data-types/">data_type</a>
    [NOT NULL | NULL] [DEFAULT default_value | (expression)]
    [ON UPDATE [NOW | CURRENT_TIMESTAMP] [(precision)]]
    [AUTO_INCREMENT] [ZEROFILL] [UNIQUE [KEY] | [PRIMARY] KEY]
    [INVISIBLE] [{WITH|WITHOUT} SYSTEM VERSIONING]
    [COMMENT 'string'] [REF_SYSTEM_ID = value]
    <code>[</code><a href="#create-tableindex-definitions">reference_definition</a><code>]</code>
  <code>|</code> <a style="color: #150281;" href="https://mariadb.com/kb/en/data-types/">data_type</a> [GENERATED ALWAYS] 
  AS { { ROW {START<code>|</code>END} } | { (expression) [VIRTUAL | PERSISTENT | STORED] } }
      [UNIQUE [KEY]] [COMMENT 'string']</p>
<p>constraint_definition:
   CONSTRAINT [constraint_name] CHECK (expression)</p></pre><div class="cstm-style greenbox"><p><strong>Note:</strong> Until <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-104/">MariaDB 10.4</a>, MariaDB accepts the shortcut format with a REFERENCES clause only in ALTER TABLE and CREATE TABLE statements, but that syntax does nothing. For example:</p>
<pre class="fixed">CREATE TABLE b(for_key INT REFERENCES a(not_key));
</pre><p>MariaDB simply parses it without returning any error or warning, for compatibility with other DBMS's. Before <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a> this was also true for <code>CHECK</code> constraints. However, only the syntax described below creates foreign keys.</p>
<p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-105/">MariaDB 10.5</a>, MariaDB will attempt to apply the constraint. See <a style="color: #150281;" href="https://mariadb.com/kb/en/foreign-keys/#references">Foreign Keys examples</a>.</p>
</div><p>Each definition either creates a column in the table or specifies and index or
constraint on one or more columns. See <a href="#create-tableindexes">Indexes</a> below for details
on creating indexes.</p>
<p>Create a column by specifying a column name and a data type, optionally
followed by column options. See <a style="color: #150281;" href="https://mariadb.com/kb/en/data-types/">Data Types</a> for a full list
of data types allowed in MariaDB.</p>
<h3 class="anchored_heading" id="create-tablenull-and-not-null">NULL and NOT NULL</h3>
<p>Use the <code>NULL</code> or <code>NOT NULL</code> options to specify that values in the column
may or may not be <code>NULL</code>, respectively. By default, values may be <code>NULL</code>. See also <a style="color: #150281;" href="https://mariadb.com/kb/en/null-values-in-mariadb/">NULL Values in MariaDB</a>.</p>
<h3 class="anchored_heading" id="create-tabledefault-column-option">DEFAULT Column Option</h3>
<div class="mariadb_from_10_2_1 mariadb from_10_2_1 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">10.2.1</a></h5><p>The <code>DEFAULT</code> clause was enhanced in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a>. Some enhancements include</p>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/blob/">BLOB</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/text/">TEXT</a> columns now support <code>DEFAULT</code>.
</li><li>The <code>DEFAULT</code> clause can now be used with an expression or function.
</li></ul>
</div><p>Specify a default value using the <code>DEFAULT</code> clause. If you don't specify <code>DEFAULT</code> then the following rules apply:</p>
<ul start="1"><li>If the column is not defined with <code>NOT NULL</code>, <code>AUTO_INCREMENT</code> or <code>TIMESTAMP</code>, an explicit <code>DEFAULT NULL</code> will be added.
Note that in MySQL and in MariaDB before 10.1.6, you may get an explicit <code>DEFAULT</code> for primary key parts, if not specified with NOT NULL.
</li></ul>
<p>The default value will be used if you <a style="color: #150281;" href="https://mariadb.com/kb/en/insert/">INSERT</a> a row without specifying a value for that column, or if you specify <a style="color: #150281;" href="https://mariadb.com/kb/en/default/">DEFAULT</a> for that column.
Before <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a> you couldn't usually provide an expression or function to evaluate at
insertion time. You had to provide a constant default value instead. The one
exception is that you may use <a style="color: #150281;" href="https://mariadb.com/kb/en/now/">CURRENT_TIMESTAMP</a> as
the default value for a <a style="color: #150281;" href="https://mariadb.com/kb/en/timestamp/">TIMESTAMP</a> column to use the current
timestamp at insertion time.</p>
<p><a style="color: #150281;" href="https://mariadb.com/kb/en/now/">CURRENT_TIMESTAMP</a> may also be used as
the default value for a <a style="color: #150281;" href="https://mariadb.com/kb/en/datetime/">DATETIME</a></p>
<p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a> you can use most functions in <code>DEFAULT</code>.  Expressions should have parentheses around them. If you use a non deterministic function in <code>DEFAULT</code> then all inserts to the table will be <a style="color: #150281;" href="https://mariadb.com/kb/en/replication/">replicated</a> in <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log-formats/#row-based">row mode</a>. You can even refer to earlier columns in the <code>DEFAULT</code> expression (excluding <code>AUTO_INCREMENT</code> columns):</p>
<pre class="fixed">CREATE TABLE t1 (a int DEFAULT (1+1), b int DEFAULT (a+1));
CREATE TABLE t2 (a bigint primary key DEFAULT UUID_SHORT());
</pre><p>The <code>DEFAULT</code> clause cannot contain any <a style="color: #150281;" href="https://mariadb.com/kb/en/stored-functions/">stored functions</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/subqueries/">subqueries</a>, and a column used in the clause must already have been defined earlier in the statement.</p>
<p>Since <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a>, it is possible to assign <a style="color: #150281;" href="https://mariadb.com/kb/en/blob/">BLOB</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/text/">TEXT</a> columns a <code>DEFAULT</code> value. In earlier versions, assigning a default to these columns was not possible.</p>
<div class="mariadb_from_10_3_3 mariadb from_10_3_3 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1033-release-notes/">10.3.3</a></h5><p>Starting from 10.3.3 you can also use DEFAULT (<a style="color: #150281;" href="https://mariadb.com/kb/en/next-value-for-sequence_name/">NEXT VALUE FOR sequence</a>)</p>
</div><h3 class="anchored_heading" id="create-tableauto_increment-column-option">AUTO_INCREMENT Column Option</h3>
<p>Use <a style="color: #150281;" href="https://mariadb.com/kb/en/auto_increment/">AUTO_INCREMENT</a> to create a column whose value can
can be set automatically from a simple counter. You can only use <code>AUTO_INCREMENT</code>
on a column with an integer type. The column must be a key, and there can only be
one <code>AUTO_INCREMENT</code> column in a table. If you insert a row without specifying
a value for that column (or if you specify <code>0</code>, <code>NULL</code>, or <a style="color: #150281;" href="https://mariadb.com/kb/en/default/">DEFAULT</a>
as the value), the actual value will be taken from the counter, with each insertion
incrementing the counter by one. You can still insert a value explicitly. If you
insert a value that is greater than the current counter value, the counter is
set based on the new value. An <code>AUTO_INCREMENT</code> column is implicitly <code>NOT NULL</code>.
Use <a style="color: #150281;" href="https://mariadb.com/kb/en/last_insert_id/">LAST_INSERT_ID</a> to get the <a style="color: #150281;" href="https://mariadb.com/kb/en/auto_increment/">AUTO_INCREMENT</a> value
most recently used by an <a style="color: #150281;" href="https://mariadb.com/kb/en/insert/">INSERT</a> statement.</p>
<h3 class="anchored_heading" id="create-tablezerofill-column-option">ZEROFILL Column Option</h3>
<p>If the <code>ZEROFILL</code> column option is specified for a column using a <a style="color: #150281;" href="https://mariadb.com/kb/en/numeric-data-type-overview/">numeric</a> data type, then the column will be set to <code>UNSIGNED</code> and the spaces used by default to pad the field are replaced with zeros. <code>ZEROFILL</code> is ignored in expressions or as part of a <a style="color: #150281;" href="https://mariadb.com/kb/en/union/">UNION</a>. <code>ZEROFILL</code> is a non-standard MySQL and MariaDB enhancement.</p>
<h3 class="anchored_heading" id="create-tableprimary-key-column-option">PRIMARY KEY Column Option</h3>
<p>Use <code>PRIMARY KEY</code> to make a column a primary key. A primary key is a special type of a unique key. There can be at most one primary key per table, and it is implicitly <code>NOT NULL</code>.</p>
<p>Specifying a column as a unique key creates a unique index on that column. See the <a href="#create-tableindex-definitions">Index Definitions</a> section below for more information.</p>
<h3 class="anchored_heading" id="create-tableunique-key-column-option">UNIQUE KEY Column Option</h3>
<p>Use <code>UNIQUE KEY</code> (or just <code>UNIQUE</code>) to specify that all values in the column
must be distinct from each other. Unless the column is <code>NOT NULL</code>, there may be
multiple rows with <code>NULL</code> in the column. </p>
<p>Specifying a column as a unique key creates a unique index on that column. See the <a href="#create-tableindex-definitions">Index Definitions</a> section below for more information.</p>
<h3 class="anchored_heading" id="create-tablecomment-column-option">COMMENT Column Option</h3>
<p>You can provide a comment for each column using the <code>COMMENT</code> clause. The maximum length is 1024 characters. Use
the <a href="#show-columns">SHOW FULL COLUMNS</a> statement to see column comments.</p>
<h3 class="anchored_heading" id="create-tableref_system_id">REF_SYSTEM_ID</h3>
<p><code>REF_SYSTEM_ID</code> can be used to specify Spatial Reference System IDs for spatial data type columns.</p>
<h3 class="anchored_heading" id="create-tablegenerated-columns">Generated Columns</h3>
<p>A generated column is a column in a table that cannot explicitly be set to a specific value in a <a style="color: #150281;" href="https://mariadb.com/kb/en/data-manipulation/">DML query</a>. Instead, its value is automatically generated based on an expression. This expression might generate the value based on the values of other columns in the table, or it might generate the value by calling <a style="color: #150281;" href="https://mariadb.com/kb/en/built-in-functions/">built-in functions</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/user-defined-functions/">user-defined functions (UDFs)</a>.</p>
<p>There are two types of generated columns:</p>
<ul start="1"><li><code>PERSISTENT</code> or <code>STORED</code>: This type's value is actually stored in the table.
</li><li><code>VIRTUAL</code>: This type's value is not stored at all. Instead, the value is generated dynamically when the table is queried. This type is the default.
</li></ul>
<p>Generated columns are also sometimes called computed columns or virtual columns.</p>
<p>For a complete description about generated columns and their limitations, see <a style="color: #150281;" href="https://mariadb.com/kb/en/generated-columns/">Generated (Virtual and Persistent/Stored) Columns</a>.</p>
<h3 class="anchored_heading" id="create-tablecompressed">COMPRESSED</h3>
<div class="mariadb_from_10_3_3 mariadb from_10_3_3 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1033-release-notes/">10.3.3</a></h5><p>Certain columns may be compressed. See <a style="color: #150281;" href="https://mariadb.com/kb/en/storage-engine-independent-column-compression/">Storage-Engine Independent Column Compression</a>.</p>
</div><h3 class="anchored_heading" id="create-tableinvisible">INVISIBLE</h3>
<div class="mariadb_from_10_3_3 mariadb from_10_3_3 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1033-release-notes/">10.3.3</a></h5><p>Columns may be made invisible, and hidden in certain contexts. See <a style="color: #150281;" href="https://mariadb.com/kb/en/invisible-columns/">Invisible Columns</a>.</p>
</div><h3 class="anchored_heading" id="create-tablewith-system-versioning-column-option">WITH SYSTEM VERSIONING Column Option</h3>
<div class="mariadb_from_10_3_4 mariadb from_10_3_4 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1034-release-notes/">10.3.4</a></h5><p>Columns may be explicitly marked as included from system versioning. See <a style="color: #150281;" href="https://mariadb.com/kb/en/system-versioned-tables/">System-versioned tables</a> for details.</p>
</div><h3 class="anchored_heading" id="create-tablewithout-system-versioning-column-option">WITHOUT SYSTEM VERSIONING Column Option</h3>
<div class="mariadb_from_10_3_4 mariadb from_10_3_4 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1034-release-notes/">10.3.4</a></h5><p>Columns may be explicitly marked as excluded from system versioning. See <a style="color: #150281;" href="https://mariadb.com/kb/en/system-versioned-tables/">System-versioned tables</a> for details.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="create-tableindex-definitions">Index Definitions</h2>
<pre class="highlight fixed"><p>index_definition:
    {INDEX|KEY} [index_name] [index_type] (index_col_name,...) [index_option] ...
  <code>|</code> {FULLTEXT|SPATIAL} [INDEX|KEY] [index_name] (index_col_name,...) [index_option] ...
  <code>|</code> [CONSTRAINT [symbol]] PRIMARY KEY [index_type] (index_col_name,...) [index_option] ...
  <code>|</code> [CONSTRAINT [symbol]] UNIQUE [INDEX|KEY] [index_name] [index_type] (index_col_name,...) [index_option] ...
  <code>|</code> [CONSTRAINT [symbol]] FOREIGN KEY [index_name] (index_col_name,...) reference_definition</p>
<p>index_col_name:
    col_name [(length)] [ASC | DESC]</p>
<p>index_type:
    USING {BTREE | HASH | RTREE}</p>
<p>index_option:
    [ KEY_BLOCK_SIZE [=] value
  <code>|</code> index_type
  <code>|</code> WITH PARSER parser_name
  <code>|</code> COMMENT 'string'
  <code>|</code> CLUSTERING={YES| NO} ]
  [ IGNORED | NOT IGNORED ]</p>
<p>reference_definition:
    REFERENCES tbl_name (index_col_name,...)
      [MATCH FULL | MATCH PARTIAL | MATCH SIMPLE]
      [ON DELETE reference_option]
      [ON UPDATE reference_option]</p>
<p>reference_option:
    RESTRICT | CASCADE | SET NULL | NO ACTION</p></pre><p><code>INDEX</code> and <code>KEY</code> are synonyms. </p>
<p>Index names are optional, if not specified an automatic name will be assigned. Index name are needed to drop indexes and appear in error messages when a constraint is violated.</p>
<h3 class="anchored_heading" id="create-tableindex-categories">Index Categories</h3>
<h4 class="anchored_heading" id="create-tableplain-indexes">Plain Indexes</h4>
<p>Plain indexes are regular indexes that are not unique, and are not acting as a primary key or a foreign key. They are also not the "specialized" <code>FULLTEXT</code> or <code>SPATIAL</code> indexes.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/getting-started-with-indexes/#plain-indexes">Getting Started with Indexes: Plain Indexes</a> for more information.</p>
<h4 class="anchored_heading" id="create-tableprimary-key">PRIMARY KEY</h4>
<p>For <code>PRIMARY KEY</code> indexes, you can specify a name for the index, but it is ignored, and the name of the index is always <code>PRIMARY</code>. From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10318-release-notes/">MariaDB 10.3.18</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1048-release-notes/">MariaDB 10.4.8</a>, a warning is explicitly issued if a name is specified. Before then, the name was silently ignored. </p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/getting-started-with-indexes/#primary-key">Getting Started with Indexes: Primary Key</a> for more information.</p>
<h4 class="anchored_heading" id="create-tableunique">UNIQUE</h4>
<p>The <code>UNIQUE</code> keyword means that the index will not accept duplicated values, except for NULLs. An error will raise if you try to insert duplicate values in a UNIQUE index.</p>
<p>For <code>UNIQUE</code> indexes, you can specify a name for the constraint, using the <code>CONSTRAINT</code> keyword. That name will be used in error messages.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/getting-started-with-indexes/#unique-index">Getting Started with Indexes: Unique Index</a> for more information.</p>
<h4 class="anchored_heading" id="create-tableforeign-key">FOREIGN KEY</h4>
<p>For <code>FOREIGN KEY</code> indexes, a reference definition must be provided.</p>
<p>For <code>FOREIGN KEY</code> indexes, you can specify a name for the constraint, using the <code>CONSTRAINT</code> keyword. That name will be used in error messages.</p>
<p>First, you have to specify the name of the target (parent) table and a column or a column list which must be indexed and whose values must match to the foreign key's values. The <code>MATCH</code> clause is accepted to improve the compatibility with other DBMS's, but has no meaning in MariaDB. The <code>ON DELETE</code> and <code>ON UPDATE</code> clauses specify what must be done when a <code>DELETE</code> (or a <code>REPLACE</code>) statements attempts to delete a referenced row from the parent table, and when an <code>UPDATE</code> statement attempts to modify the referenced foreign key columns in a parent table row, respectively. The following options are allowed:</p>
<ul start="1"><li><code>RESTRICT</code>: The delete/update operation is not performed.  The statement terminates with a 1451 error (SQLSTATE '2300').
</li><li><code>NO ACTION</code>: Synonym for <code>RESTRICT</code>.
</li><li><code>CASCADE</code>: The delete/update operation is performed in both tables.
</li><li><code>SET NULL</code>: The update or delete goes ahead in the parent table, and the corresponding foreign key fields in the child table are set to <code>NULL</code>.  (They must not be defined as <code>NOT NULL</code> for this to succeed).
</li><li><code>SET DEFAULT</code>: This option is currently implemented only for the PBXT storage engine, which is disabled by default and no longer maintained. It sets the child table's foreign key fields to their <code>DEFAULT</code> values when the referenced parent table key entries are updated or deleted.
</li></ul>
<p>If either clause is omitted, the default behavior for the omitted clause is <code>RESTRICT</code>.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/foreign-keys/">Foreign Keys</a> for more information.</p>
<h4 class="anchored_heading" id="create-tablefulltext">FULLTEXT</h4>
<p>Use the <code>FULLTEXT</code> keyword to create full-text indexes.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/full-text-indexes/">Full-Text Indexes</a> for more information.</p>
<h4 class="anchored_heading" id="create-tablespatial">SPATIAL</h4>
<p>Use the <code>SPATIAL</code> keyword to create geometric indexes.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/spatial-index/">SPATIAL INDEX</a> for more information.</p>
<h3 class="anchored_heading" id="create-tableindex-options">Index Options</h3>
<h4 class="anchored_heading" id="create-tablekey_block_size-index-option">KEY_BLOCK_SIZE Index Option</h4>
<p>The <code>KEY_BLOCK_SIZE</code> index option is similar to the <a href="#create-tablekey_block_size">KEY_BLOCK_SIZE</a> table option.</p>
<p>With the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a> storage engine, if you specify a non-zero value for the <code>KEY_BLOCK_SIZE</code> table option for the whole table, then the table will implicitly be created with the <a href="#create-tablerow_format">ROW_FORMAT</a> table option set to <code>COMPRESSED</code>. However, this does not happen if you just set the <code>KEY_BLOCK_SIZE</code> index option for one or more indexes in the table. The <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a> storage engine ignores the <code>KEY_BLOCK_SIZE</code> index option. However, the <a href="#show-create-table">SHOW CREATE TABLE</a> statement may still report it for the index.</p>
<p>For information about the <code>KEY_BLOCK_SIZE</code> index option, see the <a href="#create-tablekey_block_size">KEY_BLOCK_SIZE</a> table option below.</p>
<h4 class="anchored_heading" id="create-tableindex-types">Index Types</h4>
<p>Each storage engine supports some or all index types. See <a style="color: #150281;" href="https://mariadb.com/kb/en/storage-engine-index-types/">Storage Engine Index Types</a> for details on permitted index types for each storage engine.</p>
<p>Different index types are optimized for different kind of operations:</p>
<ul start="1"><li><code>BTREE</code> is the default type, and normally is the best choice. It is supported by all storage engines. It can be used to compare a column's value with a value using the =, &gt;, &gt;=, &lt;, &lt;=, <code>BETWEEN</code>, and <code>LIKE</code> operators. <code>BTREE</code> can also be used to find <code>NULL</code> values. Searches against an index prefix are possible.
</li><li><code>HASH</code> is only supported by the MEMORY storage engine. <code>HASH</code> indexes can only be used for =, &lt;=, and &gt;= comparisons. It can not be used for the <code>ORDER BY</code> clause. Searches against an index prefix are not possible.
</li><li><code>RTREE</code> is the default for <a style="color: #150281;" href="https://mariadb.com/kb/en/spatial/"><code>SPATIAL</code></a> indexes, but if the storage engine does not support it <code>BTREE</code> can be used.
</li></ul>
<p>Index columns names are listed between parenthesis. After each column, a prefix length can be specified. If no length is specified, the whole column will be indexed. <code>ASC</code> and <code>DESC</code> can be specified for compatibility with are DBMS's, but have no meaning in MariaDB.</p>
<h4 class="anchored_heading" id="create-tablewith-parser-index-option">WITH PARSER Index Option</h4>
<p>The <code>WITH PARSER</code> index option only applies to <a style="color: #150281;" href="https://mariadb.com/kb/en/full-text-indexes/">FULLTEXT</a> indexes and contains the fulltext parser name. The fulltext parser must be an installed plugin.</p>
<h4 class="anchored_heading" id="create-tablecomment-index-option">COMMENT Index Option</h4>
<p>A comment of up to 1024 characters is permitted with the <code>COMMENT</code> index option.</p>
<p>The <code>COMMENT</code> index option allows you to specify a comment with user-readable text describing what the index is for. This information is not used by the server itself.</p>
<h4 class="anchored_heading" id="create-tableclustering-index-option">CLUSTERING Index Option</h4>
<p>The <code>CLUSTERING</code> index option is only valid for tables using the <a style="color: #150281;" href="https://mariadb.com/kb/en/tokudb/">Tokudb</a> storage engine.</p>
<h4 class="anchored_heading" id="create-tableignored-not-ignored">IGNORED / NOT IGNORED</h4>
<div class="mariadb_from_10_6_0 mariadb from_10_6_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1060-release-notes/">10.6.0</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1060-release-notes/">MariaDB 10.6.0</a>, indexes can be specified to be ignored by the optimizer. See <a style="color: #150281;" href="https://mariadb.com/kb/en/ignored-indexes/">Ignored Indexes</a>.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="create-tableperiods">Periods</h2>
<div class="mariadb_from_10_3_4 mariadb from_10_3_4 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1034-release-notes/">10.3.4</a></h5><pre class="highlight fixed"><p>period_definition:
    PERIOD FOR SYSTEM_TIME (start_column_name, end_column_name)</p></pre><p>MariaDB supports a subset of the standard syntax for periods. At the moment it's only used for creating <a style="color: #150281;" href="https://mariadb.com/kb/en/system-versioned-tables/">System-versioned tables</a>. Both columns must be created, must be either of a <code>TIMESTAMP(6)</code> or <code>BIGINT UNSIGNED</code> type, and be generated as <code>ROW START</code> and <code>ROW END</code> accordingly. See <a style="color: #150281;" href="https://mariadb.com/kb/en/system-versioned-tables/">System-versioned tables</a> for details.</p>
<p>The table must also have the <code>WITH SYSTEM VERSIONING</code> clause.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="create-tableconstraint-expressions">Constraint Expressions</h2>
<div class="mariadb_from_10_2_1 mariadb from_10_2_1 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">10.2.1</a></h5><p><a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a> introduced new ways to define a constraint.</p>
</div><p>Note: Before <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a>, constraint expressions were accepted in the syntax but ignored.</p>
<p><a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a> introduced two ways to define a constraint:</p>
<ul start="1"><li><code>CHECK(expression)</code> given as part of a column definition.
</li><li><code>CONSTRAINT [constraint_name] CHECK (expression)</code>
</li></ul>
<p>Before a row is inserted or updated, all constraints are evaluated in the order they are defined. If any constraints fails, then the row will not be updated.
One can use most deterministic functions in a constraint, including <a style="color: #150281;" href="https://mariadb.com/kb/en/user-defined-functions/">UDFs</a>.</p>
<pre class="fixed">create table t1 (a int check(a&gt;0) ,b int check (b&gt; 0), constraint abc check (a&gt;b));
</pre><p>If you use the second format and you don't give a name to the constraint, then the constraint will get a auto generated name. This is done so that you can later delete the constraint with <a href="#alter-table">ALTER TABLE DROP constraint_name</a>.</p>
<p>One can disable all constraint expression checks by setting the variable <code>check_constraint_checks</code> to <code>OFF</code>. This is useful for example when loading a table that violates some constraints that you want to later find and fix in SQL.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/constraint/">CONSTRAINT</a> for more information.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-tabletable-options">Table Options</h2>
<p>For each individual table you create (or alter), you can set some table options. The general syntax for setting options is:</p>
<p> &lt;OPTION_NAME&gt; = &lt;option_value&gt;, [&lt;OPTION_NAME&gt; = &lt;option_value&gt; ...]</p>
<p>The equal sign is optional.</p>
<p>Some options are supported by the server and can be used for all tables, no matter what storage engine they use; other options can be specified for all storage engines, but have a meaning only for some engines. Also, engines can <a style="color: #150281;" href="https://mariadb.com/kb/en/extending-create-table/">extend <code>CREATE TABLE</code> with new options</a>.</p>
<p>If the <code>IGNORE_BAD_TABLE_OPTIONS</code> <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/">SQL_MODE</a> is enabled, wrong table options generate a warning; otherwise, they generate an error.</p>
<pre class="highlight fixed"><p>table_option:    
    [STORAGE] ENGINE [=] engine_name
  <code>|</code> AUTO_INCREMENT [=] value
  <code>|</code> AVG_ROW_LENGTH [=] value
  <code>|</code> [DEFAULT] CHARACTER SET [=] <a style="color: #150281;" href="https://mariadb.com/kb/en/character-sets-and-collations/">charset_name</a>
  <code>|</code> CHECKSUM [=] {0 | 1}
  <code>|</code> [DEFAULT] COLLATE [=] <a style="color: #150281;" href="https://mariadb.com/kb/en/character-sets-and-collations/">collation_name</a>
  <code>|</code> COMMENT [=] 'string'
  <code>|</code> CONNECTION [=] 'connect_string'
  <code>|</code> DATA DIRECTORY [=] 'absolute path to directory'
  <code>|</code> DELAY_KEY_WRITE [=] {0 | 1}
  <code>|</code> ENCRYPTED [=] {YES | NO}
  <code>|</code> ENCRYPTION_KEY_ID [=] value
  <code>|</code> IETF_QUOTES [=] {YES | NO}
  <code>|</code> INDEX DIRECTORY [=] 'absolute path to directory'
  <code>|</code> INSERT_METHOD [=] { NO | FIRST | LAST }
  <code>|</code> KEY_BLOCK_SIZE [=] value
  <code>|</code> MAX_ROWS [=] value
  <code>|</code> MIN_ROWS [=] value
  <code>|</code> PACK_KEYS [=] {0 | 1 | DEFAULT}
  <code>|</code> PAGE_CHECKSUM [=] {0 | 1}
  <code>|</code> PAGE_COMPRESSED [=] {0 | 1}
  <code>|</code> PAGE_COMPRESSION_LEVEL [=] {0 .. 9}
  <code>|</code> PASSWORD [=] 'string'
  <code>|</code> ROW_FORMAT [=] {DEFAULT|DYNAMIC|FIXED|COMPRESSED|REDUNDANT|COMPACT|PAGE}
  <code>|</code> SEQUENCE [=] {0|1}
  <code>|</code> STATS_AUTO_RECALC [=] {DEFAULT|0|1}
  <code>|</code> STATS_PERSISTENT [=] {DEFAULT|0|1}
  <code>|</code> STATS_SAMPLE_PAGES [=] {DEFAULT|value}
  <code>|</code> TABLESPACE tablespace_name
  <code>|</code> TRANSACTIONAL [=]  {0 | 1}
  <code>|</code> UNION [=] (tbl_name[,tbl_name]...)
  <code>|</code> WITH SYSTEM VERSIONING</p></pre><h3 class="anchored_heading" id="create-tablestorage-engine">[STORAGE] ENGINE</h3>
<p><code>[STORAGE] ENGINE</code> specifies a <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-storage-engines/">storage engine</a> for the table. If this option is not used, the default storage engine is used instead. That is, the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#default_storage_engine">default_storage_engine</a> session option value if it is set, or the value specified for the <code>--default-storage-engine</code> <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqld-options-full-list/">mysqld startup option</a>, or the default storage engine, <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a>. If the specified storage engine is not installed and active, the default value will be used, unless the <code>NO_ENGINE_SUBSTITUTION</code> <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/">SQL MODE</a> is set (default). This is only true for <code>CREATE TABLE</code>, not for <code>ALTER TABLE</code>. For a list of storage engines that are present in your server, issue a <a style="color: #150281;" href="https://mariadb.com/kb/en/show-engines/">SHOW ENGINES</a>.</p>
<h3 class="anchored_heading" id="create-tableauto_increment">AUTO_INCREMENT</h3>
<p><code>AUTO_INCREMENT</code> specifies the initial value for the <a style="color: #150281;" href="https://mariadb.com/kb/en/auto_increment/"><code>AUTO_INCREMENT</code></a> primary key. This works for MyISAM, Aria, InnoDB/XtraDB, MEMORY, and ARCHIVE tables. You can change this option with <code>ALTER TABLE</code>, but in that case the new value must be higher than the highest value which is present in the <code>AUTO_INCREMENT</code> column. If the storage engine does not support this option, you can insert (and then delete) a row having the wanted value - 1 in the <code>AUTO_INCREMENT</code> column.</p>
<h3 class="anchored_heading" id="create-tableavg_row_length">AVG_ROW_LENGTH</h3>
<p><code>AVG_ROW_LENGTH</code> is the average rows size. It only applies to tables using <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam/">MyISAM</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/aria-storage-engine/">Aria</a> storage engines that have the <a href="#create-tablerow_format">ROW_FORMAT</a> table option set to <code>FIXED</code> format.</p>
<p>MyISAM uses <code>MAX_ROWS</code> and <code>AVG_ROW_LENGTH</code> to decide the maximum size of a table (default: 256TB, or the maximum file size allowed by the system).</p>
<h3 class="anchored_heading" id="create-tabledefault-character-setcharset">[DEFAULT] CHARACTER SET/CHARSET</h3>
<p><code>[DEFAULT] CHARACTER SET</code> (or <code>[DEFAULT] CHARSET</code>) is used to set a default character set for the table. This is the character set used for all columns where an explicit character set is not specified. If this option is omitted or <code>DEFAULT</code> is specified, database's default character set will be used. See <a style="color: #150281;" href="https://mariadb.com/kb/en/setting-character-sets-and-collations/">Setting Character Sets and Collations</a> for details on setting the <a style="color: #150281;" href="https://mariadb.com/kb/en/data-types-character-sets-and-collations/">character sets</a>.</p>
<h3 class="anchored_heading" id="create-tablechecksumtable_checksum">CHECKSUM/TABLE_CHECKSUM</h3>
<p><code>CHECKSUM</code> (or <code>TABLE_CHECKSUM</code>) can be set to 1 to maintain a live checksum for all table's rows. This makes write operations slower, but <a href="#checksum-table"><code>CHECKSUM TABLE</code></a> will be very fast. This option is only supported for <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam/">MyISAM</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/aria-storage-engine/">Aria tables</a>.</p>
<h3 class="anchored_heading" id="create-tabledefault-collate">[DEFAULT] COLLATE</h3>
<p><code>[DEFAULT] COLLATE</code> is used to set a default collation for the table. This is the collation used for all columns where an explicit character set is not specified. If this option is omitted or <code>DEFAULT</code> is specified, database's default option will be used. See <a style="color: #150281;" href="https://mariadb.com/kb/en/setting-character-sets-and-collations/">Setting Character Sets and Collations</a> for details on setting the <a style="color: #150281;" href="https://mariadb.com/kb/en/data-types-character-sets-and-collations/">collations</a></p>
<h3 class="anchored_heading" id="create-tablecomment">COMMENT</h3>
<p><code>COMMENT</code> is a comment for the table. The maximum length is 2048 characters. Also used to define table parameters when creating a <a style="color: #150281;" href="https://mariadb.com/kb/en/spider/">Spider</a> table.</p>
<h3 class="anchored_heading" id="create-tableconnection">CONNECTION</h3>
<p><code>CONNECTION</code> is used to specify a server name or a connection string for a <a style="color: #150281;" href="https://mariadb.com/kb/en/spider/">Spider</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/connect/">CONNECT</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/about-federatedx/">Federated or FederatedX table</a>.</p>
<h3 class="anchored_heading" id="create-tabledata-directoryindex-directory">DATA DIRECTORY/INDEX DIRECTORY</h3>
<p><code>DATA DIRECTORY</code> and <code>INDEX DIRECTORY</code> are supported for MyISAM and Aria, and DATA DIRECTORY is also supported by InnoDB if the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_file_per_table">innodb_file_per_table</a> server system variable is enabled, but only in CREATE TABLE, not in <a href="#alter-table">ALTER TABLE</a>. So, carefully choose a path for InnoDB tables at creation time, because it cannot be changed without dropping and re-creating the table. These options specify the paths for data files and index files, respectively. If these options are omitted, the database's directory will be used to store data files and index files. Note that these table options do not work for <a style="color: #150281;" href="https://mariadb.com/kb/en/managing-mariadb-partitioning/">partitioned</a> tables (use the partition options instead), or if the server has been invoked with the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqld-options-full-list/"><code>--skip-symbolic-links</code> startup option</a>. To avoid the overwriting of old files with the same name that could be present in the directories, you can use <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqld-options-full-list/">the <code>--keep_files_on_create</code> option</a> (an error will be issued if files already exist). These options are ignored if the <code>NO_DIR_IN_CREATE</code> <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/">SQL_MODE</a> is enabled (useful for replication slaves). Also note that symbolic links cannot be used for InnoDB tables.</p>
<p><code>DATA DIRECTORY</code> works by creating symlinks from where the table would normally have been (inside the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#datadir">datadir</a>) to where the option specifies. For security reasons, to avoid bypassing the privilege system, the server does not permit symlinks inside the datadir. Therefore, <code>DATA DIRECTORY</code> cannot be used to specify a location inside the datadir. An attempt to do so will result in an error <code>1210 (HY000) Incorrect arguments to DATA DIRECTORY</code>.</p>
<h3 class="anchored_heading" id="create-tabledelay_key_write">DELAY_KEY_WRITE</h3>
<p><code>DELAY_KEY_WRITE</code> is supported by MyISAM and Aria, and can be set to 1 to speed up write operations. In that case, when data are modified, the indexes are not updated until the table is closed. Writing the changes to the index file altogether can be much faster. However, note that this option is applied only if the <code>delay_key_write</code> server variable is set to 'ON'. If it is 'OFF' the delayed index writes are always disabled, and if it is 'ALL' the delayed index writes are always used, disregarding the value of <code>DELAY_KEY_WRITE</code>.</p>
<h3 class="anchored_heading" id="create-tableencrypted">ENCRYPTED</h3>
<p>The <code>ENCRYPTED</code> table option can be used to manually set the encryption status of an <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a> table. See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-encryption/">InnoDB Encryption</a> for more information.</p>
<p>Aria does not support the <code>ENCRYPTED</code> table option. See <a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-18049">MDEV-18049</a>.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/securing-mariadb-data-at-rest-encryption/">Data-at-Rest Encryption</a> for more information.</p>
<h3 class="anchored_heading" id="create-tableencryption_key_id">ENCRYPTION_KEY_ID</h3>
<p>The <code>ENCRYPTION_KEY_ID</code> table option can be used to manually set the encryption key of an <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a> table. See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-encryption/">InnoDB Encryption</a> for more information.</p>
<p>Aria does not support the <code>ENCRYPTION_KEY_ID</code> table option. See <a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-18049">MDEV-18049</a>.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/securing-mariadb-data-at-rest-encryption/">Data-at-Rest Encryption</a> for more information.</p>
<h3 class="anchored_heading" id="create-tableietf_quotes">IETF_QUOTES</h3>
<p>For the <a style="color: #150281;" href="https://mariadb.com/kb/en/csv/">CSV</a> storage engine, the <code>IETF_QUOTES</code> option, when set to <code>YES</code>, enables IETF-compatible parsing of embedded quote and comma characters. Enabling this option for a table improves compatibility with other tools that use CSV, but is not compatible with MySQL CSV tables, or MariaDB CSV tables created without this option. Disabled by default.</p>
<h3 class="anchored_heading" id="create-tableinsert_method">INSERT_METHOD</h3>
<p><code>INSERT_METHOD</code> is only used with <a style="color: #150281;" href="https://mariadb.com/kb/en/merge/">MERGE</a> tables. This option determines in which underlying table the new rows should be inserted. If you set it to 'NO' (which is the default) no new rows can be added to the table (but you will still be able to perform <code>INSERT</code>s directly against the underlying tables). <code>FIRST</code> means that the rows are inserted into the first table, and <code>LAST</code> means that thet are inserted into the last table.</p>
<h3 class="anchored_heading" id="create-tablekey_block_size">KEY_BLOCK_SIZE</h3>
<p><code>KEY_BLOCK_SIZE</code> is used to determine the size of key blocks, in bytes or kilobytes. However, this value is just a hint, and the storage engine could modify or ignore it. If <code>KEY_BLOCK_SIZE</code> is set to 0, the storage engine's default value will be used.</p>
<p>With the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a> storage engine, if you specify a non-zero value for the <code>KEY_BLOCK_SIZE</code> table option for the whole table, then the table will implicitly be created with the <a href="#create-tablerow_format">ROW_FORMAT</a> table option set to <code>COMPRESSED</code>.</p>
<h3 class="anchored_heading" id="create-tablemin_rowsmax_rows">MIN_ROWS/MAX_ROWS</h3>
<p><code>MIN_ROWS</code> and <code>MAX_ROWS</code> let the storage engine know how many rows you are planning to store as a minimum and as a maximum. These values will not be used as real limits, but they help the storage engine to optimize the table. <code>MIN_ROWS</code> is only used by MEMORY storage engine to decide the minimum memory that is always allocated. <code>MAX_ROWS</code> is used to decide the minimum size for indexes.</p>
<h3 class="anchored_heading" id="create-tablepack_keys">PACK_KEYS</h3>
<p><code>PACK_KEYS</code> can be used to determine whether the indexes will be compressed. Set it to 1 to compress all keys. With a value of 0, compression will not be used. With the <code>DEFAULT</code> value, only long strings will be compressed. Uncompressed keys are faster.</p>
<h3 class="anchored_heading" id="create-tablepage_checksum">PAGE_CHECKSUM</h3>
<p><code>PAGE_CHECKSUM</code> is only applicable to <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a> tables, and determines whether indexes and data should use page checksums for extra safety. </p>
<h3 class="anchored_heading" id="create-tablepage_compressed">PAGE_COMPRESSED</h3>
<p><code>PAGE_COMPRESSED</code> is used to enable <a style="color: #150281;" href="https://mariadb.com/kb/en/compression/">InnoDB page compression</a> for <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a> tables.</p>
<h3 class="anchored_heading" id="create-tablepage_compression_level">PAGE_COMPRESSION_LEVEL</h3>
<p><code>PAGE_COMPRESSION_LEVEL</code> is used to set the compression level for <a style="color: #150281;" href="https://mariadb.com/kb/en/compression/">InnoDB page compression</a> for <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a> tables. The table must also have the <a href="#create-tablepage_compressed">PAGE_COMPRESSED</a> table option set to <code>1</code>.</p>
<p>Valid values for <code>PAGE_COMPRESSION_LEVEL</code> are 1 (the best speed) through 9 (the best compression), .</p>
<h3 class="anchored_heading" id="create-tablepassword">PASSWORD</h3>
<p><code>PASSWORD</code> is unused.</p>
<h3 class="anchored_heading" id="create-tableraid_type">RAID_TYPE</h3>
<p><code>RAID_TYPE</code> is an obsolete option, as the raid support has been disabled since MySQL 5.0.</p>
<h3 class="anchored_heading" id="create-tablerow_format">ROW_FORMAT</h3>
<p>The <code>ROW_FORMAT</code> table option specifies the row format for the data file. Possible values are engine-dependent.</p>
<h4 class="anchored_heading" id="create-tablesupported-myisam-row-formats">Supported MyISAM Row Formats</h4>
<p>For <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam/">MyISAM</a>, the supported row formats are: </p>
<ul start="1"><li><code>FIXED</code>
</li><li><code>DYNAMIC</code>
</li><li><code>COMPRESSED</code>
</li></ul>
<p>The <code>COMPRESSED</code> row format can only be set by the <a style="color: #150281;" href="https://mariadb.com/kb/en/myisampack/">myisampack</a> command line tool.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam-storage-formats/">MyISAM Storage Formats</a> for more information.</p>
<h4 class="anchored_heading" id="create-tablesupported-aria-row-formats">Supported Aria Row Formats</h4>
<p>For <a style="color: #150281;" href="https://mariadb.com/kb/en/aria-storage-engine/">Aria</a>, the supported row formats are:</p>
<ul start="1"><li><code>PAGE</code>
</li><li><code>FIXED</code>
</li><li><code>DYNAMIC</code>.
</li></ul>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/aria-storage-formats/">Aria Storage Formats</a> for more information.</p>
<h4 class="anchored_heading" id="create-tablesupported-innodb-row-formats">Supported InnoDB Row Formats</h4>
<p>For <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a>, the supported row formats are:</p>
<ul start="1"><li><code>COMPACT</code>
</li><li><code>REDUNDANT</code>
</li><li><code>COMPRESSED</code>
</li><li><code>DYNAMIC</code>.
</li></ul>
<p>If the <code>ROW_FORMAT</code> table option is set to <code>FIXED</code> for an InnoDB table, then the server will either return an error or a warning depending on the value of the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_strict_mode">innodb_strict_mode</a> system variable. If the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_strict_mode">innodb_strict_mode</a> system variable is set to <code>OFF</code>, then a warning is issued, and MariaDB will create the table using the default row format for the specific MariaDB server version. If the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_strict_mode">innodb_strict_mode</a> system variable is set to <code>ON</code>, then an error will be raised.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-storage-formats/">InnoDB Storage Formats</a> for more information.</p>
<h4 class="anchored_heading" id="create-tableother-storage-engines-and-row_format">Other Storage Engines and ROW_FORMAT</h4>
<p>Other storage engines do not support the <code>ROW_FORMAT</code> table option.</p>
<h3 class="anchored_heading" id="create-tablesequence">SEQUENCE</h3>
<div class="mariadb_from_10_3 mariadb from_10_3 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-103/">10.3</a></h5><p>If the table is a <a style="color: #150281;" href="https://mariadb.com/kb/en/sequences/">sequence</a>, then it will have the <code>SEQUENCE</code> set to <code>1</code>.</p>
</div><h3 class="anchored_heading" id="create-tablestats_auto_recalc">STATS_AUTO_RECALC</h3>
<p><code>STATS_AUTO_RECALC</code> indicates whether to automatically recalculate persistent statistics (see <code>STATS_PERSISTENT</code>, below) for an InnoDB table.
If set to <code>1</code>, statistics will be recalculated when more than 10% of the data has changed. When set to <code>0</code>, stats will be recalculated only when an <a href="#analyze-table">ANALYZE TABLE</a> is run. If set to <code>DEFAULT</code>, or left out, the value set by the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_stats_auto_recalc">innodb_stats_auto_recalc</a> system variable applies. See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-persistent-statistics/">InnoDB Persistent Statistics</a>.</p>
<h3 class="anchored_heading" id="create-tablestats_persistent">STATS_PERSISTENT</h3>
<p><code>STATS_PERSISTENT</code> indicates whether the InnoDB statistics created by <a href="#analyze-table">ANALYZE TABLE</a> will remain on disk or not. It can be set to <code>1</code> (on disk), <code>0</code> (not on disk, the pre-MariaDB 10 behavior), or <code>DEFAULT</code> (the same as leaving out the option), in which case the value set by the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_stats_persistent">innodb_stats_persistent</a> system variable will apply. Persistent statistics stored on disk allow the statistics to survive server restarts, and provide better query plan stability. See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-persistent-statistics/">InnoDB Persistent Statistics</a>.</p>
<h3 class="anchored_heading" id="create-tablestats_sample_pages">STATS_SAMPLE_PAGES</h3>
<p><code>STATS_SAMPLE_PAGES</code> indicates how many pages are used to sample index statistics. If 0 or DEFAULT, the default value, the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_stats_sample_pages">innodb_stats_sample_pages</a> value is used. See <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-persistent-statistics/">InnoDB Persistent Statistics</a>.</p>
<h3 class="anchored_heading" id="create-tabletransactional">TRANSACTIONAL</h3>
<p><code>TRANSACTIONAL</code> is only applicable for Aria tables. In future Aria tables created with this option will be fully transactional, but currently this provides a form of crash protection. See <a style="color: #150281;" href="https://mariadb.com/kb/en/aria-storage-engine/">Aria Storage Engine</a> for more details.</p>
<h3 class="anchored_heading" id="create-tableunion">UNION</h3>
<p><code>UNION</code> must be specified when you create a MERGE table. This option contains a comma-separated list of MyISAM tables which are accessed by the new table. The list is enclosed between parenthesis. Example: <code>UNION = (t1,t2)</code></p>
<h3 class="anchored_heading" id="create-tablewith-system-versioning">WITH SYSTEM VERSIONING</h3>
<p><code>WITH SYSTEM VERSIONING</code> is used for creating <a style="color: #150281;" href="https://mariadb.com/kb/en/system-versioned-tables/">System-versioned tables</a>.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-tablepartitions">Partitions</h2>
<pre class="highlight fixed indent&gt;"><p>partition_options:
    PARTITION BY
        { [LINEAR] HASH(expr)
        <code>|</code> [LINEAR] KEY(column_list)
        <code>|</code> RANGE(expr)
        <code>|</code> LIST(expr)
        <code>|</code> SYSTEM_TIME [INTERVAL time_quantity <a style="color: #150281;" href="https://mariadb.com/kb/en/date-and-time-units/">time_unit</a>] [LIMIT num] }
    [PARTITIONS num]
    [SUBPARTITION BY
        { [LINEAR] HASH(expr)
        <code>|</code> [LINEAR] KEY(column_list) }
      [SUBPARTITIONS num]
    ]
    [(partition_definition [, partition_definition] ...)]</p>
<p>partition_definition:
    PARTITION partition_name
        [VALUES {LESS THAN {(expr) | MAXVALUE} | IN (value_list)}]
        [[STORAGE] ENGINE [=] engine_name]
        [COMMENT [=] 'comment_text' ]
        [DATA DIRECTORY [=] 'data_dir']
        [INDEX DIRECTORY [=] 'index_dir']
        [MAX_ROWS [=] max_number_of_rows]
        [MIN_ROWS [=] min_number_of_rows]
        [TABLESPACE [=] tablespace_name]
        [NODEGROUP [=] node_group_id]
        [(subpartition_definition [, subpartition_definition] ...)]</p>
<p>subpartition_definition:
    SUBPARTITION logical_name
        [[STORAGE] ENGINE [=] engine_name]
        [COMMENT [=] 'comment_text' ]
        [DATA DIRECTORY [=] 'data_dir']
        [INDEX DIRECTORY [=] 'index_dir']
        [MAX_ROWS [=] max_number_of_rows]
        [MIN_ROWS [=] min_number_of_rows]
        [TABLESPACE [=] tablespace_name]
        [NODEGROUP [=] node_group_id]</p></pre><p>If the <code>PARTITION BY</code> clause is used, the table will be <a style="color: #150281;" href="https://mariadb.com/kb/en/managing-mariadb-partitioning/">partitioned</a>. A partition method must be explicitly indicated for partitions and subpartitions. Partition methods are:</p>
<ul start="1"><li><code>[LINEAR] HASH</code> creates a hash key which will be used to read and write rows. The partition function can be any valid SQL expression which returns an <code>INTEGER</code> number. Thus, it is possible to use the <code>HASH</code> method on an integer column, or on functions which accept integer columns as an argument. However, <code>VALUES LESS THAN</code> and <code>VALUES IN</code> clauses can not be used with <code>HASH</code>. An example:
</li></ul>
<pre class="fixed">CREATE TABLE t1 (a INT, b CHAR(5), c DATETIME)
    PARTITION BY HASH ( YEAR(c) );
</pre><p>  <code>[LINEAR] HASH</code> can be used for subpartitions, too.</p>
<ul start="1"><li><code>[LINEAR] KEY</code> is similar to <code>HASH</code>, but the index has an even distribution of data. Also, the expression can only be a column or a list of columns. <code>VALUES LESS THAN</code> and <code>VALUES IN</code> clauses can not be used with <code>KEY</code>.
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/range-partitioning-type/">RANGE</a> partitions the rows using on a range of values, using the <code>VALUES LESS THAN</code> operator. <code>VALUES IN</code> is not allowed with <code>RANGE</code>. The partition function can be any valid SQL expression which returns a single value.
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/list-partitioning/">LIST</a> assigns partitions based on a table's column with a restricted set of possible values. It is similar to <code>RANGE</code>, but <code>VALUES IN</code> must be used for at least 1 columns, and <code>VALUES LESS THAN</code> is disallowed.
</li><li><code>SYSTEM_TIME</code> partitioning is used for <a style="color: #150281;" href="https://mariadb.com/kb/en/system-versioned-tables/">System-versioned tables</a> to store historical data separately from current data.
</li></ul>
<p>Only <code>HASH</code> and <code>KEY</code> can be used for subpartitions, and they can be <code>[LINEAR]</code>.</p>
<p>It is possible to define up to 1024 partitions and subpartitions.</p>
<p>The number of defined partitions can be optionally specified as <code>PARTITION count</code>. This can be done to avoid specifying all partitions individually. But you can also declare each individual partition and, additionally, specify a <code>PARTITIONS count</code> clause; in the case, the number of <code>PARTITION</code>s must equal count.</p>
<p>Also see <a style="color: #150281;" href="https://mariadb.com/kb/en/partitioning-types-overview/">Partitioning Types Overview</a>.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="create-tablesequences">Sequences</h2>
<div class="mariadb_from_10_3 mariadb from_10_3 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-103/">10.3</a></h5><p><code>CREATE TABLE</code> can also be used to create a <a style="color: #150281;" href="https://mariadb.com/kb/en/sequences/">SEQUENCE</a>. See <a style="color: #150281;" href="https://mariadb.com/kb/en/create-sequence/">CREATE SEQUENCE</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/sequence-overview/">Sequence Overview</a>.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="create-tableatomic-ddl">Atomic DDL</h2>
<div class="mariadb_from_10_6_1 mariadb from_10_6_1 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1061-release-notes/">10.6.1</a></h5><p><a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1061-release-notes/">MariaDB 10.6.1</a> supports <a style="color: #150281;" href="https://mariadb.com/kb/en/atomic-ddl/">Atomic DDL</a>. <code>CREATE TABLE</code> is atomic, except for <code>CREATE OR REPLACE</code>, which is only crash safe. </p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="create-tableexamples">Examples</h2>
<pre class="fixed">create table if not exists test (
a bigint auto_increment primary key,
name varchar(128) charset utf8,
key name (name(32))
) engine=InnoDB default charset latin1;
</pre><p>This example shows a couple of things:</p>
<ul start="1"><li>Usage of <code class="highlight fixed" style="white-space:pre-wrap">IF NOT EXISTS</code>; If the table already existed, it will not be created.  There will not be any error for the client, just a warning.
</li><li>How to create a <code class="highlight fixed" style="white-space:pre-wrap">PRIMARY KEY</code> that is <a style="color: #150281;" href="https://mariadb.com/kb/en/auto_increment/">automatically generated</a>.
</li><li>How to specify a table-specific <a style="color: #150281;" href="https://mariadb.com/kb/en/data-types-character-sets-and-collations/">character set</a> and another for a column.
</li><li>How to create an index (<code class="highlight fixed" style="white-space:pre-wrap">name</code>) that is only partly indexed (to save space).
</li></ul>
<p>The following clauses will work from <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a> only.</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span><span class="p">(</span>
  <span class="n">a</span> <span class="nb">int</span> <span class="k">DEFAULT</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span>
  <span class="n">b</span> <span class="nb">int</span> <span class="k">DEFAULT</span> <span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span>
  <span class="n">expires</span> <span class="n">DATETIME</span> <span class="k">DEFAULT</span><span class="p">(</span><span class="n">NOW</span><span class="p">()</span> <span class="o">+</span> <span class="nb">INTERVAL</span> <span class="mi">1</span> <span class="k">YEAR</span><span class="p">),</span>
  <span class="n">x</span> <span class="nb">BLOB</span> <span class="k">DEFAULT</span> <span class="k">USER</span><span class="p">()</span>
<span class="p">);</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="create-tablesee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-names/">Identifier Names</a>
</li><li><a href="#alter-table">ALTER TABLE</a>
</li><li><a href="#drop-table">DROP TABLE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/character-sets-and-collations/">Character Sets and Collations</a>
</li><li><a href="#show-create-table">SHOW CREATE TABLE</a>
</li><li>Storage engines can add their own <a style="color: #150281;" href="https://mariadb.com/kb/en/engine-defined-new-tablefieldindex-attributes/">attributes for columns, indexes and tables</a>.
</li><li>Variable <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-server-system-variables/#slave_ddl_exec_mode">slave-ddl-exec-mode</a>.</li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="delete">1.1.2.1.8 DELETE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#deletesyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#deletedescription" title="Description">Description</a>    <ol class="toc">

        <li class=""><a href="#deletepartition" title="PARTITION">PARTITION</a></li>

        <li class=""><a href="#deletefor-portion-of" title="FOR PORTION OF">FOR PORTION OF</a></li>

        <li class=""><a href="#deletereturning" title="RETURNING">RETURNING</a></li>

        <li class=""><a href="#deletesame-source-and-target-table" title="Same Source and Target Table">Same Source and Target Table</a></li>

        <li class=""><a href="#deletedelete-history" title="DELETE HISTORY">DELETE HISTORY</a>    </li></ol>
</li>

    <li class=""><a href="#deleteexamples" title="Examples">Examples</a>    <ol class="toc">

        <li class=""><a href="#deletedeleting-from-the-same-source-and-target" title="Deleting from the Same Source and Target">Deleting from the Same Source and Target</a>    </li></ol>
</li>

    <li class=""><a href="#deletesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="deletesyntax">Syntax</h2>
<p>Single-table syntax:</p>
<pre class="fixed">DELETE [LOW_PRIORITY] [QUICK] [IGNORE] 
  FROM tbl_name [PARTITION (partition_list)]
  [FOR PORTION OF period FROM expr1 TO expr2]
  [WHERE where_condition]
  [ORDER BY ...]
  [LIMIT row_count]
  [RETURNING select_expr 
    [, select_expr ...]]
</pre><p>Multiple-table syntax:</p>
<pre class="fixed">DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    tbl_name[.*] [, tbl_name[.*]] ...
    FROM table_references
    [WHERE where_condition]
</pre><p>Or:</p>
<pre class="fixed">DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    FROM tbl_name[.*] [, tbl_name[.*]] ...
    USING table_references
    [WHERE where_condition]
</pre><p>Trimming history:</p>
<pre class="fixed">DELETE HISTORY
  FROM tbl_name [PARTITION (partition_list)]
  [BEFORE SYSTEM_TIME [TIMESTAMP|TRANSACTION] expression]
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="deletedescription">Description</h2>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Option</th><th>Description</th></tr>
<tr><td>LOW_PRIORITY</td><td>Wait until all SELECT's are done before starting the statement. Used with storage engines that uses table locking (MyISAM, Aria etc). See <a style="color: #150281;" href="https://mariadb.com/kb/en/high_priority-and-low_priority-clauses/">HIGH_PRIORITY and LOW_PRIORITY clauses</a> for details.</td></tr>
<tr><td>QUICK</td><td>Signal the storage engine that it should expect that a lot of rows are deleted. The storage engine engine can do things to speed up the DELETE like ignoring merging of data blocks until all rows are deleted from the block (instead of when a block is half full). This speeds up things at the expanse of lost space in data blocks. At least <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam/">MyISAM</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a> support this feature.</td></tr>
<tr><td>IGNORE</td><td>Don't stop the query even if a not-critical error occurs (like data overflow). See <a style="color: #150281;" href="https://mariadb.com/kb/en/ignore/">How IGNORE works</a> for a full description.</td></tr>
</tbody></table>
</div><p>For the single-table syntax, the <code class="fixed" style="white-space:pre-wrap">DELETE</code> statement deletes rows
from tbl_name and returns a count of the number of deleted rows. This count can
be obtained by calling the <a style="color: #150281;" href="https://mariadb.com/kb/en/row-count/">ROW_COUNT()</a> function. The
<code class="fixed" style="white-space:pre-wrap">WHERE</code> clause, if given, specifies the conditions that identify
which rows to delete. With no <code class="fixed" style="white-space:pre-wrap">WHERE</code> clause, all rows are
deleted. If the <a style="color: #150281;" href="https://mariadb.com/kb/en/order-by/">ORDER BY</a> clause is specified, the rows are
deleted in the order that is specified. The <a style="color: #150281;" href="https://mariadb.com/kb/en/limit/">LIMIT</a> clause
places a limit on the number of rows that can be deleted.</p>
<p>For the multiple-table syntax, <code class="fixed" style="white-space:pre-wrap">DELETE</code> deletes from each
<code class="fixed" style="white-space:pre-wrap">tbl_name</code> the rows that satisfy the conditions. In this case,
<a style="color: #150281;" href="https://mariadb.com/kb/en/order-by/">ORDER BY</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/limit/">LIMIT</a>&gt; cannot be used. A <code>DELETE</code> can also reference tables which are located in different databases; see <a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-qualifiers/">Identifier Qualifiers</a> for the syntax.</p>
<p><code class="fixed" style="white-space:pre-wrap">where_condition</code> is an expression that evaluates to true for
each row to be deleted. It is specified as described in <a style="color: #150281;" href="https://mariadb.com/kb/en/select/">SELECT</a>.</p>
<p>Currently, you cannot delete from a table and select from the same
table in a subquery.</p>
<p>You need the <code class="fixed" style="white-space:pre-wrap">DELETE</code> privilege on a table to delete rows from
it. You need only the <code class="fixed" style="white-space:pre-wrap">SELECT</code> privilege for any columns that
are only read, such as those named in the <code class="fixed" style="white-space:pre-wrap">WHERE</code> clause. See
<a href="#grant">GRANT</a>.</p>
<p>As stated, a <code class="highlight fixed" style="white-space:pre-wrap">DELETE</code> statement with no <code class="highlight fixed" style="white-space:pre-wrap">WHERE</code>
clause deletes all rows. A faster way to do this, when you do not need to know
the number of deleted rows, is to use <code class="highlight fixed" style="white-space:pre-wrap">TRUNCATE TABLE</code>. However,
within a transaction or if you have a lock on the table, 
<code class="fixed" style="white-space:pre-wrap">TRUNCATE TABLE</code> cannot be used whereas <code class="fixed" style="white-space:pre-wrap">DELETE</code>
can. See <code class="highlight fixed" style="white-space:pre-wrap"><a href="#truncate-table">TRUNCATE TABLE</a></code>, and
<code class="highlight fixed" style="white-space:pre-wrap"><a style="color: #150281;" href="https://mariadb.com/kb/en/lock/">LOCK</a></code>.</p>
<h3 class="anchored_heading" id="deletepartition">PARTITION</h3>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/partition-pruning-and-selection/">Partition Pruning and Selection</a> for details.</p>
<h3 class="anchored_heading" id="deletefor-portion-of">FOR PORTION OF</h3>
<div class="mariadb_from_10_4_3 mariadb from_10_4_3 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1043-release-notes/">10.4.3</a></h5><p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/application-time-periods/#deletion-by-portion">Application Time Periods - Deletion by Portion</a>.</p>
</div><h3 class="anchored_heading" id="deletereturning">RETURNING</h3>
<p>It is possible to return a resultset of the deleted rows for a single table to the client by using the syntax <code>DELETE ... RETURNING select_expr [, select_expr2 ...]]</code></p>
<p>Any of SQL expression that can be calculated from a single row fields is allowed. Subqueries are allowed. The AS keyword is allowed, so it is possible to use aliases.</p>
<p>The use of aggregate functions is not allowed. RETURNING cannot be used in multi-table DELETEs.</p>
<div class="mariadb_from_10_3_1 mariadb from_10_3_1 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1031-release-notes/">10.3.1</a></h5><h3 class="anchored_heading" id="deletesame-source-and-target-table">Same Source and Target Table</h3>
<p>Until <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1031-release-notes/">MariaDB 10.3.1</a>, deleting from a table with the same source and target was not possible. From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1031-release-notes/">MariaDB 10.3.1</a>, this is now possible. For example:</p>
<pre class="fixed"><span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">t1</span> <span class="k">WHERE</span> <span class="n">c1</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">b</span><span class="p">.</span><span class="n">c1</span> <span class="k">FROM</span> <span class="n">t1</span> <span class="n">b</span> <span class="k">WHERE</span> <span class="n">b</span><span class="p">.</span><span class="n">c2</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span>
</pre></div><div class="mariadb_from_10_3_4 mariadb from_10_3_4 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1034-release-notes/">10.3.4</a></h5><h3 class="anchored_heading" id="deletedelete-history">DELETE HISTORY</h3>
<p>One can use <code>DELETE HISTORY</code> to delete historical information from <a style="color: #150281;" href="https://mariadb.com/kb/en/system-versioned-tables/">System-versioned tables</a>.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="deleteexamples">Examples</h2>
<p>How to use the <a style="color: #150281;" href="https://mariadb.com/kb/en/order-by/">ORDER BY</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/limit/">LIMIT</a> clauses:</p>
<pre class="fixed"><span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">page_hit</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="k">timestamp</span> <span class="k">LIMIT</span> <span class="mi">1000000</span><span class="p">;</span>
</pre><p>How to use the RETURNING clause:</p>
<pre class="fixed"><span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">t</span> <span class="n">RETURNING</span> <span class="n">f1</span><span class="p">;</span>
<span class="o">+</span><span class="c1">------+</span>
<span class="o">|</span> <span class="n">f1</span>   <span class="o">|</span>
<span class="o">+</span><span class="c1">------+</span>
<span class="o">|</span>    <span class="mi">5</span> <span class="o">|</span>
<span class="o">|</span>   <span class="mi">50</span> <span class="o">|</span>
<span class="o">|</span>  <span class="mi">500</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+ </span>
</pre><p>The following statement joins two tables: one is only used to satisfy a WHERE condition, but no row is deleted from it; rows from the other table are deleted, instead.</p>
<pre class="fixed"><span class="k">DELETE</span> <span class="n">post</span> <span class="k">FROM</span> <span class="n">blog</span> <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">post</span> <span class="k">WHERE</span> <span class="n">blog</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">post</span><span class="p">.</span><span class="n">blog_id</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="deletedeleting-from-the-same-source-and-target">Deleting from the Same Source and Target</h3>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">c1</span> <span class="nb">INT</span><span class="p">,</span> <span class="n">c2</span> <span class="nb">INT</span><span class="p">);</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">t1</span> <span class="k">WHERE</span> <span class="n">c1</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">b</span><span class="p">.</span><span class="n">c1</span> <span class="k">FROM</span> <span class="n">t1</span> <span class="n">b</span> <span class="k">WHERE</span> <span class="n">b</span><span class="p">.</span><span class="n">c2</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span>
</pre><p>Until <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1031-release-notes/">MariaDB 10.3.1</a>, this returned:</p>
<pre class="fixed"><span class="n">ERROR</span> <span class="mi">1093</span> <span class="p">(</span><span class="n">HY000</span><span class="p">):</span> <span class="k">Table</span> <span class="s1">'t1'</span> <span class="k">is</span> <span class="n">specified</span> <span class="n">twice</span><span class="p">,</span> <span class="k">both</span> <span class="k">as</span> <span class="n">a</span> <span class="n">target</span> <span class="k">for</span> <span class="s1">'DELETE'</span> 
  <span class="k">and</span> <span class="k">as</span> <span class="n">a</span> <span class="n">separate</span> <span class="k">source</span> <span class="k">for</span>
</pre><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1031-release-notes/">MariaDB 10.3.1</a>:</p>
<pre class="fixed"><span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="k">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="deletesee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/ignore/">How IGNORE works</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/select/">SELECT</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/order-by/">ORDER BY</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/limit/">LIMIT</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/replacereturning/">REPLACE ... RETURNING</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/insertreturning/">INSERT ... RETURNING</a>
</li><li><a style="color: #150281;" href="https://www.youtube.com/watch?v=n-LTdEBeAT4">Returning clause</a> (video)</li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="drop-table">1.1.2.1.9 DROP TABLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="drop-tablesyntax">Syntax</h2>
<pre class="fixed">DROP [TEMPORARY] TABLE [IF EXISTS] [/*COMMENT TO SAVE*/]
    tbl_name [, tbl_name] ...
    [WAIT n|NOWAIT]
    [RESTRICT | CASCADE]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class="mariadb_from_10_5_4"><a href="#drop-tablesyntax" title="Syntax">Syntax</a></li>

    <li class="mariadb_from_10_5_4"><a href="#drop-tabledescription" title="Description">Description</a>    <ol class="toc">

        <li class="mariadb_from_10_5_4"><a href="#drop-tablewaitnowait" title="WAIT/NOWAIT">WAIT/NOWAIT</a>    </li></ol>
</li>

    <li class="mariadb_from_10_5_4"><a href="#drop-tabledrop-table-in-replication" title="DROP TABLE in replication">DROP TABLE in replication</a></li>

    <li class="mariadb_from_10_5_4"><a href="#drop-tabledropping-an-internal-sql-table" title="Dropping an Internal #sql-... Table">Dropping an Internal #sql-... Table</a></li>

    <li class="mariadb_from_10_5_4"><a href="#drop-tabledropping-all-tables-in-a-database" title="Dropping All Tables in a Database">Dropping All Tables in a Database</a></li>

    <li class="mariadb_from_10_5_4"><a href="#drop-tableatomic-drop-table" title="Atomic DROP TABLE">Atomic DROP TABLE</a></li>

    <li class="mariadb_from_10_5_4"><a href="#drop-tableexamples" title="Examples">Examples</a></li>

    <li class="mariadb_from_10_5_4"><a href="#drop-tablenotes" title="Notes">Notes</a></li>

    <li class="mariadb_from_10_5_4"><a href="#drop-tablesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="drop-tabledescription">Description</h2>
<p><code>DROP TABLE</code> removes one or more tables. You must have the <code>DROP</code> privilege
for each table. All table data and the table definition are removed, as well as <a style="color: #150281;" href="https://mariadb.com/kb/en/triggers/">triggers</a> associated to the table, so be
careful with this statement! If any of the tables named in the argument list do
not exist, MariaDB returns an error indicating by name which non-existing tables
it was unable to drop, but it also drops all of the tables in the list that do
exist.</p>
<p><strong>Important</strong>: When a table is dropped, user privileges on the table are not
automatically dropped. See <a href="#grant">GRANT</a>.</p>
<p>If another thread is using the table in an explicit transaction or an autocommit transaction, then the thread acquires a <a style="color: #150281;" href="https://mariadb.com/kb/en/metadata-locking/">metadata lock (MDL)</a> on the table. The <code>DROP TABLE</code> statement will wait in the "Waiting for table metadata lock" <a style="color: #150281;" href="https://mariadb.com/kb/en/thread-states/">thread state</a> until the MDL is released. MDLs are released in the following cases:</p>
<ul start="1"><li>If an MDL is acquired in an explicit transaction, then the MDL will be released when the transaction ends.
</li><li>If an MDL is acquired in an autocommit transaction, then the MDL will be released when the statement ends.
</li><li>Transactional and non-transactional tables are handled the same.
</li></ul>
<p>Note that for a partitioned table, <code>DROP TABLE</code> permanently removes the table
definition, all of its partitions, and all of the data which was stored in
those partitions. It also removes the partitioning definition (.par) file
associated with the dropped table.</p>
<p>For each referenced table, <code>DROP TABLE</code> drops a temporary table with that name, if it exists. If it does not exist, and the <code>TEMPORARY</code> keyword is not used, it drops a non-temporary table with the same name, if it exists. The <code>TEMPORARY</code> keyword ensures that a non-temporary table will not accidentally be dropped.</p>
<p>Use <code>IF EXISTS</code> to prevent an error from occurring for tables that do not
exist. A <code>NOTE</code> is generated for each non-existent table when using
<code>IF EXISTS</code>. See <a style="color: #150281;" href="https://mariadb.com/kb/en/show-warnings/">SHOW WARNINGS</a>.</p>
<p>If a <a style="color: #150281;" href="https://mariadb.com/kb/en/foreign-keys/">foreign key</a> references this table, the table cannot be dropped. In this case, it is necessary to drop the foreign key first.</p>
<p><code>RESTRICT</code> and <code>CASCADE</code> are allowed to make porting from other database systems easier. In MariaDB, they do nothing.</p>
<p>The comment before the table names (<code>/*COMMENT TO SAVE*/</code>) is stored in the <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log/">binary log</a>. That feature can be used by replication tools to send their internal messages.</p>
<p>It is possible to specify table names as <code>db_name</code>.<code>tab_name</code>. This is useful to delete tables from multiple databases with one statement. See <a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-qualifiers/">Identifier Qualifiers</a> for details.</p>
<p>The <a href="#granttable-privileges">DROP privilege</a> is required to use <code>DROP TABLE</code> on non-temporary tables. For temporary tables, no privilege is required, because such tables are only visible for the current session.</p>
<p><strong>Note:</strong> <code>DROP TABLE</code> automatically commits the current active transaction,
unless you use the <code>TEMPORARY</code> keyword.</p>
<div class="mariadb_from_10_5_4 mariadb from_10_5_4 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1054-release-notes/">10.5.4</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1054-release-notes/">MariaDB 10.5.4</a>, <code>DROP TABLE</code> reliably deletes table remnants inside a storage engine even if the <code>.frm</code> file is missing. Before then, a missing <code>.frm</code> file would result in the statement failing.</p>
</div><div class="mariadb_from_10_3_1 mariadb from_10_3_1 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1031-release-notes/">10.3.1</a></h5><h3 class="anchored_heading" id="drop-tablewaitnowait">WAIT/NOWAIT</h3>
<p>Set the lock wait timeout. See <a style="color: #150281;" href="https://mariadb.com/kb/en/wait-and-nowait/">WAIT and NOWAIT</a>.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="drop-tabledrop-table-in-replication">DROP TABLE in replication</h2>
<p><code>DROP TABLE</code> has the following characteristics in <a style="color: #150281;" href="https://mariadb.com/kb/en/replication/">replication</a>:</p>
<ul start="1"><li><code class="highlight fixed" style="white-space:pre-wrap">DROP TABLE IF EXISTS</code> are always logged.
</li><li><code class="highlight fixed" style="white-space:pre-wrap">DROP TABLE</code> without <code class="highlight fixed" style="white-space:pre-wrap">IF EXISTS</code> for tables that don't exist are not written to the <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log/">binary log</a>.
</li><li>Dropping of <code class="highlight fixed" style="white-space:pre-wrap">TEMPORARY</code> tables are prefixed in the log with <code class="highlight fixed" style="white-space:pre-wrap">TEMPORARY</code>. These drops are only logged when running <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log-formats/#statement-based">statement</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log-formats/#mixed">mixed mode</a> replication.
</li><li>One <code class="highlight fixed" style="white-space:pre-wrap">DROP TABLE</code> statement can be logged with up to 3 different <code class="highlight fixed" style="white-space:pre-wrap">DROP</code> statements:
<ul start="1"><li><code class="highlight fixed" style="white-space:pre-wrap">DROP TEMPORARY TABLE list_of_non_transactional_temporary_tables</code>
</li><li><code class="highlight fixed" style="white-space:pre-wrap">DROP TEMPORARY TABLE list_of_transactional_temporary_tables</code>
</li><li><code class="highlight fixed" style="white-space:pre-wrap">DROP TABLE list_of_normal_tables</code>
</li></ul>
</li></ul>
<p><code class="highlight fixed" style="white-space:pre-wrap">DROP TABLE</code> on the primary is treated on the replica as <code class="highlight fixed" style="white-space:pre-wrap">DROP TABLE IF EXISTS</code>. You can change that by setting <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-server-system-variables/#slave_ddl_exec_mode">slave-ddl-exec-mode</a> to <code class="highlight fixed" style="white-space:pre-wrap">STRICT</code>.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="drop-tabledropping-an-internal-sql-table">Dropping an Internal #sql-... Table</h2>
<p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-106/">MariaDB 10.6</a>, <a href="#drop-tableatomic-drop-table">DROP TABLE is atomic</a> and the following does not apply. Until <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-105/">MariaDB 10.5</a>, if the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqld-options/">mariadbd/mysqld process</a> is killed during an <a href="#alter-table">ALTER TABLE</a> you may find a table named #sql-... in your data directory. In <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-103/">MariaDB 10.3</a>, InnoDB tables with this prefix will be deleted automatically during startup.
From <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-104/">MariaDB 10.4</a>, these temporary tables will always be deleted automatically.</p>
<p>If you want to delete one of these tables explicitly you can do so by using the following syntax:</p>
<pre class="fixed"><span class="k">DROP</span> <span class="k">TABLE</span> <span class="o">`#</span><span class="n">mysql50</span><span class="o">##</span><span class="k">sql</span><span class="o">-</span><span class="p">...</span><span class="o">`</span><span class="p">;</span>
</pre><p>When running an <code>ALTER TABLE…ALGORITHM=INPLACE</code> that rebuilds the table, InnoDB will create an internal <code>#sql-ib</code> table. Until <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1032-release-notes/">MariaDB 10.3.2</a>, for these tables, the <code>.frm</code> file will be called something else. In order to drop such a table after a server crash, you must rename the <code>#sql*.frm</code> file to match the <code>#sql-ib*.ibd</code> file.</p>
<p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1033-release-notes/">MariaDB 10.3.3</a>, the same name as the .frm file is used for the intermediate copy of the table. The #sql-ib names are used by TRUNCATE and delayed DROP.</p>
<p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10219-release-notes/">MariaDB 10.2.19</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10310-release-notes/">MariaDB 10.3.10</a>, the #sql-ib tables will be deleted automatically.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="drop-tabledropping-all-tables-in-a-database">Dropping All Tables in a Database</h2>
<p>The best way to drop all tables in a database is by executing <code><a style="color: #150281;" href="https://mariadb.com/kb/en/drop-database/">DROP DATABASE</a></code>, which will drop the database itself, and all tables in it.</p>
<p>However, if you want to drop all tables in the database, but you also want to keep the database itself and any other non-table objects in it, then you would need to execute <code>DROP TABLE</code> to drop each individual table. You can construct these <code>DROP TABLE</code> commands by querying the <code><a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-tables-table/">TABLES</a></code> table in the <code><a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-tables/">information_schema</a></code> database. For example:</p>
<pre class="fixed">SELECT CONCAT('DROP TABLE IF EXISTS `', TABLE_SCHEMA, '`.`', TABLE_NAME, '`;')
FROM information_schema.TABLES
WHERE TABLE_SCHEMA = 'mydb';
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="drop-tableatomic-drop-table">Atomic DROP TABLE</h2>
<div class="mariadb_from_10_6_1 mariadb from_10_6_1 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1061-release-notes/">10.6.1</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-106/">MariaDB 10.6</a>, <code>DROP TABLE</code> for a single table is atomic (<a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-25180">MDEV-25180</a>) for most engines, including InnoDB, MyRocks, MyISAM and Aria.</p>
<p>This means that if there is a crash (server down or power outage) during <code>DROP TABLE</code>, all tables
that have been processed so far will be completely dropped, including related trigger files and status entries, and the <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log/">binary log</a> will include a <code>DROP TABLE</code> statement for the dropped tables.
Tables for which the drop had not started will be left intact.</p>
<p>In older MariaDB versions, there was a small chance that, during a server crash happening in the middle of <code>DROP TABLE</code>, some storage engines that were using multiple storage files, like <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam-storage-engine/">MyISAM</a>, could have only a part of its internal files dropped.</p>
<p>In <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-105/">MariaDB 10.5</a>, <code>DROP TABLE</code> was extended to be able to delete a table that was only partly dropped (<a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-11412">MDEV-11412</a>) as explained above. Atomic <code>DROP TABLE</code> is the final piece to make <code>DROP TABLE</code> fully reliable.</p>
<p>Dropping multiple tables is crash-safe.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/atomic-ddl/">Atomic DDL</a> for more information.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="drop-tableexamples">Examples</h2>
<pre class="fixed"><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">Employees</span><span class="p">,</span> <span class="n">Customers</span><span class="p">;</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="drop-tablenotes">Notes</h2>
<p>Beware that <code>DROP TABLE</code> can drop both tables and <a style="color: #150281;" href="https://mariadb.com/kb/en/create-sequence/">sequences</a>. This is mainly done to allow old tools like <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqldump/">mysqldump</a> to work with sequences.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="drop-tablesee-also">See Also</h2>
<ul start="1"><li><a href="#create-table">CREATE TABLE</a>
</li><li><a href="#alter-table">ALTER TABLE</a>
</li><li><a href="#show-create-table">SHOW CREATE TABLE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/drop-sequence/">DROP SEQUENCE</a>
</li><li>Variable <a style="color: #150281;" href="https://mariadb.com/kb/en/replication-and-binary-log-server-system-variables/#slave_ddl_exec_mode">slave-ddl-exec-mode</a>.</li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="installing-system-tables-mysql_install_db">1.1.2.1.10 Installing System Tables (mysql_install_db)</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <p><code>mysql_install_db</code> initializes the MariaDB data directory and creates the
<a style="color: #150281;" href="https://mariadb.com/kb/en/system-tables/">system tables</a> in the <code><a style="color: #150281;" href="https://mariadb.com/kb/en/the-mysql-database-tables/">mysql</a></code> database, if they do not exist. MariaDB uses these tables to manage <a href="#grantprivilege-levels">privileges</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/roles/">roles</a>, and <a style="color: #150281;" href="https://mariadb.com/kb/en/plugins/">plugins</a>. It also uses them to provide the data for the <code><a style="color: #150281;" href="https://mariadb.com/kb/en/help-command/">help</a></code> command in the <code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysql-command-line-client/">mysql</a></code> client.</p>
<p><code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_install_db/">mysql_install_db</a></code> works by starting MariaDB Server's <code>mysqld</code> process in <code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqld-options/#-bootstrap">--bootstrap</a></code> mode and sending commands to create the <a style="color: #150281;" href="https://mariadb.com/kb/en/system-tables/">system tables</a> and their content.</p>
<p>There is a version specifically for Windows, <code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_install_dbexe/">mysql_install_db.exe</a></code>.</p>
<p>To invoke <code>mysql_install_db</code>, use the following syntax:</p>
<pre class="fixed">mysql_install_db --user=mysql
</pre><p>For the options supported by <code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_install_db/">mysql_install_db</a></code>, see <a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_install_db/#options">mysql_install_db: Options</a>.</p>
<p>For the option groups read by <code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_install_db/">mysql_install_db</a></code>, see <a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_install_db/#option-groups">mysql_install_db: Option Groups</a>.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_install_db/#installing-system-tables">mysql_install_db: Installing System Tables</a> for information on the installation process.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_install_db/#troubleshooting-issues">mysql_install_db: Troubleshooting Issues</a> for information on how to troubleshoot the installation process.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="see-also">See also:</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_install_db/">mysql_install_db</a>
</li><li>The Windows version of <code>mysql_install_db</code>: <code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_install_dbexe/">mysql_install_db.exe</a></code></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="mysqlcheck">1.1.2.1.11 mysqlcheck</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <div class="mariadb_from_10_4_6 mariadb from_10_4_6 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1046-release-notes/">10.4.6</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1046-release-notes/">MariaDB 10.4.6</a>, <code>mariadb-check</code> is a symlink to <code>mysqlcheck</code>. </p>
</div><div class="mariadb_from_10_5_2 mariadb from_10_5_2 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">10.5.2</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">MariaDB 10.5.2</a>, <code>mariadb-check</code> is the name of the tool, with <code>mysqlcheck</code> a symlink .</p>
</div><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class="mariadb_from_10_5_2"><a href="#mysqlcheckusing-mysqlcheck" title="Using mysqlcheck">Using mysqlcheck</a>    <ol class="toc">

        <li class="mariadb_from_10_5_2"><a href="#mysqlcheckoptions" title="Options">Options</a></li>

        <li class="mariadb_from_10_5_2"><a href="#mysqlcheckoption-files" title="Option Files">Option Files</a>        <ol class="toc">

            <li class="mariadb_from_10_5_2"><a href="#mysqlcheckoption-groups" title="Option Groups">Option Groups</a>        </li></ol>
    </li></ol>
</li>

    <li class="mariadb_from_10_5_2"><a href="#mysqlchecknotes" title="Notes">Notes</a>    <ol class="toc">

        <li class="mariadb_from_10_5_2"><a href="#mysqlcheckdefault-values" title="Default Values">Default Values</a></li>

        <li class="mariadb_from_10_5_2"><a href="#mysqlcheckmysqlcheck-and-auto-repair" title="mysqlcheck and auto-repair">mysqlcheck and auto-repair</a></li>

        <li class="mariadb_from_10_5_2"><a href="#mysqlcheckmysqlcheck-and-all-databases" title="mysqlcheck and all-databases">mysqlcheck and all-databases</a></li>

        <li class="mariadb_from_10_5_2"><a href="#mysqlcheckmysqlcheck-and-verbose" title="mysqlcheck and verbose">mysqlcheck and verbose</a>    </li></ol>
 </li></ol>

</div><p>
<code>mysqlcheck</code> is a maintenance tool that allows you to check, repair, analyze and optimize multiple tables from the command line.</p>
<p>It is essentially a commandline interface to the <a href="#check-table">CHECK TABLE</a>, <a href="#repair-table">REPAIR TABLE</a>, <a href="#analyze-table">ANALYZE TABLE</a> and <a href="#optimize-table">OPTIMIZE TABLE</a> commands, and so, unlike <a style="color: #150281;" href="https://mariadb.com/kb/en/myisamchk/">myisamchk</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/aria_chk/">aria_chk</a>, requires the server to be running.</p>
<p>This tool does not work with partitioned tables.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="mysqlcheckusing-mysqlcheck">Using mysqlcheck</h2>
<pre class="fixed">./client/mysqlcheck [OPTIONS] database [tables]
</pre><p>OR</p>
<pre class="fixed">./client/mysqlcheck [OPTIONS] --databases DB1 [DB2 DB3...]
</pre><p>OR</p>
<pre class="fixed">./client/mysqlcheck [OPTIONS] --all-databases
</pre><p><code>mysqlcheck</code> can be used to CHECK (-c, -m, -C), REPAIR (-r), ANALYZE (-a),
or OPTIMIZE (-o) tables. Some of the options (like -e or -q) can be
used at the same time. Not all options are supported by all storage engines.</p>
<p>The -c, -r, -a and -o options are exclusive to each other.    </p>
<p>The option <code>--check</code> will be used by default, if no other options were specified.
You can change the default behavior by making a symbolic link to the binary, or
copying it somewhere with another name, the alternatives are:</p>
<div class="cstm-style darkheader-nospace-borders centered"><table><tbody><tr><td><code>mysqlrepair</code></td><td>The default option will be <code>-r</code> (<code>--repair</code>)</td></tr>
<tr><td><code>mysqlanalyze</code></td><td>The default option will be <code>-a</code> (<code>--analyze</code>)</td></tr>
<tr><td><code>mysqloptimize</code></td><td>The default option will be <code>-o</code> (<code>--optimize</code>)</td></tr>
</tbody></table>
</div><h3 class="anchored_heading" id="mysqlcheckoptions">Options</h3>
<p><code>mysqlcheck</code> supports the following options:</p>
<div class="cstm-style darkheader-nospace-borders centered"><table><tbody><tr><th>Option</th><th>Description</th></tr>
<tr><td><code>-A</code>, <code>--all-databases</code></td><td>Check all the databases. This is the same as <code>--databases</code> with all databases selected.</td></tr>
<tr><td><code>-1</code>, <code>--all-in-1</code></td><td>Instead of issuing one query for each table, use one query per database, naming all tables in the database in a comma-separated list.</td></tr>
<tr><td><code>-a</code>, <code>--analyze</code></td><td>Analyze given tables.</td></tr>
<tr><td><code>--auto-repair</code></td><td>If a checked table is corrupted, automatically fix it. Repairing will be done after all tables have been checked.</td></tr>
<tr><td><code>--character-sets-dir=name</code></td><td>Directory where <a style="color: #150281;" href="https://mariadb.com/kb/en/data-types-character-sets-and-collations/">character set</a> files are installed.</td></tr>
<tr><td><code>-c</code>, <code>--check</code></td><td>Check table for errors.</td></tr>
<tr><td><code>-C</code>, <code>--check-only-changed</code></td><td>Check only tables that have changed since last check or haven't been closed properly.</td></tr>
<tr><td><code>-g</code>, <code>--check-upgrade</code></td><td>Check tables for version-dependent changes. May be used with <code>--auto-repair</code> to correct tables requiring version-dependent updates. Automatically enables the <code>--fix-db-names</code> and <code>--fix-table-names</code> options. Used <a style="color: #150281;" href="https://mariadb.com/kb/en/upgrading-to-mariadb-from-mysql/">when upgrading</a></td></tr>
<tr><td><code>--compress</code></td><td>Compress all information sent between the client and server if both support compression.</td></tr>
<tr><td><code>-B</code>, <code>--databases</code></td><td>Check several databases. Note that normally <em>mysqlcheck</em> treats the first argument as a database name, and following arguments as table names. With this option, no tables are given, and all name arguments are regarded as database names.</td></tr>
<tr><td><code>-# </code>, <code>--debug[=name]</code></td><td>Output debug log. Often this is 'd:t:o,filename'.</td></tr>
<tr><td><code>--debug-check</code></td><td>Check memory and open file usage at exit.</td></tr>
<tr><td><code>--debug-info</code></td><td>Print some debug info at exit.</td></tr>
<tr><td><code>--default-auth=plugin</code></td><td>Default authentication client-side plugin to use.</td></tr>
<tr><td><code>--default-character-set=name</code></td><td>Set the default <a style="color: #150281;" href="https://mariadb.com/kb/en/data-types-character-sets-and-collations/">character set</a>.</td></tr>
<tr><td><code>-e</code>, <code>--extended</code></td><td>If you are using this option with <code>--check</code>, it will ensure that the table is 100 percent consistent, but will take a long time. If you are using this option with <code>--repair</code>, it will force using the old, slow, repair with keycache method, instead of the much faster repair by sorting.</td></tr>
<tr><td><code>-F</code>, <code>--fast</code></td><td>Check only tables that haven't been closed properly.</td></tr>
<tr><td><code>--fix-db-names</code></td><td>Convert database names to the format used since MySQL 5.1. Only database names that contain special characters are affected. Used <a style="color: #150281;" href="https://mariadb.com/kb/en/upgrading-to-mariadb-from-mysql/">when upgrading</a> from an old MySQL version.</td></tr>
<tr><td><code>--fix-table-names</code></td><td>Convert table names (including <a style="color: #150281;" href="https://mariadb.com/kb/en/views/">views</a>) to the format used since MySQL 5.1. Only table names that contain special characters are affected. Used <a style="color: #150281;" href="https://mariadb.com/kb/en/upgrading-to-mariadb-from-mysql/">when upgrading</a> from an old MySQL version.</td></tr>
<tr><td><code>--flush</code></td><td>Flush each table after check. This is useful if you don't want to have the checked tables take up space in the caches after the check.</td></tr>
<tr><td><code>-f</code>, <code>--force</code></td><td>Continue even if we get an SQL error.</td></tr>
<tr><td><code>-?</code>, <code>--help</code></td><td>Display this help message and exit.</td></tr>
<tr><td><code>-h name</code>, <code>--host=name</code></td><td>Connect to the given host.</td></tr>
<tr><td><code>-m</code>, <code>--medium-check</code></td><td>Faster than extended-check, but only finds 99.99 percent of all errors. Should be good enough for most cases.</td></tr>
<tr><td><code>-o</code>, <code>--optimize</code></td><td>Optimize tables.</td></tr>
<tr><td><code>-p</code>, <code>--password[=name]</code></td><td>Password to use when connecting to the server. If you use the short option form (<code>-p</code>), you cannot have a space between the option and the password. If you omit the password value following the <code>--password</code> or <code>-p</code> option on the command line, mysqlcheck prompts for one. Specifying a password on the command line should be considered insecure. You can use an option file to avoid giving the password on the command line.</td></tr>
<tr><td><code>-Z</code>, <code>--persistent</code></td><td>When using ANALYZE TABLE (<code>--analyze</code>), uses the PERSISTENT FOR ALL option, which forces <a style="color: #150281;" href="https://mariadb.com/kb/en/engine-independent-table-statistics/">Engine-independent Statistics</a> for this table to be updated. Added in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10110-release-notes/">MariaDB 10.1.10</a></td></tr>
<tr><td><code>-W</code>, <code>--pipe</code></td><td>On Windows, connect to the server via a named pipe. This option applies only if the server supports named-pipe connections.</td></tr>
<tr><td><code>--plugin-dir</code></td><td>Directory for client-side plugins.</td></tr>
<tr><td><code>-P num</code>, <code>--port=num</code></td><td>Port number to use for connection or 0 for default to, in order of preference, my.cnf, $MYSQL_TCP_PORT, /etc/services, built-in default (3306).</td></tr>
<tr><td><code>--process-tables</code></td><td>Perform the requested operation (check, repair, analyze, optimize) on tables. Enabled by default. Use  <code>--skip-process-tables</code> to disable.</td></tr>
<tr><td><code>--process-views[=val]</code></td><td>Perform the requested operation (only <a href="#check-view">CHECK VIEW</a> or <a href="#repair-view">REPAIR VIEW</a>). Possible values are NO, YES (correct the checksum, if necessary, add the mariadb-version field), UPGRADE_FROM_MYSQL (same as YES and toggle the algorithm MERGE&lt;-&gt;TEMPTABLE.</td></tr>
<tr><td><code>--protocol=name</code></td><td>The connection protocol (tcp, socket, pipe, memory) to use for connecting to the server. Useful when other connection parameters would cause a protocol to be used other than the one you want.</td></tr>
<tr><td><code>-q</code>, <code>--quick</code></td><td>If you are using this option with CHECK TABLE, it prevents the check from scanning the rows to check for wrong links. This is the fastest check. If you are using this option with REPAIR TABLE, it will try to repair only the index tree. This is the fastest repair method for a table.</td></tr>
<tr><td><code>-r</code>, <code>--repair</code></td><td>Can fix almost anything except unique keys that aren't unique.</td></tr>
<tr><td><code>--shared-memory-base-name</code></td><td>Shared-memory name to use for Windows connections using shared memory to a local server (started with the <code>--shared-memory</code> option). Case-sensitive.</td></tr>
<tr><td><code>-s</code>, <code>--silent</code></td><td>Print only error messages.</td></tr>
<tr><td><code>--skip-database</code></td><td>Don't process the database (case-sensitive) specified as argument.</td></tr>
<tr><td><code>-S name</code>, <code>--socket=name</code></td><td>For connections to localhost, the Unix socket file to use, or, on Windows, the name of the named pipe to use.</td></tr>
<tr><td><code>--ssl</code></td><td>Enables <a style="color: #150281;" href="https://mariadb.com/kb/en/data-in-transit-encryption/">TLS</a>. TLS is also enabled even without setting this option when certain other TLS options are set. Starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-102/">MariaDB 10.2</a>, the <code>--ssl</code> option will not enable <a style="color: #150281;" href="https://mariadb.com/kb/en/secure-connections-overview/#server-certificate-verification">verifying the server certificate</a> by default. In order to verify the server certificate, the user must specify the <code>--ssl-verify-server-cert</code> option.</td></tr>
<tr><td><code>--ssl-ca=name</code></td><td>Defines a path to a PEM file that should contain one or more X509 certificates for trusted Certificate Authorities (CAs) to use for <a style="color: #150281;" href="https://mariadb.com/kb/en/data-in-transit-encryption/">TLS</a>. This option requires that you use the absolute path, not a relative path. See <a style="color: #150281;" href="https://mariadb.com/kb/en/secure-connections-overview/#certificate-authorities-cas">Secure Connections Overview: Certificate Authorities (CAs)</a> for more information. This option implies the <code>--ssl</code> option.</td></tr>
<tr><td><code>--ssl-capath=name</code></td><td>Defines a path to a directory that contains one or more PEM files that should each contain one X509 certificate for a trusted Certificate Authority (CA) to use for <a style="color: #150281;" href="https://mariadb.com/kb/en/data-in-transit-encryption/">TLS</a>. This option requires that you use the absolute path, not a relative path. The directory specified by this option needs to be run through the <code><a style="color: #150281;" href="https://www.openssl.org/docs/man1.1.1/man1/rehash.html">openssl rehash</a></code> command. See <a style="color: #150281;" href="https://mariadb.com/kb/en/secure-connections-overview/#certificate-authorities-cas">Secure Connections Overview: Certificate Authorities (CAs)</a> for more information. This option is only supported if the client was built with OpenSSL or yaSSL. If the client was built with GnuTLS or Schannel, then this option is not supported. See <a style="color: #150281;" href="https://mariadb.com/kb/en/tls-and-cryptography-libraries-used-by-mariadb/">TLS and Cryptography Libraries Used by MariaDB</a> for more information about which libraries are used on which platforms. This option implies the <code>--ssl</code> option.</td></tr>
<tr><td><code>--ssl-cert=name</code></td><td>Defines a path to the X509 certificate file to use for <a style="color: #150281;" href="https://mariadb.com/kb/en/data-in-transit-encryption/">TLS</a>. This option requires that you use the absolute path, not a relative path. This option implies the <code>--ssl</code> option.</td></tr>
<tr><td><code>--ssl-cipher=name</code></td><td>List of permitted ciphers or cipher suites to use for <a style="color: #150281;" href="https://mariadb.com/kb/en/data-in-transit-encryption/">TLS</a>. This option implies the <code>--ssl</code> option.</td></tr>
<tr><td><code>--ssl-crl=name</code></td><td>Defines a path to a PEM file that should contain one or more revoked X509 certificates to use for <a style="color: #150281;" href="https://mariadb.com/kb/en/data-in-transit-encryption/">TLS</a>. This option requires that you use the absolute path, not a relative path. See <a style="color: #150281;" href="https://mariadb.com/kb/en/secure-connections-overview/#certificate-revocation-lists-crls">Secure Connections Overview: Certificate Revocation Lists (CRLs)</a> for more information. This option is only supported if the client was built with OpenSSL or Schannel. If the client was built with yaSSL or GnuTLS, then this option is not supported. See <a style="color: #150281;" href="https://mariadb.com/kb/en/tls-and-cryptography-libraries-used-by-mariadb/">TLS and Cryptography Libraries Used by MariaDB</a> for more information about which libraries are used on which platforms.</td></tr>
<tr><td><code>--ssl-crlpath=name</code></td><td>Defines a path to a directory that contains one or more PEM files that should each contain one revoked X509 certificate to use for <a style="color: #150281;" href="https://mariadb.com/kb/en/data-in-transit-encryption/">TLS</a>. This option requires that you use the absolute path, not a relative path. The directory specified by this option needs to be run through the <code><a style="color: #150281;" href="https://www.openssl.org/docs/man1.1.1/man1/rehash.html">openssl rehash</a></code> command. See <a style="color: #150281;" href="https://mariadb.com/kb/en/secure-connections-overview/#certificate-revocation-lists-crls">Secure Connections Overview: Certificate Revocation Lists (CRLs)</a> for more information. This option is only supported if the client was built with OpenSSL. If the client was built with yaSSL, GnuTLS, or Schannel, then this option is not supported. See <a style="color: #150281;" href="https://mariadb.com/kb/en/tls-and-cryptography-libraries-used-by-mariadb/">TLS and Cryptography Libraries Used by MariaDB</a> for more information about which libraries are used on which platforms.</td></tr>
<tr><td><code>--ssl-key=name</code></td><td>Defines a path to a private key file to use for <a style="color: #150281;" href="https://mariadb.com/kb/en/data-in-transit-encryption/">TLS</a>. This option requires that you use the absolute path, not a relative path. This option implies the <code>--ssl</code> option.</td></tr>
<tr><td><code>--ssl-verify-server-cert</code></td><td>Enables <a style="color: #150281;" href="https://mariadb.com/kb/en/secure-connections-overview/#server-certificate-verification">server certificate verification</a>. This option is disabled by default.</td></tr>
<tr><td><code>--tables</code></td><td>Overrides the <code>--databases</code> or <code>-B</code> option such that all name arguments following the option are regarded as table names.</td></tr>
<tr><td><code>--use-frm</code></td><td>For repair operations on MyISAM tables, get table structure from .frm file, so the table can be repaired even if the .MYI header is corrupted.</td></tr>
<tr><td><code>-u</code>, <code>--user=name</code></td><td>User for login if not current user.</td></tr>
<tr><td><code>-v</code>, <code>--verbose</code></td><td>Print info about the various stages. You can give this option several times to get even more information. See <a href="#mysqlcheckmysqlcheck-and-verbose">mysqlcheck and verbose</a>, below.</td></tr>
<tr><td><code>-V</code>, <code>--version</code></td><td>Output version information and exit.</td></tr>
<tr><td><code>--write-binlog</code></td><td>Write ANALYZE, OPTIMIZE and REPAIR TABLE commands to the <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log/">binary log</a>. Enabled by default; use <code>--skip-write-binlog</code> when commands should not be sent to replication slaves.</td></tr>
</tbody></table>
</div><h3 class="anchored_heading" id="mysqlcheckoption-files">Option Files</h3>
<p>In addition to reading options from the command-line, <code>mysqlcheck</code> can also read options from <a style="color: #150281;" href="https://mariadb.com/kb/en/configuring-mariadb-with-option-files/">option files</a>. If an unknown option is provided to <code>mysqlcheck</code> in an option file, then it is ignored.</p>
<p>The following options relate to how MariaDB command-line tools handles option files. They must be given as the first argument on the command-line:</p>
<div class="cstm-style darkheader-nospace-borders centered"><table><tbody><tr><th>Option</th><th>Description</th></tr>
<tr><td><code>--print-defaults</code></td><td>Print the program argument list and exit.</td></tr>
<tr><td><code>--no-defaults</code></td><td>Don't read default options from any option file.</td></tr>
<tr><td><code>--defaults-file=# </code></td><td>Only read default options from the given file #.</td></tr>
<tr><td><code>--defaults-extra-file=# </code></td><td>Read this file after the global files are read.</td></tr>
<tr><td><code>--defaults-group-suffix=# </code></td><td>In addition to the default option groups, also read option groups with this suffix.</td></tr>
</tbody></table>
</div><p>In <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-102/">MariaDB 10.2</a> and later, <code>mysqlcheck</code> is linked with <a style="color: #150281;" href="https://mariadb.com/kb/en/about-mariadb-connector-c/">MariaDB Connector/C</a>. However, MariaDB Connector/C does not yet handle the parsing of option files for this client. That is still performed by the server option file parsing code. See  <a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-19035">MDEV-19035</a> for more information.</p>
<h4 class="anchored_heading" id="mysqlcheckoption-groups">Option Groups</h4>
<p><code>mysqlcheck</code> reads options from the following <a style="color: #150281;" href="https://mariadb.com/kb/en/configuring-mariadb-with-option-files/#option-groups">option groups</a> from <a style="color: #150281;" href="https://mariadb.com/kb/en/configuring-mariadb-with-option-files/">option files</a>:</p>
<div class="cstm-style darkheader-nospace-borders centered"><table><tbody><tr><th>Group</th><th>Description</th></tr>
<tr><td><code>[mysqlcheck]</code></td><td> Options read by <code>mysqlcheck</code>, which includes both MariaDB Server and MySQL Server.</td></tr>
<tr><td><code>[mariadb-check]</code></td><td>Options read by <code>mysqlcheck</code>. Available starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1046-release-notes/">MariaDB 10.4.6</a>.</td></tr>
<tr><td><code>[client]</code></td><td> Options read by all MariaDB and MySQL <a style="color: #150281;" href="https://mariadb.com/kb/en/clients-utilities/">client programs</a>, which includes both MariaDB and MySQL clients. For example, <code>mysqldump</code>.</td></tr>
<tr><td><code>[client-server]</code></td><td>Options read by all MariaDB <a style="color: #150281;" href="https://mariadb.com/kb/en/clients-utilities/">client programs</a> and the MariaDB Server. This is useful for options like socket and port, which is common between the server and the clients.</td></tr>
<tr><td><code>[client-mariadb]</code></td><td>Options read by all MariaDB <a style="color: #150281;" href="https://mariadb.com/kb/en/clients-utilities/">client programs</a>.</td></tr>
</tbody></table>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="mysqlchecknotes">Notes</h2>
<h3 class="anchored_heading" id="mysqlcheckdefault-values">Default Values</h3>
<p>To see the default values for the options and also to see the arguments you get
from configuration files you can do:</p>
<pre class="fixed">./client/mysqlcheck --print-defaults
./client/mysqlcheck --help
</pre><h3 class="anchored_heading" id="mysqlcheckmysqlcheck-and-auto-repair">mysqlcheck and auto-repair</h3>
<p>When running <code>mysqlcheck</code> with <code>--auto-repair</code> (as done by
<a style="color: #150281;" href="https://mariadb.com/kb/en/upgrading-to-mariadb-from-mysql/">mysql_upgrade</a>), <code>mysqlcheck</code> will first
check all tables and then in a separate phase repair those that failed the
check.</p>
<h3 class="anchored_heading" id="mysqlcheckmysqlcheck-and-all-databases">mysqlcheck and all-databases</h3>
<p><code>mysqlcheck --all-databases</code> will ignore the internal log tables <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlgeneral_log-table/">general_log</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlslow_log-table/">slow_log</a> as these can't be checked, repaired or optimized.</p>
<h3 class="anchored_heading" id="mysqlcheckmysqlcheck-and-verbose">mysqlcheck and verbose</h3>
<p>Using one <code>--verbose</code> option will give you more information about what mysqlcheck is doing.</p>
<p>Using two <code>--verbose</code> options will also give you connection information.</p>
<p>If you use three <code>--verbose</code> options you will also get, on stdout, all <a href="#alter-table">ALTER</a>, <a href="#rename-table">RENAME</a>, and <a href="#check-table">CHECK</a> commands that mysqlcheck executes.</p>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="optimize-table">1.1.2.1.12 OPTIMIZE TABLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="optimize-tablesyntax">Syntax</h2>
<pre class="fixed">OPTIMIZE [NO_WRITE_TO_BINLOG | LOCAL] TABLE
    tbl_name [, tbl_name] ...
    [WAIT n | NOWAIT]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class="mariadb_from_10_3_0"><a href="#optimize-tablesyntax" title="Syntax">Syntax</a></li>

    <li class="mariadb_from_10_3_0"><a href="#optimize-tabledescription" title="Description">Description</a>    <ol class="toc">

        <li class="mariadb_from_10_3_0"><a href="#optimize-tablewaitnowait" title="WAIT/NOWAIT">WAIT/NOWAIT</a></li>

        <li class="mariadb_from_10_3_0"><a href="#optimize-tabledefragmenting" title="Defragmenting">Defragmenting</a></li>

        <li class="mariadb_from_10_3_0"><a href="#optimize-tableupdating-an-innodb-fulltext-index" title="Updating an InnoDB fulltext index">Updating an InnoDB fulltext index</a></li>

        <li class="mariadb_from_10_3_0"><a href="#optimize-tabledefragmenting-innodb-tablespaces" title="Defragmenting InnoDB tablespaces">Defragmenting InnoDB tablespaces</a>    </li></ol>
</li>

    <li class="mariadb_from_10_3_0"><a href="#optimize-tablesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="optimize-tabledescription">Description</h2>
<p><code class="fixed" style="white-space:pre-wrap">OPTIMIZE TABLE</code> has two main functions. It can either be used to defragment tables, or to update the InnoDB fulltext index.</p>
<div class="mariadb_from_10_3_0 mariadb from_10_3_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1030-release-notes/">10.3.0</a></h5><h4 class="anchored_heading" id="optimize-tablewaitnowait">WAIT/NOWAIT</h4>
<p>Set the lock wait timeout. See <a style="color: #150281;" href="https://mariadb.com/kb/en/wait-and-nowait/">WAIT and NOWAIT</a>.</p>
</div><h3 class="anchored_heading" id="optimize-tabledefragmenting">Defragmenting</h3>
<p><code>OPTIMIZE TABLE</code> works for <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a> (before <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1011-release-notes/">MariaDB 10.1.1</a>, only if the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_file_per_table">innodb_file_per_table</a> server system variable is set), <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam/">MyISAM</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/archive/">ARCHIVE</a> tables, and should be used if you have deleted a large part of a table or if you have made many changes to a table with variable-length
rows (tables that have <a style="color: #150281;" href="https://mariadb.com/kb/en/varchar/">VARCHAR</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/varbinary/">VARBINARY</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/blob/">BLOB</a>, or <a style="color: #150281;" href="https://mariadb.com/kb/en/text/">TEXT</a> columns).  Deleted rows are maintained in a
linked list and subsequent <code class="fixed" style="white-space:pre-wrap">INSERT</code> operations reuse old row positions.</p>
<p>This statement requires <a href="#grant">SELECT and INSERT privileges</a> for the table.</p>
<p>By default, <code>OPTIMIZE TABLE</code> statements are written to the <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log/">binary log</a> and will be <a style="color: #150281;" href="https://mariadb.com/kb/en/replication/">replicated</a>. The <code>NO_WRITE_TO_BINLOG</code> keyword (<code>LOCAL</code> is an alias) will ensure the statement is not written to the binary log.</p>
<p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10319-release-notes/">MariaDB 10.3.19</a>, <code>OPTIMIZE TABLE</code> statements are not logged to the binary log if <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#read_only">read_only</a> is set. See also <a style="color: #150281;" href="https://mariadb.com/kb/en/read-only-replicas/">Read-Only Replicas</a>.</p>
<p><code class="fixed" style="white-space:pre-wrap">OPTIMIZE TABLE</code> is also supported for partitioned tables. You
can use 
<code class="highlight fixed" style="white-space:pre-wrap"><a href="#alter-table">ALTER TABLE</a> ... OPTIMIZE PARTITION</code> 
to optimize one or more partitions.</p>
<p>You can use <code class="fixed" style="white-space:pre-wrap">OPTIMIZE TABLE</code> to reclaim the unused
space and to defragment the data file. With other storage engines, <code>OPTIMIZE TABLE</code> does nothing by default, and returns this message: " The storage engine for the table doesn't support optimize". However, if the server has been started with the <code>--skip-new</code> option, <code>OPTIMIZE TABLE</code> is linked to <a href="#alter-table">ALTER TABLE</a>, and recreates the table. This operation frees the unused space and updates index statistics.</p>
<p>The <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a> storage engine supports <a style="color: #150281;" href="https://mariadb.com/kb/en/progress-reporting/">progress reporting</a> for this statement.</p>
<p>If a <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam/">MyISAM</a> table is fragmented, <a style="color: #150281;" href="https://mariadb.com/kb/en/concurrent-inserts/">concurrent inserts</a> will not be performed until an <code>OPTIMIZE TABLE</code> statement is executed on that table, unless the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#concurrent_insert">concurrent_insert</a> server system variable is set to <code>ALWAYS</code>.</p>
<h3 class="anchored_heading" id="optimize-tableupdating-an-innodb-fulltext-index">Updating an InnoDB fulltext index</h3>
<p>When rows are added or deleted to an InnoDB <a style="color: #150281;" href="https://mariadb.com/kb/en/full-text-indexes/">fulltext index</a>, the index is not immediately re-organized, as this can be an expensive operation. Change statistics are stored in a separate location . The  fulltext index is only fully re-organized when an <code>OPTIMIZE TABLE</code> statement is run.</p>
<p>By default, an OPTIMIZE TABLE will defragment a table. In order to use it to update fulltext index statistics, the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_optimize_fulltext_only">innodb_optimize_fulltext_only</a> system variable must be set to <code>1</code>. This is intended to be a temporary setting, and should be reset to <code>0</code> once the fulltext index has been re-organized.</p>
<p>Since fulltext re-organization can take a long time, the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_ft_num_word_optimize">innodb_ft_num_word_optimize</a> variable limits the re-organization to a number of words (2000 by default).  You can run multiple OPTIMIZE statements to fully re-organize the index.</p>
<h3 class="anchored_heading" id="optimize-tabledefragmenting-innodb-tablespaces">Defragmenting InnoDB tablespaces</h3>
<p><a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1011-release-notes/">MariaDB 10.1.1</a> merged the Facebook/Kakao defragmentation patch, allowing one to use <code>OPTIMIZE TABLE</code> to defragment InnoDB tablespaces. For this functionality to be enabled, the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_defragment">innodb_defragment</a> system variable must be enabled. No new tables are created and there is no need to copy data from old tables to new tables. Instead, this feature loads <code>n</code> pages (determined by <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_defragment_n_pages">innodb-defragment-n-pages</a>) and tries to move records so that pages would be full of records and then frees pages that are fully empty after the operation. Note that tablespace files (including ibdata1) will not shrink as the result of defragmentation, but one will get better memory utilization in the InnoDB buffer pool as there are fewer data pages in use.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/defragmenting-innodb-tablespaces/">Defragmenting InnoDB Tablespaces</a> for more details.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="optimize-tablesee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-online-ddl-operations-with-the-inplace-alter-algorithm/#optimize-table">Optimize Table in InnoDB with ALGORITHM set to INPLACE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-online-ddl-operations-with-the-nocopy-alter-algorithm/#optimize-table">Optimize Table in InnoDB with ALGORITHM set to NOCOPY</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-online-ddl-operations-with-the-instant-alter-algorithm/#optimize-table">Optimize Table in InnoDB with ALGORITHM set to INSTANT</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="rename-table">1.1.2.1.13 RENAME TABLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="rename-tablesyntax">Syntax</h2>
<pre class="fixed">RENAME TABLE[S] [IF EXISTS] tbl_name 
  [WAIT n | NOWAIT]
  TO new_tbl_name
    [, tbl_name2 TO new_tbl_name2] ...
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class="mariadb_from_10_5_2"><a href="#rename-tablesyntax" title="Syntax">Syntax</a></li>

    <li class="mariadb_from_10_5_2"><a href="#rename-tabledescription" title="Description">Description</a>    <ol class="toc">

        <li class="mariadb_from_10_5_2"><a href="#rename-tableif-exists" title="IF EXISTS">IF EXISTS</a></li>

        <li class="mariadb_from_10_5_2"><a href="#rename-tablewaitnowait" title="WAIT/NOWAIT">WAIT/NOWAIT</a></li>

        <li class="mariadb_from_10_5_2"><a href="#rename-tableprivileges" title="Privileges">Privileges</a></li>

        <li class="mariadb_from_10_5_2"><a href="#rename-tableatomic-rename-table" title="Atomic RENAME TABLE">Atomic RENAME TABLE</a>    </li></ol>
 </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="rename-tabledescription">Description</h2>
<p>This statement renames one or more tables or <a style="color: #150281;" href="https://mariadb.com/kb/en/views/">views</a>, but not the privileges associated with them.</p>
<h3 class="anchored_heading" id="rename-tableif-exists">IF EXISTS</h3>
<div class="mariadb_from_10_5_2 mariadb from_10_5_2 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1052-release-notes/">10.5.2</a></h5><p>If this directive is used, one will not get an error if the table to be renamed doesn't exist.</p>
</div><p>The rename operation is done atomically, which means that no other session can
access any of the tables while the rename is running. For example, if you have
an existing table <code class="fixed" style="white-space:pre-wrap">old_table</code>, you can create another table
<code class="fixed" style="white-space:pre-wrap">new_table</code> that has the same structure but is empty, and then
replace the existing table with the empty one as follows (assuming that
<code class="fixed" style="white-space:pre-wrap">backup_table</code> does not already exist):</p>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">new_table</span> <span class="p">(...);</span>
<span class="k">RENAME</span> <span class="k">TABLE</span> <span class="n">old_table</span> <span class="k">TO</span> <span class="n">backup_table</span><span class="p">,</span> <span class="n">new_table</span> <span class="k">TO</span> <span class="n">old_table</span><span class="p">;</span>
</pre><p><code>tbl_name</code> can optionally be specified as <code>db_name</code>.<code>tbl_name</code>. See <a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-qualifiers/">Identifier Qualifiers</a>. This allows to use <code>RENAME</code> to move a table from a database to another (as long as they are on the same filesystem):</p>
<pre class="fixed"><span class="k">RENAME</span> <span class="k">TABLE</span> <span class="n">db1</span><span class="p">.</span><span class="n">t</span> <span class="k">TO</span> <span class="n">db2</span><span class="p">.</span><span class="n">t</span><span class="p">;</span>
</pre><p>Note that moving a table to another database is not possible if it has some <a style="color: #150281;" href="https://mariadb.com/kb/en/triggers/">triggers</a>. Trying to do so produces the following error:</p>
<pre class="fixed">ERROR 1435 (HY000): Trigger in wrong schema
</pre><p>Also, views cannot be moved to another database:</p>
<pre class="fixed">ERROR 1450 (HY000): Changing schema from 'old_db' to 'new_db' is not allowed.
</pre><p>Multiple tables can be renamed in a single statement. The presence or absence of the optional <code>S</code> (<code>RENAME TABLE</code> or <code>RENAME TABLES</code>) has no impact, whether a single or multiple tables are being renamed.</p>
<p>If a <code>RENAME TABLE</code> renames more than one table and one renaming fails, all renames executed by the same statement are rolled back.</p>
<p>Renames are always executed in the specified order. Knowing this, it is also possible to swap two tables' names:</p>
<pre class="fixed"><span class="k">RENAME</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="k">TO</span> <span class="n">tmp_table</span><span class="p">,</span>
    <span class="n">t2</span> <span class="k">TO</span> <span class="n">t1</span><span class="p">,</span>
    <span class="n">tmp_table</span> <span class="k">TO</span> <span class="n">t2</span><span class="p">;</span>
</pre><h3 class="anchored_heading" id="rename-tablewaitnowait">WAIT/NOWAIT</h3>
<div class="mariadb_from_10_3_0 mariadb from_10_3_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1030-release-notes/">10.3.0</a></h5><p>Set the lock wait timeout. See <a style="color: #150281;" href="https://mariadb.com/kb/en/wait-and-nowait/">WAIT and NOWAIT</a>.</p>
</div><h3 class="anchored_heading" id="rename-tableprivileges">Privileges</h3>
<p>Executing the <code>RENAME TABLE</code> statement requires the <a href="#granttable-privileges">DROP</a>, <a href="#granttable-privileges">CREATE</a> and <a href="#granttable-privileges">INSERT</a> privileges for the table or the database.</p>
<h3 class="anchored_heading" id="rename-tableatomic-rename-table">Atomic RENAME TABLE</h3>
<div class="mariadb_from_10_6_1 mariadb from_10_6_1 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1061-release-notes/">10.6.1</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-106/">MariaDB 10.6</a>, <code>RENAME TABLE</code> is atomic for most engines, including InnoDB, MyRocks, MyISAM and Aria (<a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-23842">MDEV-23842</a>).
This means that if there is a crash (server down or power outage) during <code>RENAME TABLE</code>, all tables will revert to their original names and any changes to trigger files will be reverted.</p>
<p>In older MariaDB version there was a small chance that, during a server crash happening in the middle of <code>RENAME TABLE</code>, some tables could have been renamed (in the worst case partly) while others would not be renamed.</p>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/atomic-ddl/">Atomic DDL</a> for more information.</p>
</div>
    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="repair-table">1.1.2.1.14 REPAIR TABLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="syntax">Syntax</h2>
<pre class="fixed">REPAIR [NO_WRITE_TO_BINLOG | LOCAL] TABLE
    tbl_name [, tbl_name] ...
    [QUICK] [EXTENDED] [USE_FRM]
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="description">Description</h2>
<p><code class="fixed" style="white-space:pre-wrap">REPAIR TABLE</code> repairs a possibly corrupted table. By default,
it has the same effect as</p>
<pre class="fixed">myisamchk --recover tbl_name
</pre><p>or</p>
<pre class="fixed">aria_chk --recover tbl_name
</pre><p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/aria_chk/">aria_chk</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/myisamchk/">myisamchk</a> for more.</p>
<p><code class="fixed" style="white-space:pre-wrap">REPAIR TABLE</code> works for <a style="color: #150281;" href="https://mariadb.com/kb/en/archive/">Archive</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/csv/">CSV</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam/">MyISAM</a> tables. For <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a>, see <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-recovery-modes/">recovery modes</a>. For CSV, see also <a style="color: #150281;" href="https://mariadb.com/kb/en/checking-and-repairing-csv-tables/">Checking and Repairing CSV Tables</a>. For Archive, this statement also improves compression. If the storage engine does not support this statement, a warning is issued.</p>
<p>This statement requires <a href="#grant">SELECT and INSERT privileges</a> for the table.</p>
<p>By default, <code>REPAIR TABLE</code> statements are written to the <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log/">binary log</a> and will be <a style="color: #150281;" href="https://mariadb.com/kb/en/replication/">replicated</a>. The <code>NO_WRITE_TO_BINLOG</code> keyword (<code>LOCAL</code> is an alias) will ensure the statement is not written to the binary log.</p>
<p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10319-release-notes/">MariaDB 10.3.19</a>, <code>REPAIR TABLE</code> statements are not logged to the binary log if <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#read_only">read_only</a> is set. See also <a style="color: #150281;" href="https://mariadb.com/kb/en/read-only-replicas/">Read-Only Replicas</a>.</p>
<p>When an index is recreated, the storage engine may use a configurable buffer in the process. Incrementing the buffer speeds up the index creation. <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/myisam/">MyISAM</a> allocate a buffer whose size is defined by <code><a style="color: #150281;" href="https://mariadb.com/kb/en/aria-server-system-variables/#aria_sort_buffer_size">aria_sort_buffer_size</a></code> or <code><a style="color: #150281;" href="https://mariadb.com/kb/en/myisam-server-system-variables/#myisam_sort_buffer_size">myisam_sort_buffer_size</a></code>, also used for <code><a href="#alter-table">ALTER TABLE</a></code>.</p>
<p><code class="fixed" style="white-space:pre-wrap">REPAIR TABLE</code> is also supported for partitioned tables.
However, the <code class="fixed" style="white-space:pre-wrap">USE_FRM</code> option cannot be used with this statement
on a partitioned table.</p>
<p> <code class="highlight fixed" style="white-space:pre-wrap"><a href="#alter-table">ALTER TABLE ... REPAIR PARTITION</a></code> can be used
to repair one or more partitions.</p>
<p>The <a style="color: #150281;" href="https://mariadb.com/kb/en/aria/">Aria</a> storage engine supports <a style="color: #150281;" href="https://mariadb.com/kb/en/progress-reporting/">progress reporting</a> for this statement.</p>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="repair-view">1.1.2.1.15 REPAIR VIEW</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="repair-viewsyntax">Syntax</h2>
<pre class="fixed">REPAIR [NO_WRITE_TO_BINLOG | LOCAL] VIEW  view_name[, view_name] ... [FROM MYSQL]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#repair-viewsyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#repair-viewdescription" title="Description">Description</a></li>

    <li class=""><a href="#repair-viewsee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="repair-viewdescription">Description</h2>
<p>The <code>REPAIR VIEW</code> statement was introduced to assist with fixing <a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-6916">MDEV-6916</a>, an issue introduced in <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-52/">MariaDB 5.2</a> where the view algorithms were swapped compared to their MySQL on disk representation. It checks whether the view algorithm is correct. It is run as part of <a style="color: #150281;" href="https://mariadb.com/kb/en/mysql_upgrade/">mysql_upgrade</a>, and should not normally be required in regular use.</p>
<p>By default it corrects the checksum and if necessary adds the mariadb-version field. If the optional <code>FROM MYSQL</code> clause is used, and no mariadb-version field is present, the MERGE and TEMPTABLE algorithms are toggled.</p>
<p>By default, <code>REPAIR VIEW</code> statements are written to the <a style="color: #150281;" href="https://mariadb.com/kb/en/binary-log/">binary log</a> and will be <a style="color: #150281;" href="https://mariadb.com/kb/en/replication/">replicated</a>. The <code>NO_WRITE_TO_BINLOG</code> keyword (<code>LOCAL</code> is an alias) will ensure the statement is not written to the binary log.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="repair-viewsee-also">See Also</h2>
<ul start="1"><li><a href="#check-view">CHECK VIEW</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="replace">1.1.2.1.16 REPLACE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="replacesyntax">Syntax</h2>
<pre class="fixed">REPLACE [LOW_PRIORITY | DELAYED]
 [INTO] tbl_name [PARTITION (partition_list)] [(col,...)]
 {VALUES | VALUE} ({expr | DEFAULT},...),(...),...
[RETURNING select_expr 
      [, select_expr ...]]
</pre><p>Or:</p>
<pre class="fixed">REPLACE [LOW_PRIORITY | DELAYED]
    [INTO] tbl_name [PARTITION (partition_list)]
    SET col={expr | DEFAULT}, ...
[RETURNING select_expr 
      [, select_expr ...]]
</pre><p>Or:</p>
<pre class="fixed">REPLACE [LOW_PRIORITY | DELAYED]
    [INTO] tbl_name [PARTITION (partition_list)] [(col,...)]
    SELECT ...
[RETURNING select_expr 
      [, select_expr ...]]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class="mariadb_from_10_5_0"><a href="#replacesyntax" title="Syntax">Syntax</a></li>

    <li class="mariadb_from_10_5_0"><a href="#replacedescription" title="Description">Description</a>    <ol class="toc">

        <li class="mariadb_from_10_5_0"><a href="#replacepartition" title="PARTITION">PARTITION</a></li>

        <li class="mariadb_from_10_5_0"><a href="#replacereplace-returning" title="REPLACE RETURNING">REPLACE RETURNING</a>        <ol class="toc">

            <li class="mariadb_from_10_5_0"><a href="#replaceexamples" title="Examples">Examples</a>        </li></ol>
    </li></ol>
</li>

    <li class="mariadb_from_10_5_0"><a href="#replaceexamples" title="Examples">Examples</a></li>

    <li class="mariadb_from_10_5_0"><a href="#replacesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="replacedescription">Description</h2>
<p> <code class="highlight fixed" style="white-space:pre-wrap">REPLACE</code> works exactly like
 <code class="highlight fixed" style="white-space:pre-wrap"><a style="color: #150281;" href="https://mariadb.com/kb/en/insert/">INSERT</a></code>, except that if an old row in the table
 has the same value as a new row for a <code class="highlight fixed" style="white-space:pre-wrap">PRIMARY KEY</code> or a
 <code class="highlight fixed" style="white-space:pre-wrap">UNIQUE</code> index, the old row is deleted before the new row is
 inserted. If the table has more than one <code>UNIQUE</code> keys, it is possible that the new row conflicts with more than one row. In this case, all conflicting rows will be deleted.</p>
<p>The table name can be specified in the form <code>db_name</code>.<code>tbl_name</code> or, if a default database is selected, in the form <code>tbl_name</code> (see <a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-qualifiers/">Identifier Qualifiers</a>). This allows to use <code><a style="color: #150281;" href="https://mariadb.com/kb/en/insert-select/">REPLACE ... SELECT</a></code> to copy rows between different databases.
<br/><br/></p>
<div class="mariadb_from_10_5_0 mariadb from_10_5_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1050-release-notes/">10.5.0</a></h5><p>The RETURNING clause was introduced in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1050-release-notes/">MariaDB 10.5.0</a></p>
</div><p>Basically it works like this:</p>
<pre class="fixed">BEGIN;
SELECT 1 FROM t1 WHERE key=# FOR UPDATE;
IF found-row
  DELETE FROM t1 WHERE key=# ;
ENDIF
INSERT INTO t1 VALUES (...);
END;
</pre><p>The above can be replaced with:</p>
<pre class="fixed">REPLACE INTO t1 VALUES (...)
</pre><p> <code class="highlight fixed" style="white-space:pre-wrap">REPLACE</code> is a MariaDB/MySQL extension to the SQL standard. It
 either inserts, or deletes and inserts. For other MariaDB/MySQL extensions to
 standard SQL --- that also handle duplicate values --- see <a style="color: #150281;" href="https://mariadb.com/kb/en/ignore/">IGNORE</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/insert-on-duplicate-key-update/">INSERT ON DUPLICATE KEY UPDATE</a>.</p>
<p>Note that unless the table has a <code class="highlight fixed" style="white-space:pre-wrap">PRIMARY KEY</code> or
 <code class="highlight fixed" style="white-space:pre-wrap">UNIQUE</code> index, using a <code class="highlight fixed" style="white-space:pre-wrap">REPLACE</code> statement
makes no sense. It becomes equivalent to <code class="highlight fixed" style="white-space:pre-wrap">INSERT</code>, because
there is no index to be used to determine whether a new row duplicates another.</p>
<p>Values for all columns are taken from the values sSee <a style="color: #150281;" href="https://mariadb.com/kb/en/partition-pruning-and-selection/">Partition Pruning and Selection</a> for details.pecified in the
 <code class="highlight fixed" style="white-space:pre-wrap">REPLACE</code> statement. Any missing columns are set to their
default values, just as happens for <code class="highlight fixed" style="white-space:pre-wrap">INSERT</code>. You cannot refer
to values from the current row and use them in the new row. If you use an
assignment such as <code class="highlight fixed" style="white-space:pre-wrap">'SET col = col + 1'</code>, the
reference to the column name on the right hand side is treated as
 <code class="highlight fixed" style="white-space:pre-wrap">DEFAULT(col)</code>, so the assignment is equivalent to
 <code class="highlight fixed" style="white-space:pre-wrap">'SET col = DEFAULT(col) + 1'</code>.</p>
<p>To use <code class="highlight fixed" style="white-space:pre-wrap">REPLACE</code>, you must have both the
 <code class="highlight fixed" style="white-space:pre-wrap">INSERT</code> and <code class="highlight fixed" style="white-space:pre-wrap">DELETE</code> <a href="#grant">privileges</a>
for the table.</p>
<p>There are some gotchas you should be aware of, before using <code>REPLACE</code>:</p>
<ul start="1"><li>If there is an <code><a style="color: #150281;" href="https://mariadb.com/kb/en/auto_increment/">AUTO_INCREMENT</a></code> field, a new value will be generated.
</li><li>If there are foreign keys, <code>ON DELETE</code> action will be activated by <code>REPLACE</code>.
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/triggers/">Triggers</a> on <code>DELETE</code> and <code>INSERT</code> will be activated by <code>REPLACE</code>.
</li></ul>
<p>To avoid some of these behaviors, you can use <code>INSERT ... ON DUPLICATE KEY UPDATE</code>.</p>
<p>This statement activates INSERT and DELETE triggers. See <a style="color: #150281;" href="https://mariadb.com/kb/en/trigger-overview/">Trigger Overview</a> for details.</p>
<h3 class="anchored_heading" id="replacepartition">PARTITION</h3>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/partition-pruning-and-selection/">Partition Pruning and Selection</a> for details.</p>
<h3 class="anchored_heading" id="replacereplace-returning">REPLACE RETURNING</h3>
<div class="cstm-style darkheader-nospace-borders"><p><code>REPLACE ... RETURNING</code> returns a resultset of the replaced rows.</p>
<p>This returns the listed columns for all the rows that are replaced, or alternatively, the specified SELECT expression. Any SQL expressions which can be calculated can be used in the select expression for the RETURNING clause, including virtual columns and aliases, expressions which use various operators such as bitwise, logical and arithmetic operators, string functions, date-time functions, numeric functions, control flow functions, secondary functions and stored functions. Along with this, statements which have subqueries and prepared statements can also be used.</p>
</div><h4 class="anchored_heading" id="replaceexamples">Examples</h4>
<p>Simple REPLACE statement</p>
<pre class="fixed"><span class="k">REPLACE</span> <span class="k">INTO</span> <span class="n">t2</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">'Leopard'</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">'Dog'</span><span class="p">)</span> <span class="n">RETURNING</span> <span class="n">id2</span><span class="p">,</span> <span class="n">id2</span><span class="o">+</span><span class="n">id2</span> 
<span class="k">as</span> <span class="n">Total</span> <span class="p">,</span><span class="n">id2</span><span class="o">|</span><span class="n">id2</span><span class="p">,</span> <span class="n">id2</span><span class="o">&amp;&amp;</span><span class="n">id2</span><span class="p">;</span>
<span class="o">+</span><span class="c1">-----+-------+---------+----------+</span>
<span class="o">|</span> <span class="n">id2</span> <span class="o">|</span> <span class="n">Total</span> <span class="o">|</span> <span class="n">id2</span><span class="o">|</span><span class="n">id2</span> <span class="o">|</span> <span class="n">id2</span><span class="o">&amp;&amp;</span><span class="n">id2</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----+-------+---------+----------+</span>
<span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>   <span class="mi">2</span> <span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----+-------+---------+----------+</span>
</pre><p>Using stored functions in RETURNING</p>
<pre class="fixed"><span class="k">DELIMITER</span> <span class="o">|</span>
<span class="k">CREATE</span> <span class="k">FUNCTION</span> <span class="n">f</span><span class="p">(</span><span class="n">arg</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">RETURNS</span> <span class="nb">INT</span>
    <span class="k">BEGIN</span>
      <span class="k">RETURN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">arg</span><span class="o">+</span><span class="n">arg</span><span class="p">);</span>
    <span class="k">END</span><span class="o">|</span>

<span class="k">DELIMITER</span> <span class="p">;</span>
<span class="k">PREPARE</span> <span class="n">stmt</span> <span class="k">FROM</span> <span class="ss">"REPLACE INTO t2 SET id2=3, animal2='Fox' RETURNING f2(id2),</span>
<span class="ss">UPPER(animal2)"</span><span class="p">;</span>

<span class="k">EXECUTE</span> <span class="n">stmt</span><span class="p">;</span>
<span class="o">+</span><span class="c1">---------+----------------+</span>
<span class="o">|</span> <span class="n">f2</span><span class="p">(</span><span class="n">id2</span><span class="p">)</span> <span class="o">|</span> <span class="k">UPPER</span><span class="p">(</span><span class="n">animal2</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+----------------+</span>
<span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span> <span class="n">FOX</span>            <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+----------------+</span>
</pre><p>Subqueries in the statement</p>
<pre class="fixed"><span class="k">REPLACE</span> <span class="k">INTO</span> <span class="n">t1</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t2</span> <span class="n">RETURNING</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">id2</span> <span class="k">FROM</span> <span class="n">t2</span> <span class="k">WHERE</span> 
<span class="n">id2</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">id2</span> <span class="k">FROM</span> <span class="n">t2</span> <span class="k">WHERE</span> <span class="n">id2</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span> <span class="k">AS</span> <span class="n">new_id</span><span class="p">;</span>
<span class="o">+</span><span class="c1">--------+</span>
<span class="o">|</span> <span class="n">new_id</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------+</span>
<span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------+</span>
</pre><p>Subqueries in the RETURNING clause that return more than one row or column cannot be used..</p>
<p>Aggregate functions cannot be used in the RETURNING clause. Since aggregate functions work on a set of values and if the purpose is to get the row count, ROW_COUNT() with SELECT can be used, or it can be used in REPLACE...SEL== Description</p>
<div class="cstm-style darkheader-nospace-borders"><p><code>REPLACE ... RETURNING</code> returns a resultset of the replaced rows.</p>
<p>This returns the listed columns for all the rows that are replaced, or alternatively, the specified SELECT expression. Any SQL expressions which can be calculated can be used in the select expression for the RETURNING clause, including virtual columns and aliases, expressions which use various operators such as bitwise, logical and arithmetic operators, string functions, date-time functions, numeric functions, control flow functions, secondary functions and stored functions. Along with this, statements which have subqueries and prepared statements can also be used.</p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="replaceexamples">Examples</h2>
<p>Simple REPLACE statement</p>
<pre class="fixed"><span class="k">REPLACE</span> <span class="k">INTO</span> <span class="n">t2</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">'Leopard'</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">'Dog'</span><span class="p">)</span> <span class="n">RETURNING</span> <span class="n">id2</span><span class="p">,</span> <span class="n">id2</span><span class="o">+</span><span class="n">id2</span> 
<span class="k">as</span> <span class="n">Total</span> <span class="p">,</span><span class="n">id2</span><span class="o">|</span><span class="n">id2</span><span class="p">,</span> <span class="n">id2</span><span class="o">&amp;&amp;</span><span class="n">id2</span><span class="p">;</span>
<span class="o">+</span><span class="c1">-----+-------+---------+----------+</span>
<span class="o">|</span> <span class="n">id2</span> <span class="o">|</span> <span class="n">Total</span> <span class="o">|</span> <span class="n">id2</span><span class="o">|</span><span class="n">id2</span> <span class="o">|</span> <span class="n">id2</span><span class="o">&amp;&amp;</span><span class="n">id2</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----+-------+---------+----------+</span>
<span class="o">|</span>   <span class="mi">1</span> <span class="o">|</span>     <span class="mi">2</span> <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>   <span class="mi">2</span> <span class="o">|</span>     <span class="mi">4</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">-----+-------+---------+----------+</span>
</pre><p>Using stored functions in RETURNING</p>
<pre class="fixed"><span class="k">DELIMITER</span> <span class="o">|</span>
<span class="k">CREATE</span> <span class="k">FUNCTION</span> <span class="n">f</span><span class="p">(</span><span class="n">arg</span> <span class="nb">INT</span><span class="p">)</span> <span class="k">RETURNS</span> <span class="nb">INT</span>
    <span class="k">BEGIN</span>
      <span class="k">RETURN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">arg</span><span class="o">+</span><span class="n">arg</span><span class="p">);</span>
    <span class="k">END</span><span class="o">|</span>

<span class="k">DELIMITER</span> <span class="p">;</span>
<span class="k">PREPARE</span> <span class="n">stmt</span> <span class="k">FROM</span> <span class="ss">"REPLACE INTO t2 SET id2=3, animal2='Fox' RETURNING f2(id2),</span>
<span class="ss">UPPER(animal2)"</span><span class="p">;</span>

<span class="k">EXECUTE</span> <span class="n">stmt</span><span class="p">;</span>
<span class="o">+</span><span class="c1">---------+----------------+</span>
<span class="o">|</span> <span class="n">f2</span><span class="p">(</span><span class="n">id2</span><span class="p">)</span> <span class="o">|</span> <span class="k">UPPER</span><span class="p">(</span><span class="n">animal2</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+----------------+</span>
<span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span> <span class="n">FOX</span>            <span class="o">|</span>
<span class="o">+</span><span class="c1">---------+----------------+</span>
</pre><p>Subqueries in the statement</p>
<pre class="fixed"><span class="k">REPLACE</span> <span class="k">INTO</span> <span class="n">t1</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t2</span> <span class="n">RETURNING</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">id2</span> <span class="k">FROM</span> <span class="n">t2</span> <span class="k">WHERE</span> 
<span class="n">id2</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">id2</span> <span class="k">FROM</span> <span class="n">t2</span> <span class="k">WHERE</span> <span class="n">id2</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span> <span class="k">AS</span> <span class="n">new_id</span><span class="p">;</span>
<span class="o">+</span><span class="c1">--------+</span>
<span class="o">|</span> <span class="n">new_id</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------+</span>
<span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>
<span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">--------+</span>
</pre><p>Subqueries in the RETURNING clause that return more than one row or column cannot be used..</p>
<p>Aggregate functions cannot be used in the RETURNING clause. Since aggregate functions work on a set of values and if the purpose is to get the row count, ROW_COUNT() with SELECT can be used, or it can be used in REPLACE...SELECT...RETURNING if the table in the RETURNING clause is not the same as the REPLACE table.
ECT...RETURNING if the table in the RETURNING clause is not the same as the REPLACE table.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="replacesee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/insert/">INSERT</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/high_priority-and-low_priority-clauses/">HIGH_PRIORITY and LOW_PRIORITY clauses</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/insert-delayed/">INSERT DELAYED</a> for details on the <code>DELAYED</code> clause</li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="show-columns">1.1.2.1.17 SHOW COLUMNS</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="show-columnssyntax">Syntax</h2>
<pre class="fixed">SHOW [FULL] {COLUMNS | FIELDS} FROM tbl_name [FROM db_name]
    [LIKE 'pattern' | WHERE expr]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#show-columnssyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#show-columnsdescription" title="Description">Description</a></li>

    <li class=""><a href="#show-columnsexamples" title="Examples">Examples</a></li>

    <li class=""><a href="#show-columnssee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="show-columnsdescription">Description</h2>
<p><code class="highlight fixed" style="white-space:pre-wrap">SHOW COLUMNS</code> displays information about the columns in a
given table. It also works for views. The <code class="highlight fixed" style="white-space:pre-wrap">LIKE</code> clause, if
present on its own, indicates which column names to match. The <code class="highlight fixed" style="white-space:pre-wrap">WHERE</code> and <code class="highlight fixed" style="white-space:pre-wrap">LIKE</code> clauses can be given to select rows using more general conditions, as discussed in <a style="color: #150281;" href="https://mariadb.com/kb/en/extended-show/">Extended SHOW</a>.</p>
<p>If the data types differ from what you expect them to be based on a
<code class="highlight fixed" style="white-space:pre-wrap">CREATE TABLE</code> statement, note that MariaDB sometimes changes
data types when you create or alter a table. The conditions under which this
occurs are described in the <a style="color: #150281;" href="https://mariadb.com/kb/en/silent-column-changes/">Silent Column Changes</a> article.</p>
<p>The <code class="highlight fixed" style="white-space:pre-wrap">FULL</code> keyword causes the output to include the column
collation and comments, as well as the privileges you have for each column.</p>
<p>You can use <code class="highlight fixed" style="white-space:pre-wrap">db_name.tbl_name</code> as an alternative to the
<code class="highlight fixed" style="white-space:pre-wrap">tbl_name FROM db_name</code> syntax. In other words, these two
statements are equivalent:</p>
<pre class="fixed">SHOW COLUMNS FROM mytable FROM mydb;
SHOW COLUMNS FROM mydb.mytable;
</pre><p><code class="highlight fixed" style="white-space:pre-wrap">SHOW COLUMNS</code> displays the following values for each table
column:</p>
<p><strong>Field</strong> indicates the column name.</p>
<p><strong>Type</strong> indicates the column data type.</p>
<p><strong>Collation</strong> indicates the collation for non-binary string columns, or
NULL for other columns. This value is displayed only if you use the
FULL keyword.</p>
<p>The <strong>Null</strong> field contains YES if NULL values can be stored in the column,
NO if not.</p>
<p>The <strong>Key</strong> field indicates whether the column is indexed:</p>
<ul start="1"><li>If <strong>Key</strong> is empty, the column either is not indexed or is indexed only as a
  secondary column in a multiple-column, non-unique index.
</li><li>If <strong>Key</strong> is <em><strong>PRI</strong></em>, the column is a <code class="highlight fixed" style="white-space:pre-wrap">PRIMARY KEY</code> or
  is one of the columns in a multiple-column <code class="highlight fixed" style="white-space:pre-wrap">PRIMARY KEY</code>.
</li><li>If <strong>Key</strong> is <em><strong>UNI</strong></em>, the column is the first column of a unique-valued
  index that cannot contain <code class="highlight fixed" style="white-space:pre-wrap">NULL</code> values.
</li><li>If <strong>Key</strong> is <em><strong>MUL</strong></em>, multiple occurrences of a given value are allowed
  within the column. The column is the first column of a non-unique index or a
  unique-valued index that can contain <code class="highlight fixed" style="white-space:pre-wrap">NULL</code> values.
</li></ul>
<p>If more than one of the <strong>Key</strong> values applies to a given column of a
table, <strong>Key</strong> displays the one with the highest priority, in the order
PRI, UNI, MUL.</p>
<p>A <code class="highlight fixed" style="white-space:pre-wrap">UNIQUE</code> index may be displayed as <code class="highlight fixed" style="white-space:pre-wrap">PRI</code> if
it cannot contain <code class="highlight fixed" style="white-space:pre-wrap">NULL</code> values and there is no
<code class="highlight fixed" style="white-space:pre-wrap">PRIMARY KEY</code> in the table. A <code class="highlight fixed" style="white-space:pre-wrap">UNIQUE</code> index
may display as <code class="highlight fixed" style="white-space:pre-wrap">MUL</code> if several columns form a composite
<code class="highlight fixed" style="white-space:pre-wrap">UNIQUE</code> index; although the combination of the columns is
unique, each column can still hold multiple occurrences of a given value.</p>
<p>The <strong>Default</strong> field indicates the default value that is assigned to the
column.</p>
<p>The <strong>Extra</strong> field contains any additional information that is available about a given column.</p>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Value</th><th>Description</th></tr>
<tr><td><code>AUTO_INCREMENT</code></td><td>The column was created with the <code>AUTO_INCREMENT</code> keyword.</td></tr>
<tr><td><code>PERSISTENT</code></td><td>The column was created with the <code>PERSISTENT</code> keyword. (New in 5.3)</td></tr>
<tr><td><code>VIRTUAL</code></td><td>The column was created with the <code>VIRTUAL</code> keyword. (New in 5.3)</td></tr>
<tr><td>on update <code>CURRENT_TIMESTAMP</code></td><td>The column is a <code>TIMESTAMP</code> column that is automatically updated on <code>INSERT</code> and <code>UPDATE</code>.</td></tr>
</tbody></table>
</div><p><strong>Privileges</strong> indicates the privileges you have for the column. This
value is displayed only if you use the <code class="highlight fixed" style="white-space:pre-wrap">FULL</code> keyword.</p>
<p><strong>Comment</strong> indicates any comment the column has. This value is displayed
only if you use the <code class="highlight fixed" style="white-space:pre-wrap">FULL</code> keyword.</p>
<p><code class="highlight fixed" style="white-space:pre-wrap">SHOW FIELDS</code> is a synonym for
<code class="highlight fixed" style="white-space:pre-wrap">SHOW COLUMNS</code>. Also <code><a style="color: #150281;" href="https://mariadb.com/kb/en/describe/">DESCRIBE</a></code> and <code><a style="color: #150281;" href="https://mariadb.com/kb/en/explain/">EXPLAIN</a></code> can be used as shortcuts.</p>
<p>You can also list a table's columns with: </p>
<pre class="fixed">mysqlshow db_name tbl_name
</pre><p>See the <code><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlshow/">mysqlshow</a></code> command for more details.</p>
<p>The <code><a style="color: #150281;" href="https://mariadb.com/kb/en/describe/">DESCRIBE</a></code> statement provides information similar to <code>SHOW COLUMNS</code>. The <code><a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-columns-table/">information_schema.COLUMNS</a></code> table provides similar, but more complete, information.</p>
<p>The <code><a href="#show-create-table">SHOW CREATE TABLE</a></code>, <code><a style="color: #150281;" href="https://mariadb.com/kb/en/show-table-status/">SHOW TABLE STATUS</a></code>, and <code><a href="#show-index">SHOW INDEX</a></code> statements also provide information about tables.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="show-columnsexamples">Examples</h2>
<pre class="fixed">SHOW COLUMNS FROM city;
+------------+----------+------+-----+---------+----------------+
| Field      | Type     | Null | Key | Default | Extra          |
+------------+----------+------+-----+---------+----------------+
| Id         | int(11)  | NO   | PRI | NULL    | auto_increment |
| Name       | char(35) | NO   |     |         |                |
| Country    | char(3)  | NO   | UNI |         |                |
| District   | char(20) | YES  | MUL |         |                |
| Population | int(11)  | NO   |     | 0       |                |
+------------+----------+------+-----+---------+----------------+
</pre><pre class="fixed">SHOW COLUMNS FROM employees WHERE Type LIKE 'Varchar%';
+---------------+-------------+------+-----+---------+-------+
| Field         | Type        | Null | Key | Default | Extra |
+---------------+-------------+------+-----+---------+-------+
| first_name    | varchar(30) | NO   | MUL | NULL    |       |
| last_name     | varchar(40) | NO   |     | NULL    |       |
| position      | varchar(25) | NO   |     | NULL    |       |
| home_address  | varchar(50) | NO   |     | NULL    |       |
| home_phone    | varchar(12) | NO   |     | NULL    |       |
| employee_code | varchar(25) | NO   | UNI | NULL    |       |
+---------------+-------------+------+-----+---------+-------+
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="show-columnssee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/describe/">DESCRIBE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlshow/">mysqlshow</a>
</li><li><a href="#show-create-table">SHOW CREATE TABLE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-table-status/">SHOW TABLE STATUS</a>
</li><li><a href="#show-index">SHOW INDEX</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/extended-show/">Extended SHOW</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/silent-column-changes/">Silent Column Changes</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="show-create-table">1.1.2.1.18 SHOW CREATE TABLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="show-create-tablesyntax">Syntax</h2>
<pre class="fixed">SHOW CREATE TABLE tbl_name
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#show-create-tablesyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#show-create-tabledescription" title="Description">Description</a></li>

    <li class=""><a href="#show-create-tableexamples" title="Examples">Examples</a></li>

    <li class=""><a href="#show-create-tablesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="show-create-tabledescription">Description</h2>
<p>Shows the <a href="#create-table">CREATE TABLE</a> statement that created the given
table. The statement requires the <a style="color: #150281;" href="https://mariadb.com/kb/en/select/">SELECT privilege</a> for the table. This statement also works with <a style="color: #150281;" href="https://mariadb.com/kb/en/views/">views</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/create-sequence/">SEQUENCE</a>.</p>
<p><code>SHOW CREATE TABLE</code> quotes table and
column names according to the value of the <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#sql_quote_show_create">sql_quote_show_create</a> server system variable.</p>
<div class="cstm-style redbox"><p>Certain <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/">SQL_MODE</a> values can result in parts of the original CREATE statement not being included in the output. MariaDB-specific table options, column options, and index options are not included in the output of this statement if the <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/#no_table_options">NO_TABLE_OPTIONS</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/#no_field_options">NO_FIELD_OPTIONS</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/#no_key_options">NO_KEY_OPTIONS</a> <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/">SQL_MODE</a> flags are used. All MariaDB-specific table attributes are also not shown when a non-MariaDB/MySQL emulation mode is used, which includes <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/#ansi">ANSI</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/#db2">DB2</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/#postgresql">POSTGRESQL</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/#mssql">MSSQL</a>, <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/#maxdb">MAXDB</a> or <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/#oracle">ORACLE</a>.</p>
</div><p>Invalid table options, column options and index options are normally commented out (note, that it is possible to create a table with invalid options, by altering a table of a different engine, where these options were valid). To have them uncommented, enable the <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/#ignore_bad_table_options">IGNORE_BAD_TABLE_OPTIONS</a> <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/">SQL_MODE</a>. Remember that replaying a <a href="#create-table">CREATE TABLE</a> statement with uncommented invalid options will fail with an error, unless the <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/#ignore_bad_table_options">IGNORE_BAD_TABLE_OPTIONS</a> <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/">SQL_MODE</a> is in effect.</p>
<p>Note that <code>SHOW CREATE TABLE</code> is not meant to provide metadata about a table. It provides information about how the table was declared, but the real table structure could differ a bit. For example, if an index has been declared as <code>HASH</code>, the <code>CREATE TABLE</code> statement returned by <code>SHOW CREATE TABLE</code> will declare that index as <code>HASH</code>; however, it is possible that the index is in fact a <code>BTREE</code>, because the storage engine does not support <code>HASH</code>.</p>
<div class="mariadb_from_10_2_1 mariadb from_10_2_1 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">10.2.1</a></h5><p><a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a> permits <a style="color: #150281;" href="https://mariadb.com/kb/en/text/">TEXT</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/blob/">BLOB</a> data types to be assigned a <a href="#create-tabledefault">DEFAULT</a> value. As a result, from <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a>, <code>SHOW CREATE TABLE</code> will append a <code>DEFAULT NULL</code> to nullable TEXT or BLOB fields if no specific default is provided. </p>
</div><div class="mariadb_from_10_2_2 mariadb from_10_2_2 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1022-release-notes/">10.2.2</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1022-release-notes/">MariaDB 10.2.2</a>, numbers are no longer quoted in the <code>DEFAULT</code> clause in <code>SHOW CREATE</code> statement. Previously, MariaDB quoted numbers. </p>
</div><h2 class="anchored_heading" style="margin-top: 50px;" id="show-create-tableexamples">Examples</h2>
<pre class="fixed">SHOW CREATE TABLE t\G
*************************** 1. row ***************************
       Table: t
Create Table: CREATE TABLE `t` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `s` char(60) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1
</pre><p>With <a style="color: #150281;" href="https://mariadb.com/kb/en/server-system-variables/#sql_quote_show_create">sql_quote_show_create</a> off:</p>
<pre class="fixed">SHOW CREATE TABLE t\G
*************************** 1. row ***************************
       Table: t
Create Table: CREATE TABLE t (
  id int(11) NOT NULL AUTO_INCREMENT,
  s char(60) DEFAULT NULL,
  PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=latin1
</pre><p>Unquoted numeric DEFAULTs, from <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1022-release-notes/">MariaDB 10.2.2</a>:</p>
<pre class="fixed">CREATE TABLE td (link TINYINT DEFAULT 1);

SHOW CREATE TABLE td\G
*************************** 1. row ***************************
       Table: td
Create Table: CREATE TABLE `td` (
  `link` tinyint(4) DEFAULT 1
) ENGINE=InnoDB DEFAULT CHARSET=latin1
</pre><p>Quoted numeric DEFAULTs, until <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a>:</p>
<pre class="fixed">CREATE TABLE td (link TINYINT DEFAULT 1);

SHOW CREATE TABLE td\G
*************************** 1. row ***************************
       Table: td
Create Table: CREATE TABLE `td` (
  `link` tinyint(4) DEFAULT '1'
) ENGINE=InnoDB DEFAULT CHARSET=latin1
</pre><p><a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/">SQL_MODE</a> impacting the output:</p>
<pre class="fixed">SELECT @@sql_mode;
+-------------------------------------------------------------------------------------------+
| @@sql_mode                                                                                |
+-------------------------------------------------------------------------------------------+
| STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION |
+-------------------------------------------------------------------------------------------+

CREATE TABLE `t1` (
       `id` int(11) NOT NULL AUTO_INCREMENT,
       `msg` varchar(100) DEFAULT NULL,
       PRIMARY KEY (`id`)
     ) ENGINE=InnoDB DEFAULT CHARSET=latin1
;

SHOW CREATE TABLE t1\G
*************************** 1. row ***************************
       Table: t1
Create Table: CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `msg` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1

SET SQL_MODE=ORACLE;

SHOW CREATE TABLE t1\G
*************************** 1. row ***************************
       Table: t1
Create Table: CREATE TABLE "t1" (
  "id" int(11) NOT NULL,
  "msg" varchar(100) DEFAULT NULL,
  PRIMARY KEY ("id")
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="show-create-tablesee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-create-sequence/">SHOW CREATE SEQUENCE</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/show-create-view/">SHOW CREATE VIEW</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="show-index">1.1.2.1.19 SHOW INDEX</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="show-indexsyntax">Syntax</h2>
<pre class="fixed">SHOW {INDEX | INDEXES | KEYS} 
 FROM tbl_name [FROM db_name]
 [WHERE expr]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#show-indexsyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#show-indexdescription" title="Description">Description</a></li>

    <li class=""><a href="#show-indexexamples" title="Examples">Examples</a></li>

    <li class=""><a href="#show-indexsee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="show-indexdescription">Description</h2>
<p><code class="highlight fixed" style="white-space:pre-wrap">SHOW INDEX</code> returns table index information. The format
resembles that of the SQLStatistics call in ODBC.</p>
<p>You can use <code class="highlight fixed" style="white-space:pre-wrap">db_name.tbl_name</code> as an alternative to the
 <code class="highlight fixed" style="white-space:pre-wrap">tbl_name FROM db_name</code> syntax. These two statements are
 equivalent:</p>
<pre class="fixed">SHOW INDEX FROM mytable FROM mydb;
SHOW INDEX FROM mydb.mytable;
</pre><p><code class="highlight fixed" style="white-space:pre-wrap">SHOW KEYS</code> and <code class="highlight fixed" style="white-space:pre-wrap">SHOW INDEXES</code> are synonyms for <code class="highlight fixed" style="white-space:pre-wrap">SHOW INDEX</code>.</p>
<p>You can also list a table's indexes with the <a style="color: #150281;" href="https://mariadb.com/kb/en/mysqlshow/">mariadb-show/mysqlshow</a> command: </p>
<pre class="fixed">mysqlshow -k db_name tbl_name
</pre><p>The <a style="color: #150281;" href="https://mariadb.com/kb/en/information-schema-statistics-table/">information_schema.STATISTICS</a> table stores similar information.</p>
<p>The following fields are returned by <code>SHOW INDEX</code>.</p>
<div class="cstm-style darkheader-nospace-borders"><table><tbody><tr><th>Field</th><th>Description</th></tr>
<tr><td><strong><code>Table</code></strong></td><td>Table name</td></tr>
<tr><td><strong><code>Non_unique</code></strong></td><td><code>1</code> if the index permits duplicate values, <code>0</code> if values must be unique.</td></tr>
<tr><td><strong><code>Key_name</code></strong></td><td>Index name. The primary key is always named <code>PRIMARY</code>.</td></tr>
<tr><td><strong><code>Seq_in_index</code></strong></td><td>The column's sequence in the index, beginning with <code>1</code>.</td></tr>
<tr><td><strong><code>Column_name</code></strong></td><td>Column name.</td></tr>
<tr><td><strong><code>Collation</code></strong></td><td>Either <code>A</code>, if the column is sorted in ascending order in the index, or <code>NULL</code> if it's not sorted.</td></tr>
<tr><td><strong><code>Cardinality</code></strong></td><td>Estimated number of unique values in the index. The cardinality statistics are calculated at various times, and can help the optimizer make improved decisions.</td></tr>
<tr><td><strong><code>Sub_part</code></strong></td><td><code>NULL</code> if the entire column is included in the index, or the number of included characters if not.</td></tr>
<tr><td><strong><code>Packed</code></strong></td><td><code>NULL</code> if the index is not packed, otherwise how the index is packed.</td></tr>
<tr><td><strong><code>Null</code></strong></td><td><code>NULL</code> if <code>NULL</code> values are permitted in the column, an empty string if <code>NULL</code>'s are not permitted.</td></tr>
<tr><td><strong><code>Index_type</code></strong></td><td>The index type, which can be <code>BTREE</code>, <code>FULLTEXT</code>, <code>HASH</code> or <code>RTREE</code>. See <a style="color: #150281;" href="https://mariadb.com/kb/en/storage-engine-index-types/">Storage Engine Index Types</a>.</td></tr>
<tr><td><strong><code>Comment</code></strong></td><td>Other information, such as whether the index is disabled.</td></tr>
<tr><td><strong><code>Index_comment</code></strong></td><td>Contents of the <code>COMMENT</code> attribute when the index was created.</td></tr>
<tr><td><strong><code>Ignored</code></strong></td><td>Whether or not an index will be ignored by the optimizer. See <a style="color: #150281;" href="https://mariadb.com/kb/en/ignored-indexes/">Ignored Indexes</a>. From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1060-release-notes/">MariaDB 10.6.0</a>.</td></tr>
</tbody></table>
</div><p>The <code class="highlight fixed" style="white-space:pre-wrap">WHERE</code> and <code class="highlight fixed" style="white-space:pre-wrap">LIKE</code> clauses can be given to select rows using more general conditions, as discussed in <a style="color: #150281;" href="https://mariadb.com/kb/en/extended-show/">Extended SHOW</a>.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="show-indexexamples">Examples</h2>
<pre class="fixed"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="o">`</span><span class="n">employees_example</span><span class="o">`</span> <span class="p">(</span>
  <span class="o">`</span><span class="n">id</span><span class="o">`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="o">`</span><span class="n">first_name</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">last_name</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="k">position</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">home_address</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">home_phone</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">employee_code</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">),</span>
  <span class="k">UNIQUE</span> <span class="k">KEY</span> <span class="o">`</span><span class="n">employee_code</span><span class="o">`</span> <span class="p">(</span><span class="o">`</span><span class="n">employee_code</span><span class="o">`</span><span class="p">),</span>
  <span class="k">KEY</span> <span class="o">`</span><span class="n">first_name</span><span class="o">`</span> <span class="p">(</span><span class="o">`</span><span class="n">first_name</span><span class="o">`</span><span class="p">,</span><span class="o">`</span><span class="n">last_name</span><span class="o">`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">Aria</span><span class="p">;</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">employees_example</span><span class="o">`</span> <span class="p">(</span><span class="o">`</span><span class="n">first_name</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">last_name</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="k">position</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">home_address</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">home_phone</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">employee_code</span><span class="o">`</span><span class="p">)</span>
  <span class="k">VALUES</span>
  <span class="p">(</span><span class="s1">'Mustapha'</span><span class="p">,</span> <span class="s1">'Mond'</span><span class="p">,</span> <span class="s1">'Chief Executive Officer'</span><span class="p">,</span> <span class="s1">'692 Promiscuous Plaza'</span><span class="p">,</span> <span class="s1">'326-555-3492'</span><span class="p">,</span> <span class="s1">'MM1'</span><span class="p">),</span>
  <span class="p">(</span><span class="s1">'Henry'</span><span class="p">,</span> <span class="s1">'Foster'</span><span class="p">,</span> <span class="s1">'Store Manager'</span><span class="p">,</span> <span class="s1">'314 Savage Circle'</span><span class="p">,</span> <span class="s1">'326-555-3847'</span><span class="p">,</span> <span class="s1">'HF1'</span><span class="p">),</span>
  <span class="p">(</span><span class="s1">'Bernard'</span><span class="p">,</span> <span class="s1">'Marx'</span><span class="p">,</span> <span class="s1">'Cashier'</span><span class="p">,</span> <span class="s1">'1240 Ambient Avenue'</span><span class="p">,</span> <span class="s1">'326-555-8456'</span><span class="p">,</span> <span class="s1">'BM1'</span><span class="p">),</span>
  <span class="p">(</span><span class="s1">'Lenina'</span><span class="p">,</span> <span class="s1">'Crowne'</span><span class="p">,</span> <span class="s1">'Cashier'</span><span class="p">,</span> <span class="s1">'281 Bumblepuppy Boulevard'</span><span class="p">,</span> <span class="s1">'328-555-2349'</span><span class="p">,</span> <span class="s1">'LC1'</span><span class="p">),</span>
  <span class="p">(</span><span class="s1">'Fanny'</span><span class="p">,</span> <span class="s1">'Crowne'</span><span class="p">,</span> <span class="s1">'Restocker'</span><span class="p">,</span> <span class="s1">'1023 Bokanovsky Lane'</span><span class="p">,</span> <span class="s1">'326-555-6329'</span><span class="p">,</span> <span class="s1">'FC1'</span><span class="p">),</span>
  <span class="p">(</span><span class="s1">'Helmholtz'</span><span class="p">,</span> <span class="s1">'Watson'</span><span class="p">,</span> <span class="s1">'Janitor'</span><span class="p">,</span> <span class="s1">'944 Soma Court'</span><span class="p">,</span> <span class="s1">'329-555-2478'</span><span class="p">,</span> <span class="s1">'HW1'</span><span class="p">);</span>
</pre><pre class="fixed">SHOW INDEXES FROM employees_example\G
*************************** 1. row ***************************
        Table: employees_example
   Non_unique: 0
     Key_name: PRIMARY
 Seq_in_index: 1
  Column_name: id
    Collation: A
  Cardinality: 6
     Sub_part: NULL
       Packed: NULL
         Null: 
   Index_type: BTREE
      Comment: 
Index_comment: 
      Ignored: NO
*************************** 2. row ***************************
        Table: employees_example
   Non_unique: 0
     Key_name: employee_code
 Seq_in_index: 1
  Column_name: employee_code
    Collation: A
  Cardinality: 6
     Sub_part: NULL
       Packed: NULL
         Null: 
   Index_type: BTREE
      Comment: 
Index_comment: 
      Ignored: NO
*************************** 3. row ***************************
        Table: employees_example
   Non_unique: 1
     Key_name: first_name
 Seq_in_index: 1
  Column_name: first_name
    Collation: A
  Cardinality: NULL
     Sub_part: NULL
       Packed: NULL
         Null: 
   Index_type: BTREE
      Comment: 
Index_comment: 
      Ignored: NO
*************************** 4. row ***************************
        Table: employees_example
   Non_unique: 1
     Key_name: first_name
 Seq_in_index: 2
  Column_name: last_name
    Collation: A
  Cardinality: NULL
     Sub_part: NULL
       Packed: NULL
         Null: 
   Index_type: BTREE
      Comment: 
Index_comment: 
      Ignored: NO
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="show-indexsee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/ignored-indexes/">Ignored Indexes</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="truncate-table">1.1.2.1.20 TRUNCATE TABLE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="truncate-tablesyntax">Syntax</h2>
<pre class="fixed">TRUNCATE [TABLE] tbl_name
  [WAIT n | NOWAIT]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class=""><a href="#truncate-tablesyntax" title="Syntax">Syntax</a></li>

    <li class=""><a href="#truncate-tabledescription" title="Description">Description</a>    <ol class="toc">

        <li class=""><a href="#truncate-tablewaitnowait" title="WAIT/NOWAIT">WAIT/NOWAIT</a></li>

        <li class=""><a href="#truncate-tableoracle-mode" title="Oracle-mode">Oracle-mode</a></li>

        <li class=""><a href="#truncate-tableperformance" title="Performance">Performance</a>    </li></ol>
</li>

    <li class=""><a href="#truncate-tablesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="truncate-tabledescription">Description</h2>
<p><code>TRUNCATE TABLE</code> empties a table completely. It requires the <code>DROP</code> privilege. See <a href="#grant">GRANT</a>.</p>
<p><code>tbl_name</code> can also be specified in the form <code>db_name</code>.<code>tbl_name</code> (see <a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-qualifiers/">Identifier Qualifiers</a>).</p>
<p>Logically, <code>TRUNCATE TABLE</code> is equivalent to a <a href="#delete">DELETE</a> statement that deletes all rows, but there are practical differences under some circumstances.</p>
<p><code>TRUNCATE TABLE</code> will fail for an <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB table</a> if any FOREIGN KEY constraints from other tables reference the table, returning the error:</p>
<pre class="fixed">ERROR 1701 (42000): Cannot truncate a table referenced in a foreign key constraint
</pre><p>Foreign Key constraints between columns in the same table are permitted.</p>
<p>For an InnoDB table, if there are no <code>FOREIGN KEY</code> constraints, InnoDB performs fast truncation by dropping the original table and creating an empty one with the same definition, which is much faster than deleting rows one by one. The <a style="color: #150281;" href="https://mariadb.com/kb/en/auto_increment/">AUTO_INCREMENT</a> counter is reset by <code>TRUNCATE TABLE</code>, regardless of whether there is a <code>FOREIGN KEY</code> constraint.</p>
<p>The count of rows affected by <code>TRUNCATE TABLE</code> is accurate only
when it is mapped to a <code>DELETE</code> statement.</p>
<p>For other storage engines, <code>TRUNCATE TABLE</code> differs from
<code>DELETE</code> in the following ways:</p>
<ul start="1"><li>Truncate operations drop and re-create the table, which is much
  faster than deleting rows one by one, particularly for large tables.
</li><li>Truncate operations cause an implicit commit.
</li><li>Truncation operations cannot be performed if the session holds an
  active table lock.
</li><li>Truncation operations do not return a meaningful value for the number
  of deleted rows. The usual result is "0 rows affected," which should
  be interpreted as "no information."
</li><li>As long as the table format file <code>tbl_name.frm</code> is valid, the
  table can be re-created as an empty table
  with <code>TRUNCATE TABLE</code>, even if the data or index files have become
  corrupted.
</li><li>The table handler does not remember the last
  used <a style="color: #150281;" href="https://mariadb.com/kb/en/auto_increment/">AUTO_INCREMENT</a> value, but starts counting
  from the beginning. This is true even for MyISAM and InnoDB, which normally
  do not reuse sequence values.
</li><li>When used with partitioned tables, <code>TRUNCATE TABLE</code> preserves
  the partitioning; that is, the data and index files are dropped and
  re-created, while the partition definitions (.par) file is
  unaffected.
</li><li>Since truncation of a table does not make any use of <code>DELETE</code>,
  the <code>TRUNCATE</code> statement does not invoke <code>ON DELETE</code> triggers.
</li><li><code>TRUNCATE TABLE</code> will only reset the values in the <a style="color: #150281;" href="https://mariadb.com/kb/en/list-of-performance-schema-tables/">Performance Schema summary tables</a> to zero or null, and will not remove the rows.
</li></ul>
<p>For the purposes of binary logging and <a style="color: #150281;" href="https://mariadb.com/kb/en/replication/">replication</a>, <code>TRUNCATE TABLE</code> is treated as <a href="#drop-table">DROP TABLE</a> followed by <a href="#create-table">CREATE TABLE</a> (DDL rather than DML).</p>
<p><code>TRUNCATE TABLE</code> does not work on <a style="color: #150281;" href="https://mariadb.com/kb/en/views/">views</a>. Currently, <code>TRUNCATE TABLE</code> drops all historical records from a <a style="color: #150281;" href="https://mariadb.com/kb/en/system-versioned-tables/">system-versioned table</a>.</p>
<div class="mariadb_from_10_3_0 mariadb from_10_3_0 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1030-release-notes/">10.3.0</a></h5><h4 class="anchored_heading" id="truncate-tablewaitnowait">WAIT/NOWAIT</h4>
<p>Set the lock wait timeout. See <a style="color: #150281;" href="https://mariadb.com/kb/en/wait-and-nowait/">WAIT and NOWAIT</a>.</p>
<h3 class="anchored_heading" id="truncate-tableoracle-mode">Oracle-mode</h3>
<p><a style="color: #150281;" href="https://mariadb.com/kb/en/sql_modeoracle/">Oracle-mode</a> from <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-103/">MariaDB 10.3</a> permits the optional keywords REUSE STORAGE or DROP STORAGE to be used.</p>
<pre class="fixed">TRUNCATE [TABLE] tbl_name [{DROP | REUSE} STORAGE] [WAIT n | NOWAIT]
</pre><p>These have no effect on the operation.</p>
</div><h3 class="anchored_heading" id="truncate-tableperformance">Performance</h3>
<p><code>TRUNCATE TABLE</code> is faster than <a href="delete-table">DELETE</a>, because it drops and re-creates a table.</p>
<p>With <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb/">InnoDB</a>, <code>TRUNCATE TABLE</code> is slower if <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_file_per_table">innodb_file_per_table=ON</a> is set (the default). This is because <code>TRUNCATE TABLE</code> unlinks the underlying tablespace file, which can be an expensive operation. See <a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-8069">MDEV-8069</a> for more details.</p>
<p>The performance issues with <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_file_per_table">innodb_file_per_table=ON</a> can be exacerbated in cases where the <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-buffer-pool/">InnoDB buffer pool</a> is very large and <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_adaptive_hash_index">innodb_adaptive_hash_index=ON</a> is set. In that case, using <a href="#drop-table">DROP TABLE</a> followed by <a href="#create-table">CREATE TABLE</a> instead of <code>TRUNCATE TABLE</code> may perform better. Setting <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_adaptive_hash_index">innodb_adaptive_hash_index=OFF</a> (it defaults to ON before <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-105/">MariaDB 10.5</a>) can also help. In <a style="color: #150281;" href="https://mariadb.com/kb/en/what-is-mariadb-102/">MariaDB 10.2</a> only, from <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-10219-release-notes/">MariaDB 10.2.19</a>, this performance can also be improved by setting <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_safe_truncate">innodb_safe_truncate=OFF</a>. See <a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-9459">MDEV-9459</a> for more details.</p>
<p>Setting <a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_adaptive_hash_index">innodb_adaptive_hash_index=OFF</a> can also improve <code>TRUNCATE TABLE</code> performance in general. See <a style="color: #150281;" href="https://jira.mariadb.org/browse/MDEV-16796">MDEV-16796</a> for more details.</p>
<h2 class="anchored_heading" style="margin-top: 50px;" id="truncate-tablesee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/truncate/">TRUNCATE function</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/innodb-system-variables/#innodb_safe_truncate">innodb_safe_truncate</a> system variable
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/sql_modeoracle-from-mariadb-103/#simple-syntax-compatibility">Oracle mode from MariaDB 10.3</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section><section class="limited_width col-md-8 clearfix" id="content">
                
                    <h1 id="update">1.1.2.1.21 UPDATE</h1>
                

                



                <div>
                    
    

    
    
    

    <div class="node creole">
        
        
        


    
    <div class="answer formatted">
        <h2 class="anchored_heading" style="margin-top: 50px;" id="updatesyntax">Syntax</h2>
<p>Single-table syntax:</p>
<pre class="fixed">UPDATE [LOW_PRIORITY] [IGNORE] table_reference 
  [PARTITION (partition_list)]
  [FOR PORTION OF period FROM expr1 TO expr2]
  SET col1={expr1|DEFAULT} [,col2={expr2|DEFAULT}] ...
  [WHERE where_condition]
  [ORDER BY ...]
  [LIMIT row_count]
</pre><p>Multiple-table syntax:</p>
<pre class="fixed">UPDATE [LOW_PRIORITY] [IGNORE] table_references
    SET col1={expr1|DEFAULT} [, col2={expr2|DEFAULT}] ...
    [WHERE where_condition]
</pre><div style="float: none;" class="table_of_contents well well-small">
<h3>Contents</h3>
<div style = "display:block; clear:both; page-break-after:always;"></div>

 <ol class="toc">

    <li class="mariadb_from_10_4_3"><a href="#updatesyntax" title="Syntax">Syntax</a></li>

    <li class="mariadb_from_10_4_3"><a href="#updatedescription" title="Description">Description</a>    <ol class="toc">

        <li class="mariadb_from_10_4_3"><a href="#updatepartition" title="PARTITION">PARTITION</a></li>

        <li class="mariadb_from_10_4_3"><a href="#updatefor-portion-of" title="FOR PORTION OF">FOR PORTION OF</a></li>

        <li class="mariadb_from_10_4_3"><a href="#updateupdate-statements-with-the-same-source-and-target" title="UPDATE Statements With the Same Source and Target">UPDATE Statements With the Same Source and Target</a>    </li></ol>
</li>

    <li class="mariadb_from_10_4_3"><a href="#updateexample" title="Example">Example</a></li>

    <li class="mariadb_from_10_4_3"><a href="#updatesee-also" title="See Also">See Also</a> </li></ol>

</div>
<h2 class="anchored_heading" style="margin-top: 50px;" id="updatedescription">Description</h2>
<p>For the single-table syntax, the <code>UPDATE</code> statement updates
columns of existing rows in the named table with new values. The
<code>SET</code> clause indicates which columns to modify and the values
they should be given.  Each value can be given as an expression, or the keyword
<code>DEFAULT</code> to set a column explicitly to its default value. The
<code>WHERE</code> clause, if given, specifies the conditions that identify
which rows to update. With no <code>WHERE</code> clause, all rows are
updated. If the <a style="color: #150281;" href="https://mariadb.com/kb/en/order-by/">ORDER BY</a> clause is specified, the rows are
updated in the order that is specified. The <a style="color: #150281;" href="https://mariadb.com/kb/en/limit/">LIMIT</a> clause
places a limit on the number of rows that can be updated.</p>
<p>Until <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1032-release-notes/">MariaDB 10.3.2</a>, for the multiple-table syntax, <code>UPDATE</code> updates rows in each
table named in table_references that satisfy the conditions. In this case,
<a style="color: #150281;" href="https://mariadb.com/kb/en/order-by/">ORDER BY</a> and <a style="color: #150281;" href="https://mariadb.com/kb/en/limit/">LIMIT</a> cannot be used. This restriction was lifted in <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1032-release-notes/">MariaDB 10.3.2</a> and both clauses can be used with multiple-table updates. An <code>UPDATE</code> can also reference tables which are located in different databases; see <a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-qualifiers/">Identifier Qualifiers</a> for the syntax.</p>
<p><code>where_condition</code> is an expression that evaluates to true for
each row to be updated.</p>
<p><code>table_references</code> and <code>where_condition</code> are as
specified as described in <a style="color: #150281;" href="https://mariadb.com/kb/en/select/">SELECT</a>.</p>
<p>For single-table updates, assignments are evaluated in left-to-right order, while for multi-table updates, there is no guarantee of a particular order. If the <code>SIMULTANEOUS_ASSIGNMENT</code> <a style="color: #150281;" href="https://mariadb.com/kb/en/sql-mode/">sql_mode</a> (available from <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1035-release-notes/">MariaDB 10.3.5</a>) is set, UPDATE statements evaluate all assignments simultaneously.</p>
<p>You need the <code>UPDATE</code> privilege only for columns referenced in
an <code>UPDATE</code> that are actually updated. You need only the
<a style="color: #150281;" href="https://mariadb.com/kb/en/select/">SELECT</a> privilege for any columns that are read but
not modified. See <a href="#grant">GRANT</a>.</p>
<p>The <code>UPDATE</code> statement supports the following modifiers:</p>
<ul start="1"><li>If you use the <code>LOW_PRIORITY</code> keyword, execution of
  the <code>UPDATE</code> is delayed until no other clients are reading from
  the table. This affects only storage engines that use only table-level
  locking (MyISAM, MEMORY, MERGE). See <a style="color: #150281;" href="https://mariadb.com/kb/en/high_priority-and-low_priority-clauses/">HIGH_PRIORITY and LOW_PRIORITY clauses</a> for details.
</li><li>If you use the <code>IGNORE</code> keyword, the update statement does 
  not abort even if errors occur during the update. Rows for which
  duplicate-key conflicts occur are not updated. Rows for which columns are
  updated to values that would cause data conversion errors are updated to the
  closest valid values instead.
</li></ul>
<h3 class="anchored_heading" id="updatepartition">PARTITION</h3>
<p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/partition-pruning-and-selection/">Partition Pruning and Selection</a> for details.</p>
<h3 class="anchored_heading" id="updatefor-portion-of">FOR PORTION OF</h3>
<div class="mariadb_from_10_4_3 mariadb from_10_4_3 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1043-release-notes/">10.4.3</a></h5><p>See <a style="color: #150281;" href="https://mariadb.com/kb/en/application-time-periods/#updating-by-portion">Application Time Periods - Updating by Portion</a>.</p>
</div><h3 class="anchored_heading" id="updateupdate-statements-with-the-same-source-and-target">UPDATE Statements With the Same Source and Target</h3>
<div class="mariadb_from_10_3_2 mariadb from_10_3_2 product"><h5 >MariaDB starting with <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1032-release-notes/">10.3.2</a></h5><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1032-release-notes/">MariaDB 10.3.2</a>, UPDATE statements may have the same source and target.</p>
</div><p>For example, given the following table:</p>
<pre class="fixed"><span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">t1</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t1</span> <span class="p">(</span><span class="n">c1</span> <span class="nb">INT</span><span class="p">,</span> <span class="n">c2</span> <span class="nb">INT</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">t1</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span>
</pre><p>Until <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1031-release-notes/">MariaDB 10.3.1</a>, the following UPDATE statement would not work:</p>
<pre class="fixed"><span class="k">UPDATE</span> <span class="n">t1</span> <span class="k">SET</span> <span class="n">c1</span><span class="o">=</span><span class="n">c1</span><span class="o">+</span><span class="mi">1</span> <span class="k">WHERE</span> <span class="n">c2</span><span class="o">=</span><span class="p">(</span><span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t1</span><span class="p">);</span>
<span class="n">ERROR</span> <span class="mi">1093</span> <span class="p">(</span><span class="n">HY000</span><span class="p">):</span> <span class="k">Table</span> <span class="s1">'t1'</span> <span class="k">is</span> <span class="n">specified</span> <span class="n">twice</span><span class="p">,</span> 
  <span class="k">both</span> <span class="k">as</span> <span class="n">a</span> <span class="n">target</span> <span class="k">for</span> <span class="s1">'UPDATE'</span> <span class="k">and</span> <span class="k">as</span> <span class="n">a</span> <span class="n">separate</span> <span class="k">source</span> <span class="k">for</span> <span class="k">data</span>
</pre><p>From <a style="color: #150281;" href="https://mariadb.com/kb/en/mariadb-1032-release-notes/">MariaDB 10.3.2</a>, the statement executes successfully:</p>
<pre class="fixed"><span class="k">UPDATE</span> <span class="n">t1</span> <span class="k">SET</span> <span class="n">c1</span><span class="o">=</span><span class="n">c1</span><span class="o">+</span><span class="mi">1</span> <span class="k">WHERE</span> <span class="n">c2</span><span class="o">=</span><span class="p">(</span><span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t1</span><span class="p">);</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t1</span><span class="p">;</span>
<span class="o">+</span><span class="c1">------+------+</span>
<span class="o">|</span> <span class="n">c1</span>   <span class="o">|</span> <span class="n">c2</span>   <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------+</span>
<span class="o">|</span>   <span class="mi">10</span> <span class="o">|</span>   <span class="mi">10</span> <span class="o">|</span>
<span class="o">|</span>   <span class="mi">21</span> <span class="o">|</span>   <span class="mi">20</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">------+------+</span>
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="updateexample">Example</h2>
<p>Single-table syntax:</p>
<pre class="fixed">UPDATE table_name SET column1 = value1, column2 = value2 WHERE id=100;
</pre><p>Multiple-table syntax:</p>
<pre class="fixed">UPDATE tab1, tab2 SET tab1.column1 = value1, tab1.column2 = value2 WHERE tab1.id = tab2.id;
</pre><h2 class="anchored_heading" style="margin-top: 50px;" id="updatesee-also">See Also</h2>
<ul start="1"><li><a style="color: #150281;" href="https://mariadb.com/kb/en/ignore/">How IGNORE works</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/select/">SELECT</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/order-by/">ORDER BY</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/limit/">LIMIT</a>
</li><li><a style="color: #150281;" href="https://mariadb.com/kb/en/identifier-qualifiers/">Identifier Qualifiers</a></li></ul>

    </div>


        
            
        

        
        
    
        
    

        

        
        
        
    
    

        

    </div>


                    
                </div>
            </section>    </body>
</html>